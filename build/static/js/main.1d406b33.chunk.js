(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{126:function(e,t){},152:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(27),o=n.n(i),s=(n(89),n(90),n(18)),c=n(26),u=n(39),l=n(15),h=n(50).createStore,d=localStorage.getItem("token"),p={token:d,id:localStorage.getItem("id"),playerid:localStorage.getItem("playerid"),username:localStorage.getItem("username"),tempJoinID:null,joined:!1,loggedIn:!!d},f=h((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,n=t.id,a=t.playerid,r=t.token,i=t.type,o=t.username,s=t.tempJoinId;switch(i){case"LOG_IN":return localStorage.setItem("token",r),localStorage.setItem("id",n),localStorage.setItem("playerid",a),localStorage.setItem("username",o),Object(l.a)({},e,{id:n,playerid:a,token:r,loggedIn:!0,username:o});case"JOIN_LOG_IN":return localStorage.setItem("token",r),localStorage.setItem("id",n),localStorage.setItem("playerid",a),localStorage.setItem("username",o),Object(l.a)({},e,{id:n,playerid:a,token:r,loggedIn:!0,username:o,joined:!0});case"LOG_OUT":return localStorage.removeItem("token"),localStorage.removeItem("id"),localStorage.removeItem("playerid"),localStorage.removeItem("username"),Object(l.a)({},e,{id:null,username:null,token:null,playerid:null,loggedIn:!1});case"SET_TEMP_JOIN":return console.log(s),Object(l.a)({},e,{tempJoinId:s});case"JOINED":return Object(l.a)({},e,{joined:!0});default:return Object(l.a)({},e)}})),m=n(7),b=n.n(m),v=n(1),y=n(6),g=n(19),x=n(4),w=n(12),O=n(13),k=n(16),j=n(23),I=n(22),S=n(33),E=n.n(S),M=function(e,t,n){for(var a in t)"object"==typeof e?"function"===typeof e[a]?n[a]=e[a]:"undefined"!=typeof e[a]?n[a]=E.a.cloneDeep(e[a]):n[a]=E.a.cloneDeep(t[a]):n[a]=E.a.cloneDeep(t[a])},R=function(e,t,n,a){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-a,2))},C=function(e,t,n,a){if(e===n&&t===a)return 0;if(e===n){if(t<a)return 270;if(t>a)return 90}if(t===a){if(e<n)return 0;if(n<e)return 180}var r=n-e,i=a-t,o=Math.atan(-i/r);return e<n&&t>a?A(o):e>n&&t>a||e>n&&t<a?180+A(o):e<n&&t<a?360+A(o):void 0},A=function(e){return 180*e/Math.PI},T=function(e){return e*Math.PI/180},L=function(e,t,n,a,r){return 0===r||360===r?[n,a]:D(e,t,C(e,t,n,a)+r,R(e,t,n,a))},D=function(e,t,n,a){var r=T(n),i=[0,90,180,270,360];if(-1!==i.indexOf(n)){var o=[[1,0],[0,1],[-1,0],[0,-1],[1,0]][i.indexOf(n)];return[e+o[0]*a,t-o[1]*a]}return[e+Math.cos(r)*a,t-Math.sin(r)*a]},X=function(e,t){var n=Object(v.a)(e,4),a=n[0],r=n[1],i=n[2],o=n[3],s=Object(v.a)(t,4),c=s[0],u=s[1],l=s[2],h=s[3];if(Math.round(a)===Math.round(i)||Math.round(c)===Math.round(l)){var d=L(0,0,a,r,30),p=Object(v.a)(d,2);a=p[0],r=p[1];var f=L(0,0,i,o,30),m=Object(v.a)(f,2);i=m[0],o=m[1];var b=L(0,0,c,u,30),y=Object(v.a)(b,2);c=y[0],u=y[1];var g=L(0,0,l,h,30),x=Object(v.a)(g,2);l=x[0],h=x[1]}var w=Math.min(a,i),O=Math.max(a,i),k=Math.min(c,l),j=Math.max(c,l),I=(r-o)/(a-i),S=(u-h)/(c-l),E=-a*I+r;if(I===S)return!1;var M=(-c*S+u-E)/(I-S);return M>w&&M<O&&M>k&&M<j&&[M,I*M+E]},P=function(e,t,n){var a=Object(v.a)(n,4),r=a[0],i=a[1],o=a[2],s=a[3],c=function(e,t,n,a,r,i){return Math.abs(C(e,t,r,i)-C(e,t,n,a))}(r,i,e,t,o,s),u=R(e,t,r,i),l=Math.abs(u*Math.cos(T(c))),h=Math.sqrt(Math.pow(u,2)-Math.pow(l,2));return!(l>R(r,i,o,s))&&(c=T(C(r,i,o,s)),[r+Math.cos(c)*l,i-Math.sin(c)*l,h])},Y=function(e,t,n){var a=e.split("."),r=t;a.forEach((function(e,t){t===a.length-1?Array.isArray(r)?r[parseInt(e)]=n:r[e]=n:r=Array.isArray(r)?r[parseInt(e)]:r[e]}))},W=function(e,t){var n=e.split("."),a=t;return n.forEach((function(e){a=Array.isArray(a)?a[parseInt(e)]:t[e]})),a},N={inputReference:{}};N.inputReference.movementIndex=["w","a","s","d","ArrowUp","ArrowLeft","ArrowDown","ArrowRight"],N.inputReference.coeffIndex=[[0,-1],[-1,0],[0,1],[1,0],[0,-1],[-1,0],[0,1],[1,0]],N.defaultAppConfig={initFunctions:["visualInit","mouseInputInit"],animateFunctions:["animate","update","render"],lastFrame:void 0,constantRender:!0,background:"black",pixelDensity:1},N.defaultObjectProps={shapes:[],animations:[],hoverEvents:[],animationCount:0,initFunctions:["createPreloader"],static:!0,x:0,y:0,rotation:0,positionIndicator:!1,display:!0,opacity:1,mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[],zIndex:0},N.defaultStorageProps={spacing:0,direction:"row",model:[]},N.defaultShapeOptions={kind:"rect",animations:[],hoverEvents:[],animationCount:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,color:"black",display:!0,lineWidth:1,opacity:1,borderColor:"yellow",borderWidth:10,border:!1,borderOnly:!1,shadow:null,mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[]},N.defaultRectOptions={w:0,h:0,clip:!1,clipImageLink:null,clipCanvas:null,clipSpriteSheetX:null,clipSpriteSheetY:null,spriteLengthX:null,spriteLengthY:null},N.defaultArcOptions={rad:0,arcDegree:360},N.defaultTextOptions={textAlign:"left",font:"10px Ariel",text:"Hello World"},N.defaultImgOptions={spriteLink:null,drawWidth:null,drawHeight:null,loadedFunction:void 0},N.defaultPolyOptions={points:[],specialPolygon:!1,numberOfSide:0,radius:10,clip:!1,clipImageLink:null},N.defaultLineOptions={points:[]},N.apps=[],N.gameloop={list:[],frameTime:void 0,lastFrame:void 0},N.gameloop.loop=function(e){requestAnimationFrame(N.gameloop.loop);for(var t=0;t<N.gameloop.list.length;t++)N.gameloop.list[t](N.apps[t]);void 0!==e&&(N.lastFrame=N.frameTime,N.frameTime=e)},N.gameloop.loop(),N.app=function(e,t){var n=this;this.options={},M(t,N.defaultAppConfig,this.options),this.canvas=e,this.options.initFunctions.forEach((function(e){return n[e]()})),this.objects=[],N.gameloop.list.push(this.options.constantRender?this.turnFunctions:function(){}),N.apps.push(this)},N.app.prototype.turnFunctions=function(e){e.options.animateFunctions.forEach((function(t){return e[t]()}))},N.app.prototype.update=function(){this.objects.forEach((function(e){"function"===typeof e.update&&e.update(e)}))},N.app.prototype.translateMouseCoor=function(e){var t,n;return e.pageX||e.pageY?(t=e.pageX,n=e.pageY):(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),t-=this.canvas.offsetLeft,n-=this.canvas.offsetTop,[t*this.pixelDensity,n*this.pixelDensity]},N.objectCount=0,N.object=function(){function e(t,n){var a=this;Object(w.a)(this,e),N.objectCount++,this.id=N.objectCount,this.parent=n,this.parent.objects.push(this),M(t,N.defaultObjectProps,this),this.initFunctions.forEach((function(e){return a[e]()})),this.name=t.objectName?t.objectName:"Object ".concat(this.id)}return Object(O.a)(e,[{key:"kill",value:function(){this.parent.objects.splice(this.parent.objects.indexOf(this),1)}},{key:"collide",value:function(e){var t,n=Object(y.a)(this.shapes);try{for(n.s();!(t=n.n()).done;){var a,r=t.value,i=Object(y.a)(e.shapes);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(r.collide(o))return!0}}catch(s){i.e(s)}finally{i.f()}}}catch(s){n.e(s)}finally{n.f()}return!1}},{key:"pointInObject",value:function(e,t){var n,a=Object(y.a)(this.shapes);try{for(a.s();!(n=a.n()).done;){if(n.value.pointInShape(e,t))return!0}}catch(r){a.e(r)}finally{a.f()}return!1}},{key:"findMax",value:function(){var e=[],t=[];return this.shapes.forEach((function(n){var a=n.findMax(),r=Object(v.a)(a,4),i=r[0],o=r[1],s=r[2],c=r[3];e=[].concat(Object(x.a)(e),[i,o]),t=[].concat(Object(x.a)(t),[s,c])})),[Math.min.apply(Math,Object(x.a)(e)),Math.max.apply(Math,Object(x.a)(e)),Math.min.apply(Math,Object(x.a)(t)),Math.max.apply(Math,Object(x.a)(t))]}},{key:"findThePositionThatIsRelativeToThisObjectFromAbsolutePosition",value:function(e,t){return[e-this.x,t-this.y]}}]),e}(),N.storage=function(e){Object(j.a)(n,e);var t=Object(I.a)(n);function n(e,a){var r;return Object(w.a)(this,n),r=t.call(this,e,a),M(e,N.defaultStorageProps,Object(k.a)(r)),r.storageShapes=[],r.model=e.model||[],r.elementFunction=e.elementFunction||null,r.updateToModel(),r}return Object(O.a)(n,[{key:"updateToModel",value:function(){var e=this,t=Object(x.a)(this.model);if(console.log(t),this.storageShapes.forEach((function(t){t.kill(),console.log(e.storageShapes)})),this.storageShapes=[],t.length&&this.elementFunction){var n;switch(this.direction){case"row-reverse":t.reverse();case"row":var a=(n=this.elementFunction(t[0],0)).width;n.kill();var r=-(a*t.length+this.spacing*(t.length-1))/2+.5*a;t.forEach((function(t,n){var i=e.elementFunction(t,n);e.storageShapes.push(i),i.x=r+n*a+n*e.spacing}));break;case"column-reverse":t.reverse();case"column":var i=(n=this.elementFunction(t[0],0)).height;n.kill();var o=-(i*t.length+this.spacing*(t.length-1))/2+.5*i;t.forEach((function(t,n){var a=e.elementFunction(t,n);e.storageShapes.push(a),a.y=o+n*i+n*e.spacing}))}this.updateVisual()}}}]),n}(N.object),N.spriteLinkReference=[],N.spriteImageReference=[],N.funcLists=[],N.sprite=function(e,t){var n=N.spriteLinkReference.indexOf(e);if(-1!==n){var a=N.spriteImageReference[n];return N.funcLists[n].push(t),a.complete&&requestAnimationFrame(t),a}var r=new Image,i=N.spriteImageReference.length;return r.onload=function(){N.funcLists[i].forEach((function(e){return e()}))},N.funcLists[i]=[],N.funcLists[i].push(t),r.src=e,N.spriteLinkReference.push(e),N.spriteImageReference.push(r),r},N.shape=function(){function e(t,n){Object(w.a)(this,e),this.kind=t.kind,this.parent=n,this.parent.shapes.push(this),M(t,N.defaultShapeOptions,this)}return Object(O.a)(e,[{key:"kill",value:function(){var e=this.parent.shapes.indexOf(this);e<0||(this.parent.shapes.splice(e,1),this.parent.updateVisual())}},{key:"findVertex",value:function(){return[]}},{key:"findMax",value:function(){var e=this.findVertex(),t=[],n=[];e.forEach((function(e){var a=Object(v.a)(e,2),r=a[0],i=a[1];t.push(r),n.push(i)}));var a=-this.borderWidthIfBorderIsOn,r=this.borderWidthIfBorderIsOn,i=-this.borderWidthIfBorderIsOn,o=this.borderWidthIfBorderIsOn;if(this.shadow){var s=-this.shadow.blur-2,c=this.shadow.blur+2,u=-this.shadow.blur-2,l=this.shadow.blur+2;this.shadow.offsetX&&(s+=this.shadow.offsetX,c+=this.shadow.offsetX),this.shadow.offsetY&&(u+=this.shadow.offsetY,l+=this.shadow.offsetY),s<0&&(a+=s),c>0&&(r+=c),u<0&&(i+=u),l>0&&(o+=l)}return[Math.min.apply(Math,t)+a,Math.max.apply(Math,t)+r,Math.min.apply(Math,n)+i,Math.max.apply(Math,n)+o]}},{key:"pointInShape",value:function(e,t){var n=this.findSides(),a=this.findMax(),r=Object(v.a)(a,4),i=r[0],o=r[1],s=r[2],c=r[3],u=[e,t,e+R(e,t,o,c),t],l=0;return!(e>o||e<i||t>c||t<s)&&(n.forEach((function(e){X(e,u)&&l++})),!(l%2===0))}},{key:"findSides",value:function(){for(var e=this.findVertex(),t=[],n=0;n<e.length;n++)t.push([].concat(Object(x.a)(e[n]),Object(x.a)(e[n+1]?e[n+1]:e[0])));return t}},{key:"collide",value:function(e){if("arc"===e.kind)return e.collide(this);var t=this.findMax(),n=Object(v.a)(t,4),a=n[0],r=n[1],i=n[2],o=n[3],s=e.findMax(),c=Object(v.a)(s,4),u=c[0],l=c[1],h=c[2],d=c[3];if(r<l&&a>u&&o<d&&i>h||l<r&&u>a&&d<o&&h>i)return!0;var p,f=this.findSides(),m=e.findSides(),b=Object(y.a)(f);try{for(b.s();!(p=b.n()).done;){var g,x=p.value,w=Object(y.a)(m);try{for(w.s();!(g=w.n()).done;){var O=g.value;if(X(x,O))return!0}}catch(k){w.e(k)}finally{w.f()}}}catch(k){b.e(k)}finally{b.f()}return!1}},{key:"absoluteX",get:function(){return this.x+this.parent.x}},{key:"absoluteY",get:function(){return this.y+this.parent.y}},{key:"hasBorder",get:function(){return this.border||this.borderOnly}},{key:"width",get:function(){return(this.hasBorder?this.w+this.borderWidth:this.w)*this.scaleX}},{key:"height",get:function(){return(this.hasBorder?this.h+this.borderWidth:this.h)*this.scaleY}},{key:"outOfBound",get:function(){var e=this.findMax(),t=Object(v.a)(e,4),n=t[0],a=t[1],r=t[2],i=t[3],o=this.parent.parent.canvas,s=o.width,c=o.height;return n>s||a<0||r>c||i<0}},{key:"borderWidthIfBorderIsOn",get:function(){return this.border||this.borderOnly?this.borderWidth:0}}]),e}(),N.rect=function(e){Object(j.a)(n,e);var t=Object(I.a)(n);function n(e,a){var r;return Object(w.a)(this,n),r=t.call(this,e,a),M(e,N.defaultRectOptions,Object(k.a)(r)),r}return Object(O.a)(n,[{key:"findVertex",value:function(){var e=this,t=[];return[[1,-1],[-1,-1],[-1,1],[1,1]].forEach((function(n){var a=Object(v.a)(n,2),r=a[0],i=a[1],o=e.absoluteX+.5*e.width*r,s=e.absoluteY+.5*e.height*i;t.push(L(e.absoluteX,e.absoluteY,o,s,e.rotation))})),t}}]),n}(N.shape),N.arc=function(e){Object(j.a)(n,e);var t=Object(I.a)(n);function n(e,a){var r;return Object(w.a)(this,n),r=t.call(this,e,a),M(e,N.defaultArcOptions,Object(k.a)(r)),r}return Object(O.a)(n,[{key:"pointInShape",value:function(e,t){var n=C(this.absoluteX,this.absoluteY,e,t);return n>this.minAngle&&n<this.maxAngle&&R(this.absoluteX,this.absoluteY,e,t)<=this.radius}},{key:"findMax",value:function(){var e=[this.absoluteX-this.radius,this.absoluteX+this.radius,this.absoluteY-this.radius,this.absoluteY+this.radius],t=[this.absoluteX,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius],n=[this.absoluteY,this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius];return this.pointInShape(e[0],this.absoluteY)||(e[0]=Math.min.apply(Math,t)-this.borderWidthIfBorderIsOn/2),this.pointInShape(e[1],this.absoluteY)||(e[1]=Math.max.apply(Math,t)+this.borderWidthIfBorderIsOn/2),this.pointInShape(this.absoluteX,e[2])||(e[2]=Math.min.apply(Math,n)-this.borderWidthIfBorderIsOn/2),this.pointInShape(this.absoluteX,e[3])||(e[3]=Math.max.apply(Math,n)+this.borderWidthIfBorderIsOn/2),e}},{key:"findVertex",value:function(){var e=this.findMax(),t=Object(v.a)(e,4),n=t[0],a=t[1],r=t[2],i=t[3],o=[this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteX+this.radius,this.absoluteX-this.radius,this.absoluteX],s=[this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius,this.absoluteY+this.radius,this.absoluteY-this.radius,this.absoluteY];return[[n,s[o.indexOf(n)]],[a,s[o.indexOf(a)]],[o[s.indexOf(r)],r],[o[s.indexOf(i)],i]]}},{key:"fidnSides",value:function(){return 360!==this.arcDegree&&[[this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.minRadAngle)*this.radius],[this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius]]}},{key:"collide",value:function(e){var t,n=this.findVertex(),a=e.findVertex(),r=Object(y.a)(n);try{for(r.s();!(t=r.n()).done;){var i=Object(v.a)(t.value,2),o=i[0],s=i[1];if(e.pointInShape(o,s))return!0}}catch(O){r.e(O)}finally{r.f()}var c,u=Object(y.a)(a);try{for(u.s();!(c=u.n()).done;){var l=Object(v.a)(c.value,2),h=l[0],d=l[1];if(this.pointInShape(h,d))return!0}}catch(O){u.e(O)}finally{u.f()}if("arc"===e.kind){if(this.pureCircle&&e.pureCircle)return R(this.absoluteX,this.absoluteY,e.absoluteX,e.absoluteY)<=this.radius+e.radius;if(R(this.absoluteX,this.absoluteY,e.absoluteX,e.absoluteY)>this.radius+e.radius)return!1;var p=C(this.absoluteX,this.absoluteY,e.absoluteX,e.absoluteY),f=C(e.absoluteX,e.absoluteY,this.absoluteX,this.absoluteY);return p<this.maxAngle&&p>this.minAngle&&f<e.maxAngle&&f>e.minAngle}var m,b=e.findSides(),g=Object(y.a)(b);try{for(g.s();!(m=g.n()).done;){var x=m.value,w=P(this.absoluteX,this.absoluteY,x);if(w&&this.pointInShape(w[0],w[1]))return!0}}catch(O){g.e(O)}finally{g.f()}return!1}},{key:"radius",get:function(){return this.hasBorder?this.rad+this.borderWidth:this.rad}},{key:"minAngle",get:function(){return this.rotation}},{key:"maxAngle",get:function(){return this.rotation+this.arcDegree}},{key:"minRadAngle",get:function(){return T(this.minAngle)}},{key:"maxRadAngle",get:function(){return T(this.maxAngle)}},{key:"pureCircle",get:function(){return 360===this.arcDegree}}]),n}(N.shape),N.roundedRectangle=function(e){Object(j.a)(n,e);var t=Object(I.a)(n);function n(e,a){var r;return Object(w.a)(this,n),(r=t.call(this,e,a)).borderRadius=e.borderRadius||0,r.clip&&(e.clipCanvas?(r.clipImage=e.clipCanvas,r.clipCanvas=!0):r.clipImage=N.sprite(r.clipImageLink,(function(){r.parent.updateVisual()}))),r}return Object(O.a)(n,[{key:"changeClipImage",value:function(e){var t=this;this.clipImage=N.sprite(e,(function(){t.parent.updateVisual()}))}},{key:"clipImageLoaded",get:function(){return!!this.clip&&(!!this.clipCanvas||this.clipImage.complete)}}]),n}(N.rect),N.poly=function(e){Object(j.a)(n,e);var t=Object(I.a)(n);function n(e,a){var r;return Object(w.a)(this,n),r=t.call(this,e,a),M(e,N.defaultPolyOptions,Object(k.a)(r)),r.clip&&(r.clipImage=N.sprite(r.clipImageLink,(function(){r.parent.updateVisual()}))),r}return Object(O.a)(n,[{key:"findVertex",value:function(){var e=this;return this.polyPoints.map((function(t){var n=Object(v.a)(t,2),a=n[0],r=n[1];return L(e.absoluteX,e.absoluteY,a+e.absoluteX,r+e.absoluteY,e.rotation)}))}},{key:"clipImageLoaded",get:function(){return!!this.clip&&this.clipImage.complete}},{key:"polyPoints",get:function(){if(!this.specialPolygon)return this.points;for(var e=360/this.numberOfSide,t=[],n=0;n<this.numberOfSide;n++)t.push(D(0,0,e*n,this.radius));return t}},{key:"width",get:function(){return this.findMax()[1]-this.findMax()[0]}},{key:"height",get:function(){return this.findMax()[3]-this.findMax()[2]}},{key:"sideLength",get:function(){if(!this.specialPolygon)return null;var e=T(360/this.numberOfSide);return Math.sqrt(2*Math.pow(this.radius,2)-2*Math.pow(this.radius,2)*Math.cos(e))}}]),n}(N.shape),N.line=function(e){Object(j.a)(n,e);var t=Object(I.a)(n);function n(e,a){var r;return Object(w.a)(this,n),r=t.call(this,e,a),M(e,N.defaultLineOptions,Object(k.a)(r)),r}return Object(O.a)(n,[{key:"findVertex",value:function(){var e=this,t=[],n=function(e){var n,a=Object(v.a)(e,2),r=a[0],i=a[1],o=Object(y.a)(t);try{for(o.s();!(n=o.n()).done;){var s=n.value,c=Object(v.a)(s,2),u=c[0],l=c[1];if(Math.round(r)===Math.round(u)&&Math.round(i)===Math.round(l))return!1}}catch(h){o.e(h)}finally{o.f()}return!0},a=Object(x.a)(this.rotatedPoints);return a.forEach((function(r,i){var o=Object(v.a)(r,2),s=o[0],c=o[1];if(i!==a.length-1){var u=Object(v.a)(e.rotatedPoints[i+1],2),l=u[0],h=u[1],d=R(s,c,l,h),p=Math.atan(e.lineWidth/2/d),f=C(s,c,l,h),m=A(p)+f,b=Math.sqrt(d*d+.5*e.lineWidth*(.5*e.lineWidth)),y=D(s,c,m,b),g=D.apply(void 0,Object(x.a)(y).concat([180+f,d])),w=D.apply(void 0,Object(x.a)(g).concat([270+f,d])),O=D.apply(void 0,Object(x.a)(w).concat([f,d]));n(O)&&t.push(O),n(y)&&t.push(y),n(g)&&t.push(g),n(w)&&t.push(w)}})),t}},{key:"rotatedPoints",get:function(){var e=this;return this.points.map((function(t){var n=Object(v.a)(t,2),a=n[0],r=n[1];return L(e.absoluteX,e.absoluteY,a+e.absoluteX,r+e.absoluteY,e.rotation)}))}}]),n}(N.shape),N.text=function(e){Object(j.a)(n,e);var t=Object(I.a)(n);function n(e,a){var r;return Object(w.a)(this,n),r=t.call(this,e,a),M(e,N.defaultTextOptions,Object(k.a)(r)),r}return Object(O.a)(n,[{key:"findVertex",value:function(){var e=this,t=[];return[[1,-1],[-1,-1],[-1,.5],[1,.5]].forEach((function(n){var a=Object(v.a)(n,2),r=a[0],i=a[1],o=e.absoluteX+.5*e.width*r,s=e.absoluteY+.5*e.height*i;t.push(L(e.absoluteX,e.absoluteY,o,s,e.rotation))})),t}},{key:"textSize",get:function(){var e=N.apps[0].context;e.save(),e.font=this.font;var t=e.measureText(this.text).width,n=e.measureText("gM").width;return e.restore(),[t,n]}},{key:"w",get:function(){return this.textSize[0]+this.borderWidthIfBorderIsOn}},{key:"h",get:function(){return this.textSize[1]+this.borderWidthIfBorderIsOn}}]),n}(N.shape),N.img=function(e){Object(j.a)(n,e);var t=Object(I.a)(n);function n(e,a){var r;return Object(w.a)(this,n),r=t.call(this,e,a),M(e,N.defaultImgOptions,Object(k.a)(r)),r.sprite=N.sprite(r.spriteLink,(function(){r.loadedFunction&&r.loadedFunction(),r.parent.updateVisual()})),r}return Object(O.a)(n,[{key:"findVertex",value:function(){var e=this,t=[];return[[1,-1],[-1,-1],[-1,1],[1,1]].forEach((function(n){var a=Object(v.a)(n,2),r=a[0],i=a[1],o=e.absoluteX+.5*e.width*r,s=e.absoluteY+.5*e.height*i;t.push(L(e.absoluteX,e.absoluteY,o,s,e.rotation))})),t}},{key:"imageLoaded",get:function(){return this.sprite.complete}},{key:"w",get:function(){return this.drawWidth?this.drawWidth:this.imageLoaded?this.drawHeight?this.drawHeight*this.sprite.width/this.sprite.height:this.sprite.width:0}},{key:"h",get:function(){return this.drawHeight?this.drawHeight:this.imageLoaded?this.drawWidth?this.drawWidth*this.sprite.height/this.sprite.width:this.sprite.height:0}}]),n}(N.shape),N.object.prototype.attachQuickMovement=function(e,t,n){var a=!0,r=this;document.addEventListener("keydown",(function(i){a&&-1!==N.inputReference.movementIndex.indexOf(i.key)&&(r.x+=N.inputReference.coeffIndex[N.inputReference.movementIndex.indexOf(i.key)][0]*e,r.y+=N.inputReference.coeffIndex[N.inputReference.movementIndex.indexOf(i.key)][1]*e,r.updateVisual(),n&&n(i,r),a=!1,setTimeout((function(){a=!0}),t))}))},N.app.prototype.startCursor=function(){this.canvas.style.cursor="pointer"},N.app.prototype.endCursor=function(){this.canvas.style.cursor="default"},N.object.prototype.enterCursorEvent=function(){var e=this;this.alreadyCursorEvent||(this.alreadyCursorEvent=!0,this.hoverEvent((function(){return e.parent.startCursor()}),(function(){return e.parent.endCursor()})))},N.shape.prototype.enterCursorEvent=function(){var e=this;this.alreadyCursorEvent||(this.alreadyCursorEvent=!0,this.hoverEvent((function(){return e.parent.parent.startCursor()}),(function(){return e.parent.parent.endCursor()})))},N.app.prototype.mouseInputInit=function(){var e=this,t=function(t,n){var a=e.translateMouseCoor(t),r=Object(v.a)(a,2),i=r[0],o=r[1];if(0!==e.objects.length){for(var s=e.objects.length;s--;s>=0){var c=e.objects[s];if(0!==c[n].length&&(c.display&&c.pointInObject(i,o))){var u,l=Object(y.a)(c[n]);try{for(l.s();!(u=l.n()).done;){(0,u.value)(i,o)}}catch(g){l.e(g)}finally{l.f()}break}}e:for(var h=e.objects.length;h--;h>=0){var d=e.objects[h];if(0!==d.shapes.length&&d.display)for(var p=d.shapes.length;p--;p>=0){var f=d.shapes[p];if(0!==f[n].length&&(f.display&&f.pointInShape(i,o))){var m,b=Object(y.a)(f[n]);try{for(b.s();!(m=b.n()).done;){(0,m.value)(i,o)}}catch(g){b.e(g)}finally{b.f()}break e}}}}};this.canvas.addEventListener("mouseup",(function(e){return t(e,"mouseUpEvent")})),this.canvas.addEventListener("mousemove",(function(e){return t(e,"mouseMoveEvent")})),this.canvas.addEventListener("mousedown",(function(e){return t(e,"mouseDownEvent")}))},N.object.prototype.pressedEvent=function(e){this.enterCursorEvent(),this.mouseUpEvent.push(e)},N.object.prototype.makeDraggable=function(e,t){var n=this;this.enterCursorEvent(),this.onDrag=!1;var a=this;this.draggable=!0;var r=0,i=0;this.mouseDownEvent.push((function(e,t){a.draggable&&(a.onDrag||(a.onDrag=!0,r=e-a.x,i=t-a.y))})),document.addEventListener("mousemove",(function(t){var o=n.parent.translateMouseCoor(t);(o[0]<0||o[0]>n.parent.canvas.width||o[1]<0||o[1]>n.parent.canvas.height)&&(a.onDrag=!1),a.onDrag&&(a.x=o[0]-r,a.y=o[1]-i,a.updateVisual(),"function"==typeof e&&e(a))})),this.parent.canvas.addEventListener("mouseup",(function(e){a.onDrag&&(a.onDrag=!1,t&&t())}))},N.object.prototype.hoverEvent=function(e,t){var n=this;this.mouseIn=!1;var a=this;this.hoverEvents.push([e,t]),1===this.hoverEvents.length&&(this.enterCursorEvent(),document.addEventListener("mousemove",(function(e){var t=n.parent.translateMouseCoor(e);if(t[0]<0||t[0]>n.parent.canvas.width||t[1]<0||t[1]>n.parent.canvas.height){a.mouseIn=!1;var r,i=Object(y.a)(n.hoverEvents);try{for(i.s();!(r=i.n()).done;){var o=r.value;o[1]&&o[1]()}}catch(h){i.e(h)}finally{i.f()}a.updateVisual()}else{var s=a.pointInObject(t[0],t[1]);if(a.mouseIn&&!s){a.mouseIn=!1;var c,u=Object(y.a)(n.hoverEvents);try{for(u.s();!(c=u.n()).done;){var l=c.value;l[1]&&l[1]()}}catch(h){u.e(h)}finally{u.f()}a.updateVisual()}}})),this.mouseMoveEvent.push((function(){if(!a.mouseIn){a.mouseIn=!0;var e,t=Object(y.a)(n.hoverEvents);try{for(t.s();!(e=t.n()).done;){var r=e.value;r[0]&&r[0]()}}catch(i){t.e(i)}finally{t.f()}a.updateVisual()}})))},N.object.prototype.attachQuickMovement=function(e,t,n){var a=!0,r=this;document.addEventListener("keydown",(function(i){a&&-1!==N.inputReference.movementIndex.indexOf(i.key)&&(r.x+=N.inputReference.coeffIndex[N.inputReference.movementIndex.indexOf(i.key)][0]*e,r.y+=N.inputReference.coeffIndex[N.inputReference.movementIndex.indexOf(i.key)][1]*e,r.updateVisual(),n&&n(i,r),a=!1,setTimeout((function(){a=!0}),t))}))},N.shape.prototype.pressedEvent=function(e){this.enterCursorEvent(),this.mouseUpEvent.push(e)},N.shape.prototype.hoverEvent=function(e,t){var n=this;this.mouseIn=!1;var a=this;this.hoverEvents.push([e,t]),1===this.hoverEvents.length&&(this.enterCursorEvent(),document.addEventListener("mousemove",(function(e){if(n.display){var t=n.parent.parent.translateMouseCoor(e);if(t[0]<0||t[0]>n.parent.parent.canvas.width||t[1]<0||t[1]>n.parent.parent.canvas.height){a.mouseIn=!1;var r,i=Object(y.a)(n.hoverEvents);try{for(i.s();!(r=i.n()).done;){var o=r.value;o[1]&&o[1]()}}catch(h){i.e(h)}finally{i.f()}a.parent.updateVisual()}else{var s=a.pointInShape(t[0],t[1]);if(a.mouseIn&&!s){a.mouseIn=!1;var c,u=Object(y.a)(n.hoverEvents);try{for(u.s();!(c=u.n()).done;){var l=c.value;l[1]&&l[1]()}}catch(h){u.e(h)}finally{u.f()}a.parent.updateVisual()}}}})),this.mouseMoveEvent.push((function(){if(!a.mouseIn){a.mouseIn=!0;var e,t=Object(y.a)(n.hoverEvents);try{for(t.s();!(e=t.n()).done;){var r=e.value;r[0]&&r[0]()}}catch(i){t.e(i)}finally{t.f()}a.parent.updateVisual()}})))},N.app.prototype.animate=function(){if(void 0!==N.frameTime&&void 0!==N.lastFrame){var e=N.frameTime-N.lastFrame;this.objects.forEach((function(t){t.animate(e),t.shapes.forEach((function(t){t.animate(e)}))}))}};for(var V in N.animateFunctionReference={animate:function(e){var t=this,n=this;this.animations.forEach((function(a){var r=Object(v.a)(a,4),i=r[0],o=r[1],s=r[2],c=r[3],u=W(i,n)+e/c*(o-s);s<o&&u>o&&(u=o),s>o&&u<o&&(u=o),Y(i,n,u),t.parent.updateVisual?t.parent.updateVisual():t.updateVisual()}))},addAnimation:function(e,t,n,a){var r=this;this.animationCount++;var i=this.animationCount,o=setTimeout((function(){Y(e,r,t),r.cancelAnimation(i),r.parent.updateVisual?r.parent.updateVisual():r.updateVisual(),a&&a()}),n),s=this.animations.find((function(t){return t[0]===e}));return s&&this.cancelAnimation(s[6]),this.animations.push([e,t,W(e,this),n,o,a,i]),i},cancelAnimation:function(){for(var e=this,t=function(){var t=a[n],r=e.animations.find((function(e){return e[6]===t})),i=e.animations.findIndex((function(e){return e[6]===t}));if(!r)return{v:!1};clearTimeout(r[4]),e.animations.splice(i,1)},n=0,a=Array.prototype.slice.call(arguments);n<a.length;n++){var r=t();if("object"===typeof r)return r.v}}},N.animateFunctionReference)N.object.prototype[V]=N.animateFunctionReference[V],N.shape.prototype[V]=N.animateFunctionReference[V];N.app.prototype.render=function(){this.clearCanvas(),this.fillBackground(),this.renderShape()},N.app.prototype.visualInit=function(){this.backgroundColor=this.options.background,this.context=this.canvas.getContext("2d")},N.app.prototype.renderShape=function(){this.renderPositions(),this.objects.sort((function(e,t){return e.zIndex-t.zIndex})).forEach((function(e){e.static?e.drawPreloader():e.draw()}))},N.app.prototype.clearCanvas=function(){this.context.save(),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.restore()},N.app.prototype.fillBackground=function(){"none"!==this.backgroundColor&&(this.context.save(),this.context.fillStyle=this.backgroundColor,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.restore())},N.app.prototype.renderPositions=function(){var e=this;this.context.save(),this.context.fillStyle="red",this.objects.forEach((function(t){var n=t.x,a=t.y;t.positionIndicator&&(e.context.beginPath(),e.context.arc(n,a,5,0,2*Math.PI),e.context.closePath(),e.context.fill())})),this.context.restore()},N.object.prototype.updateVisual=function(){for(var e=this,t=this.findMax(),n=0;n<t.length;n++)if(Math.round(t[n])!==Math.round(this.preloader.maxes[n]))return void this.createPreloader();this.clearPreloader(),this.shapes.forEach((function(t){var n=e.preloader.ox+t.x,a=e.preloader.oy+t.y;N.drawShape(e.preloader.context,n,a,t)}))},N.object.prototype.clearPreloader=function(){this.preloader.context.clearRect(0,0,this.preloader.width,this.preloader.height)},N.object.prototype.createPreloader=function(){this.preloader=document.createElement("canvas"),this.preloader.maxes=this.findMax();var e=Object(v.a)(this.preloader.maxes,4),t=e[0],n=e[1],a=e[2],r=e[3];this.preloader.width=n-t,this.preloader.height=r-a,this.preloader.ox=this.x-t,this.preloader.oy=this.y-a,this.preloader.context=this.preloader.getContext("2d"),this.updateVisual()},N.object.prototype.drawPreloader=function(){if(this.display&&this.preloader.width>0&&this.preloader.height>0){var e=this.preloader.maxes[0]+this.preloader.width/2,t=this.preloader.maxes[2]+this.preloader.height/2;e=Math.ceil(e),t=Math.ceil(t),this.parent.context.save(),this.parent.context.translate(e,t),N.drawImg(this.parent.context,this.preloader,this.preloader.width,this.preloader.height),this.parent.context.restore()}},N.object.prototype.draw=function(){var e=this;this.display&&this.shapes.forEach((function(t){N.drawShape(e.parent.context,e.x+t.x,e.y+t.y,t)}))},N.drawShape=function(e,t,n,a){a.display&&(a.border||a.borderOnly?this.drawShapeKind(e,a,t,n,!0,1,a.borderColor,a.shadow):a.borderOnly||a.border||this.drawShapeKind(e,a,t,n,!1,a.opacity,a.color,a.shadow),a.borderOnly||this.drawShapeKind(e,a,t,n,!1,a.opacity,a.color))},N.drawShapeKind=function(e,t,n,a,r,i,o,s){if(!(0==(i*=t.parent.opacity)||i<0)){if(n=Math.ceil(n),a=Math.ceil(a),e.save(),e.globalAlpha=i,e.fillStyle=o,e.strokeStyle=o,e.lineWidth=t.borderWidth,e.translate(n,a),e.scale(t.scaleX,t.scaleY),s){var c=s.color,u=s.blur,l=s.offsetX,h=s.offsetY;e.shadowColor=c,e.shadowBlur=u,e.shadowOffsetX=l,e.shadowOffsetY=h}switch(t.kind){case"rect":N.drawRect(e,t.w,t.h,t.rotation,r);break;case"arc":N.drawArc(e,t.rad,t.arcDegree,t.rotation,r);break;case"text":N.drawText(e,t.text,t.font,r,t.textAlign,t.w,t.h,t.rotation);break;case"img":t.imageLoaded&&N.drawImg(e,t.sprite,t.w,t.h,t.rotation);break;case"poly":N.drawPoly(e,t.polyPoints,t.rotation,r);break;case"line":if(r){var d=t.points.map((function(e,n){var a=Object(v.a)(e,2),r=a[0],i=a[1];if(0===n){var o=T(C.apply(void 0,Object(x.a)(e).concat(Object(x.a)(t.points[n+1]))));return[r-t.borderWidth*Math.cos(o),i+t.borderWidth*Math.sin(o)]}if(n===t.points.length-1){var s=T(C.apply(void 0,Object(x.a)(e).concat(Object(x.a)(t.points[n-1]))));return[r-t.borderWidth*Math.cos(s),i+t.borderWidth*Math.sin(s)]}return[r,i]}));N.drawLine(e,d,t.rotation,t.lineWidth+t.borderWidth)}else N.drawLine(e,t.points,t.rotation,t.lineWidth);break;case"roundedRectangle":N.drawRoundedRectangle(e,t.w,t.h,t.rotation,t.borderRadius,r)}if(t.clip&&t.clipImageLoaded)if(e.clip(),e.rotate(T(t.rotation)),"number"===typeof t.clipSpriteSheetX&&"number"===typeof t.clipSpriteSheetY){var p=t.clipImage.width/t.spriteLengthX,f=t.clipImage.height/t.spriteLengthY,m=t.clipSpriteSheetX*p,b=t.clipSpriteSheetY*f;e.drawImage(t.clipImage,m,b,p,f,-t.width/2,-t.height/2,t.width,t.height)}else e.drawImage(t.clipImage,-t.width/2,-t.height/2,t.width,t.height);e.restore()}},N.drawRect=function(e,t,n,a,r){e.rotate(T(360-a)),r?e.strokeRect(-t/2,-n/2,t,n):e.fillRect(-t/2,-n/2,t,n)},N.drawRoundedRectangle=function(e,t,n,a,r,i){e.rotate(T(360)),e.beginPath(),e.moveTo(0,.5*-n),e.lineTo(.5*-t+r,.5*-n),e.quadraticCurveTo(.5*-t,.5*-n,.5*-t,.5*-n+r),e.lineTo(.5*-t,.5*n-r),e.quadraticCurveTo(.5*-t,.5*n,.5*-t+r,.5*n),e.lineTo(.5*t-r,.5*n),e.quadraticCurveTo(.5*t,.5*n,.5*t,.5*n-r),e.lineTo(.5*t,.5*-n+r),e.quadraticCurveTo(.5*t,.5*-n,.5*t-r,.5*-n),e.lineTo(0,.5*-n),e.closePath(),i?e.stroke():e.fill()},N.drawArc=function(e,t,n,a,r){e.beginPath();var i=T(360-a-n),o=T(360-a);if(n<360){var s=L(0,0,t,0,360-a-n),c=Object(v.a)(s,2),u=c[0],l=c[1];e.moveTo(u,l),e.moveTo(0,0)}e.arc(0,0,t,i,o),r?e.stroke():e.fill(),e.closePath()},N.drawText=function(e,t,n,a,r,i,o,s){e.textAlign=r,e.font=n,e.rotate(T(360-s)),e.fillText(t,Math.ceil(-i/2),Math.ceil(o/3.5))},N.drawImg=function(e,t,n,a,r){e.rotate(T(360-r)),e.drawImage(t,-n/2,-a/2,n,a)},N.drawPoly=function(e,t,n,a){0!==t.length&&t&&(e.rotate(T(360-n)),e.beginPath(),e.moveTo.apply(e,Object(x.a)(t[0])),t.forEach((function(t){var n=Object(v.a)(t,2),a=n[0],r=n[1];return e.lineTo(a,r)})),e.closePath(),a?e.stroke():e.fill())},N.drawLine=function(e,t,n,a){e.beginPath(),e.rotate(T(360-n)),e.moveTo.apply(e,Object(x.a)(t[0])),t.forEach((function(t){var n=Object(v.a)(t,2),a=n[0],r=n[1];return e.lineTo(a,r)})),e.lineWidth=a,e.stroke()},N.object.prototype.addShape=function(e){var t=new N[e.kind](e,this);return this.updateVisual(),t},N.app.prototype.addObject=function(e){return new N.object(e,this)},N.app.prototype.addStorage=function(e){return new N.storage(e,this)},N.app.prototype.removeObject=function(e){this.objects.splice(this.objects.indexOf(e),1)};var F=N,B="https://upload.wikimedia.org/wikipedia/commons/9/95/UNO_cards_deck.svg",J=function(){function e(t){var n=this;Object(w.a)(this,e),this.animatePlayerPlay=function(e){return n.animatePlay.apply(n,[e].concat(Object(x.a)(n.positionReference.playerDeck)))},this.animatePlayerDraw=function(){return n.animateDraw.apply(n,Object(x.a)(n.positionReference.playerDeck))},this.animateLeaderboardDraw=function(){return n.animateDraw.apply(n,Object(x.a)(n.positionReference.leaderBoard))},this.animateLeaderboardPlay=function(e){return n.animatePlay.apply(n,[e].concat(Object(x.a)(n.positionReference.leaderBoard)))},this.animateDraw=function(e,t){return new Promise((function(a){var r=n.createCard(null,!0);r.x=n.positionReference.drawDeck[0],r.y=n.positionReference.drawDeck[1],r.zIndex=-1,r.display=!0,r.addAnimation("x",e,500),r.addAnimation("y",t,500),r.shapes[0].addAnimation("scaleX",.2,500,a),r.shapes[0].addAnimation("scaleY",.2,500,(function(){return r.kill()}))}))},this.animatePlay=function(e,t,a){return new Promise((function(r){var i=n.createCard(e);i.shapes[0].scaleX=.2,i.shapes[0].scaleY=.2,i.x=t,i.y=a,i.display=!0,i.addAnimation("x",n.playDeck.x,500,(function(){n.playDeck.kill(),n.playDeck=i})),i.addAnimation("y",n.playDeck.y,500,r),i.shapes[0].addAnimation("scaleX",1,500),i.shapes[0].addAnimation("scaleY",1,500)}))},this.cardSpriteColumn=14,this.cardSpriteRow=8,this.cardSpriteReference={wild:[0,13],Draw4:[4,13],colorReference:["red","yellow","green","blue"],otherReference:["Skip","Reverse","Draw 2"]},this.app=new F.app(t),this.app.backgroundColor="white",this.app.pixelDensity=2,this.app.canvas.width=1700,this.app.canvas.height=1300,this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,zIndex:-10}).addShape({kind:"roundedRectangle",w:this.app.canvas.width,h:this.app.canvas.height,clip:!0,clipImageLink:"assets/wood.jpg"}),this.positionReference={leaderBoard:[1310,558],drawDeck:[430,558],playDeck:[this.app.canvas.width/2,558],playerDeck:[this.app.canvas.width/2,this.app.canvas.height-75]};var a=!1,r=function(){};this.drawDeck=this.createDeck("blue 2",430,558),this.drawDeck.flip(),this.drawDeck.pressedEvent((function(){a&&r()})),this.awaitDraw=function(){return new Promise((function(e){a=!0,r=e}))},this.cancelDraw=function(){return a=!1},this.createHand(),this.createLeaderboard(),this.drawAnnouncement(),this.configureStartGameMessage(),this.configureUnoMessage()}return Object(O.a)(e,[{key:"createLeaderboard",value:function(){var e=this.app.addStorage({x:1310,y:558,spacing:20,direction:"column"});e.addShape({kind:"roundedRectangle",w:240,h:300,borderRadius:20,color:"white",shadow:{color:"black",offsetX:5,offsetY:-5,blur:10},border:!0,borderWidth:5,borderColor:"black"}),e.addShape({kind:"text",font:"32px Times News Roman",text:"Turn Board:",y:-120});var t=e.addShape({x:170,kind:"poly",specialPolygon:!0,numberOfSide:3,color:"yellow",radius:20,rotation:180}),n=["green","red","darkyellow"];e.elementFunction=function(t,a){return e.addShape({kind:"text",font:"30px Times News Roman",color:n[a],text:t})},this.updateTurnIndicator=function(n){var a=e.shapes[n+2].y;t.addAnimation("y",a,200,(function(){var e=5,n=function(){--e<0||t.addAnimation("opacity",0,500,a)},a=function(){return t.addAnimation("opacity",1,500,n)};n()}))},this.updateLeaderboard=function(t){e.model=t,e.updateToModel()}}},{key:"createHand",value:function(){var e=this,t=function(){},n=function(){},a=!1,r=this.app.addStorage({spacing:-140,y:this.app.canvas.height-75,x:this.app.canvas.width/2,model:[]});r.addShape({kind:"rect",color:"brown",w:this.app.canvas.width,h:150}),r.elementFunction=function(i){var o=[];if("Wild"===i)o=e.cardSpriteReference.wild;else if("Draw 4"===i)o=e.cardSpriteReference.Draw4;else{var s=i.split(" ")[0],c=i.split(" ").slice(1).join(" ");o[0]=e.cardSpriteReference.colorReference.indexOf(s),parseInt(c)?o[1]=parseInt(c):o[1]=e.cardSpriteReference.otherReference.indexOf(c)+10}var u=r.addShape({y:30,clipSpriteSheetX:o[1],clipSpriteSheetY:o[0],spriteLengthX:e.cardSpriteColumn,spriteLengthY:e.cardSpriteRow,kind:"roundedRectangle",color:"white",w:246,h:349.2,clip:!0,clipImageLink:B,borderRadius:40,border:!0,borderWidth:2.5,borderColor:"black",shadow:{color:"black",blur:2.5,offsetX:3.5,offSetY:3.5}});return u.hoverEvent((function(){n(i)&&a&&(u.borderColor="yellow"),u.borderWidth=10,u.addAnimation("y",-100,200)}),(function(){u.borderColor="black",u.borderWidth=2.5,u.addAnimation("y",30,200)})),u.pressedEvent((function(){n(i)&&(a=!1,u.kill(),t(i))})),u},this.updateCards=function(e){r.model=e,r.updateToModel()},this.awaitSelection=function(e){return new Promise((function(r){n=e,t=r,a=!0}))},this.cancelSelection=function(){return a=!1}}},{key:"createDeck",value:function(e,t,n){var a={kind:"roundedRectangle",color:"white",w:205,h:291,borderRadius:40,border:!0,borderWidth:2.5,borderColor:"black"},r=this.app.addObject({x:t,y:n});r.addShape(Object(l.a)({x:12,y:-10},a)),r.addShape(Object(l.a)({x:8,y:-7.5},a)),r.addShape(Object(l.a)({x:6,y:-5},a)),r.addShape(Object(l.a)({x:3,y:-2.5},a));var i=this.createCard(e);return i.x=t,i.y=n,i.shapes[0].shadow=null,i.shapes[0].border=!1,i.display=!0,i.updateVisual(),i}},{key:"createCard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,display:!1});if(t)n.addShape({kind:"roundedRectangle",color:"white",w:205,h:291,clip:!0,clipImageLink:"assets/back.png",borderRadius:40,border:!0,borderWidth:2.5,borderColor:"black",shadow:{color:"black",blur:2.5,offsetX:3.5,offSetY:3.5}});else{var a=!1,r=[];if("Wild"===e)r=this.cardSpriteReference.wild;else if("Draw 4"===e)r=this.cardSpriteReference.Draw4;else{var i=e.split(" ")[0],o=e.split(" ").slice(1).join(" ");r[0]=this.cardSpriteReference.colorReference.indexOf(i),parseInt(o)?r[1]=parseInt(o):r[1]=this.cardSpriteReference.otherReference.indexOf(o)+10}var s=n.addShape({clipSpriteSheetX:r[1],clipSpriteSheetY:r[0],spriteLengthX:this.cardSpriteColumn,spriteLengthY:this.cardSpriteRow,kind:"roundedRectangle",color:"white",w:205,h:291,clip:!0,clipImageLink:B,borderRadius:40,border:!0,borderWidth:2.5,borderColor:"black",shadow:{color:"black",blur:2.5,offsetX:3.5,offSetY:3.5}}),c=function(){s.clipSpriteSheetX=null,s.changeClipImage("assets/back.png")},u=function(){s.clipSpriteSheetX=r[1],s.changeClipImage(B)},l=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(t){s.addAnimation("scaleX",0,100,(function(){e?c():u(),s.addAnimation("scaleX",1,100,t)}))}))};n.flip=function(){return l(a=!a)}}return n}},{key:"drawAnnouncement",value:function(){var e=this;this.announcementQueue=[],this.announcmentPerpetual=[],this.onAnnouncementPerpetual=!1,this.onAnnoucementChanged=!1,this.announcement=this.app.addObject({x:this.app.canvas.width/2,y:100,positionIndicator:!1}),this.annoucementText=this.announcement.addShape({kind:"text",font:"100px Times News Roman",color:"orange",text:"",display:!1}),this.announcement.addShape({kind:"roundedRectangle",w:this.app.canvas.width/2,h:200,display:!1});var t=function(t){return e.annoucementText.addAnimation("opacity",0,500,(function(){e.annoucementText.display=!1,t&&t()}))},n=function(n,a){return t((function(){n(),e.annoucementText.display=!0,function(t){e.annoucementText.addAnimation("opacity",1,500,t)}(a)}))};this.updateAnnouncement=function(){if(e.announcementQueue.length>0&&!e.announcementQueue[0][3]){var a=Object(v.a)(e.announcementQueue[0],3),r=a[0],i=a[1],o=a[2];n((function(){e.annoucementText.text=r,e.annoucementText.color=i,setTimeout((function(){e.announcementQueue.splice(0,1),e.updateAnnouncement()}),o+500)})),e.announcementQueue[0][3]=!0}else{if(e.announcementQueue.length>0)return;if(!e.onAnnouncementPerpetual&&e.annoucementText.display)return t();if(e.onAnnouncementPerpetual&&(!e.annoucementText.display||e.onAnnoucementChanged))return n((function(){var t=Object(v.a)(e.announcmentPerpetual,2),n=t[0],a=t[1];e.annoucementText.text=n,e.annoucementText.color=a}))}}}},{key:"changeAnnoucementPerpetual",value:function(e,t){this.announcmentPerpetual=[e,t],this.onAnnoucementChanged=!0,this.updateAnnouncement()}},{key:"addToAnnoucementQueue",value:function(e,t,n){this.announcementQueue.push([e,t,n,!1]),this.updateAnnouncement()}},{key:"configureUnoMessage",value:function(){var e=this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2}),t=e.addShape({kind:"img",spriteLink:"./assets/18.svg",scaleX:0,scaleY:0});e.display=!1,this.UNO=function(){e.display=!0,t.addAnimation("scaleX",1.5,400,(function(){setTimeout((function(){t.addAnimation("scaleX",0,100,(function(){return e.display=!1})),t.addAnimation("scaleY",0,100)}),500)})),t.addAnimation("scaleY",1.5,400)}}},{key:"configureStartGameMessage",value:function(){var e=this.app.addObject({x:this.app.canvas.width-150,y:this.app.canvas.height-60,display:!1}),t=e.addShape({kind:"text",text:"Start Game",color:"orange",font:"40px Times News Roman"});e.addShape({kind:"roundedRectangle",w:200,h:100,display:!1});var n=!1,a=function(){},r=function(){n?t.addAnimation("opacity",1,1e3,i):t.opacity=1},i=function(){n?t.addAnimation("opacity",0,1e3,r):t.opacity=1};e.pressedEvent((function(){n=!1,e.display=!1,a()})),this.initiateStartGameMessage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};n||(a=t,n=!0,e.display=!0,i())},this.turnOffStartGameMessage=function(){e.display=!1}}}]),e}(),G=n(96),U=(n(69),n(33)),_=function(){var e=Object(g.a)(b.a.mark((function e(t,n,a){var r,i,o,s,c,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new J(t),i=null,"/",o=G.connect("/",{query:{token:n}}),s=function(e){o.emit("Play Card",e)},c=function(){o.emit("Draw Card")},u=function(e){if("Wild"===e||"Draw 4"===e||"Wild"===i.currentTopCard||"Draw 4"===i.currentTopCard)return!0;var t=i.currentTopCard.split(" ")[0],n=i.currentTopCard.split(" ").slice(1).join(" "),a=e.split(" ")[0],r=e.split(" ").slice(1).join(" ");return t===a||n===r},o.on("Update",function(){var e=Object(g.a)(b.a.mark((function e(t){var n,l,h,d,p,f,m,x,w,O,k,j,I,S,E,M,R,C,A,T;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),n=i?U.cloneDeep(i):null,(i=t).inGame&&r.turnOffStartGameMessage(),parseInt(i.onTurn)==a?(r.awaitSelection(u).then((function(e){r.cancelDraw(),s(e)})),r.awaitDraw().then((function(){r.cancelSelection(),c()}))):(r.cancelDraw(),r.cancelSelection()),!n){e.next=100;break}if(console.info(n.onTurn,i.onTurn),parseInt(n.onTurn)!=parseInt(i.onTurn)&&r.updateTurnIndicator(parseInt(i.onTurn)),l=i.feed.slice(n.feed.length),h=i.directives.slice(n.directives.length),console.log(h),l.length&&l.forEach((function(e){return r.addToAnnoucementQueue(e,"black",1e3)})),!h.length){e.next=92;break}d=Object(y.a)(h),e.prev=14,d.s();case 16:if((p=d.n()).done){e.next=84;break}f=Object(v.a)(p.value,2),m=f[0],x=f[1],e.t0=m,e.next=1===e.t0?21:2===e.t0?30:3===e.t0?48:4===e.t0?66:5===e.t0?74:7===e.t0?76:81;break;case 21:if(x!==a){e.next=28;break}return e.next=24,r.animatePlayerDraw();case 24:w=i.players[a].cards.slice(n.players[a].cards.length)[0],u(w)?s(w):o.emit("Pass Turn"),e.next=29;break;case 28:r.animateLeaderboardDraw();case 29:return e.abrupt("break",82);case 30:if(x!==a){e.next=40;break}O=0;case 32:if(!(O<4)){e.next=38;break}return e.next=35,r.animatePlayerDraw();case 35:O++,e.next=32;break;case 38:e.next=47;break;case 40:k=0;case 41:if(!(k<4)){e.next=47;break}return e.next=44,r.animateLeaderboardDraw();case 44:k++,e.next=41;break;case 47:return e.abrupt("break",82);case 48:if(x!==a){e.next=58;break}j=0;case 50:if(!(j<2)){e.next=56;break}return e.next=53,r.animatePlayerDraw();case 53:j++,e.next=50;break;case 56:e.next=65;break;case 58:I=0;case 59:if(!(I<2)){e.next=65;break}return e.next=62,r.animateLeaderboardDraw();case 62:I++,e.next=59;break;case 65:return e.abrupt("break",82);case 66:if(x!==a){e.next=71;break}return e.next=69,r.animatePlayerPlay(i.currentTopCard);case 69:e.next=73;break;case 71:return e.next=73,r.animateLeaderboardPlay(i.currentTopCard);case 73:return e.abrupt("break",82);case 74:return r.UNO(),e.abrupt("break",82);case 76:return S=function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<4)){e.next=7;break}return e.next=4,r.animatePlayerDraw();case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<4)){e.next=7;break}return e.next=4,r.animateLeaderboardDraw();case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S(),E(),e.abrupt("break",82);case 81:return e.abrupt("break",82);case 82:e.next=16;break;case 84:e.next=89;break;case 86:e.prev=86,e.t1=e.catch(14),d.e(e.t1);case 89:return e.prev=89,d.f(),e.finish(89);case 92:M=i.players.map((function(e){return e.username})),R=n.players.map((function(e){return e.username})),JSON.stringify(M)!==JSON.stringify(R)&&r.updateLeaderboard(M),C=n.players[a].cards,A=i.players[a].cards,JSON.stringify(C)!==JSON.stringify(A)&&r.updateCards(i.players[a].cards),e.next=106;break;case 100:T=i.players.map((function(e){return e.username})),r.updateLeaderboard(T),r.updateCards(i.players[a].cards),i.onTurn>=0&&r.updateTurnIndicator(i.onTurn),r.playDeck=r.createDeck(i.currentTopCard,r.app.canvas.width/2,558),i.inGame||r.initiateStartGameMessage((function(){return o.emit("Start Game")}));case 106:case"end":return e.stop()}}),e,null,[[14,86,89,92]])})));return function(t){return e.apply(this,arguments)}}()),o.on("End Game",(function(e){r.addToAnnoucementQueue("".concat(i.players[e].username," had won the game"))})),o.on("Error",(function(e){return console.log(e)})),console.log=function(){};case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Q=n(80),q=Object(s.b)((function(e){return{token:e.token,playerid:e.playerid,id:e.id}}),(function(e){return{dispatch:e}}))((function(e){var t=e.token,n=e.playerid,i=e.id,o=e.dispatch,s=Object(a.useRef)();Object(a.useEffect)((function(){_(s.current,t,n)}),[]);var c="https://playunoonline.herokuapp.com/join/".concat(i);return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"d-flex game",style:{alignItems:"center",height:"100%",width:"100%",position:"absolute"}},r.a.createElement("canvas",{ref:s,className:"bg-primary",style:{width:850,height:650,margin:"auto"}})),r.a.createElement("div",{className:"test",style:{zIndex:1e4}},"Invite Link \u27a1\ufe0f: ",r.a.createElement("a",{href:c},c),r.a.createElement("div",{href:"/",className:"border rounded d-inline ml-2",style:{padding:"5px",cursor:"pointer",zIndex:1e3},onClick:function(e){e.preventDefault(),function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),Q.a.success("Copied!")}(c)}},"Copy"),r.a.createElement("a",{href:"/",onClick:function(e){e.preventDefault(),o({type:"LOG_OUT"})},className:"text-danger"},"Log Out")))})),z=n(40),H=n.n(z),K=n(30),$=n(78).join,Z=Object(s.b)((function(e){return{tempJoinId:e.tempJoinId}}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,n=(e.changeHistory,e.tempJoinId),i=Object(a.useState)(!1),o=Object(v.a)(i,2),s=o[0],c=o[1];Object(a.useEffect)((function(){n||t({type:"JOINED"})}),[]);var u=function(){var e=Object(g.a)(b.a.mark((function e(a){var r,i,o,s,u,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.username,c(!0),console.log(n),e.next=5,$(n,r);case 5:i=e.sent,o=i.data,s=o.token,u=o.id,l=o.playerid,console.log(o),t({type:"JOIN_LOG_IN",token:s,id:u,playerid:l}),c(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},!s&&r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Uno Online"),r.a.createElement("div",{className:"text-secondary"},"Created by Long Tran"),r.a.createElement("div",{className:"pt-5 pb-5 mt-5",style:{boxShadow:"0px 4px 16px rgba(31, 31, 31, 0.16)"}},r.a.createElement(K.b,{initialValues:{username:""},onSubmit:u},(function(e){var t=e.handleSubmit,n=e.handleChange,a=e.handleBlur;return r.a.createElement(K.a,null,r.a.createElement("div",{className:"container w-50"},r.a.createElement("label",{className:"font-weight-bold"},"Name:"),r.a.createElement("input",{type:"text",name:"username",className:"form-control",onChange:n,onBlur:a}),r.a.createElement("button",{className:"btn btn-success mt-4",onSubmit:t},"Join game")))})))),r.a.createElement("div",{style:{position:"absolute",top:"50%",width:"100%"}},r.a.createElement(H.a,{color:"blue",loading:s,width:"200px",css:{margin:"auto"}})))})),ee=n(78).create,te=Object(c.g)(Object(s.b)(null,(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,n=(e.history,Object(a.useState)(!1)),i=Object(v.a)(n,2),o=i[0],s=i[1],c=function(){var e=Object(g.a)(b.a.mark((function e(n){var a,r,i,o,c,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.username,s(!0),e.next=4,ee(a);case 4:r=e.sent,i=r.data,o=i.token,c=i.id,u=i.playerid,t({type:"LOG_IN",token:o,id:c,playerid:u}),s(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},!o&&r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Uno Online"),r.a.createElement("div",{className:"text-secondary"},"Created by Long Tran"),r.a.createElement("div",{className:"pt-5 pb-5 mt-5",style:{boxShadow:"0px 4px 16px rgba(31, 31, 31, 0.16)"}},r.a.createElement(K.b,{initialValues:{username:""},onSubmit:c},(function(e){var t=e.handleSubmit,n=e.handleChange,a=e.handleBlur;return r.a.createElement(K.a,null,r.a.createElement("div",{className:"container w-50"},r.a.createElement("label",{className:"font-weight-bold"},"Name:"),r.a.createElement("input",{type:"text",name:"username",className:"form-control",onChange:n,onBlur:a}),r.a.createElement("button",{className:"btn btn-success mt-4",onSubmit:t},"Create game")))})))),r.a.createElement("div",{style:{position:"absolute",top:"50%",width:"100%"}},r.a.createElement(H.a,{color:"blue",loading:o,width:"200px",css:{margin:"auto"}})))}))),ne=(n(151),Object(c.g)(Object(s.b)((function(e){return{loggedIn:e.loggedIn,joined:e.joined}}),(function(e){return{dispatch:e}}))((function(e){var t=e.loggedIn,n=e.dispatch,i=e.history,o=e.joined,s=Object(c.f)().pathname;return Object(a.useEffect)((function(){if(console.log("pathname",s),s.match(/join/)&&!o){n({type:"LOG_OUT"});var e=s.split("/")[2];console.log(e),n({type:"SET_TEMP_JOIN",tempJoinId:e}),i.push("/join")}else t?(console.log("hello"),s.match(/game/)||i.push("/game")):i.push("/")}),[t,o]),r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/game",exact:!0,component:q}),r.a.createElement(c.a,{path:"/join",exact:!0},r.a.createElement(Z,{changeHistory:i})),r.a.createElement(c.a,{path:"/",exact:!0,component:te}))}))));console.log=function(){};var ae=function(){return r.a.createElement(s.a,{store:f},r.a.createElement(u.a,null,r.a.createElement(ne,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},78:function(e,t,n){var a=n(69).create({baseURL:"/"});e.exports={join:function(e,t){return a.post("join",{id:e,username:t})},create:function(e){return a.post("create",{username:e})}}},84:function(e,t,n){e.exports=n(152)},89:function(e,t,n){},90:function(e,t,n){}},[[84,1,2]]]);
//# sourceMappingURL=main.1d406b33.chunk.js.map