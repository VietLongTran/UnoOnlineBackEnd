(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{127:function(e,t){},153:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(27),o=a.n(r),s=(a(90),a(91),a(19)),c=a(26),u=a(39),l=a(14),d=a(51).createStore,h=localStorage.getItem("token"),p={token:h,id:localStorage.getItem("id"),playerid:parseInt(localStorage.getItem("playerid")),tempJoinID:null,joined:!1,loggedIn:!!h},f=d((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,a=t.id,n=t.playerid,i=t.token,r=t.type,o=t.tempJoinId;switch(r){case"LOG_IN":return localStorage.setItem("token",i),localStorage.setItem("id",a),localStorage.setItem("playerid",n),Object(l.a)({},e,{id:a,playerid:n,token:i,loggedIn:!0});case"JOIN_LOG_IN":return localStorage.setItem("token",i),localStorage.setItem("id",a),localStorage.setItem("playerid",n),Object(l.a)({},e,{id:a,playerid:n,token:i,loggedIn:!0,joined:!0});case"LOG_OUT":return localStorage.removeItem("token"),localStorage.removeItem("id"),localStorage.removeItem("playerid"),Object(l.a)({},e,{id:null,token:null,playerid:null,loggedIn:!1});case"LOG_OUT_WITH_TEMP_JOIN":return localStorage.removeItem("token"),localStorage.removeItem("id"),localStorage.removeItem("playerid"),Object(l.a)({},e,{id:null,token:null,playerid:null,loggedIn:!1,tempJoinId:e.tempJoinId||o});case"SET_TEMP_JOIN":return console.log(o),Object(l.a)({},e,{tempJoinId:o});case"JOINED":return Object(l.a)({},e,{joined:!0});default:return Object(l.a)({},e)}})),m=a(7),b=a.n(m),v=a(1),y=a(6),g=a(16),x=a(4),w=a(9),k=a(10),O=a(17),j=a(23),I=a(22),S=a(33),E=a.n(S),A=function(e,t,a){for(var n in t)"object"==typeof e?"function"===typeof e[n]?a[n]=e[n]:"undefined"!=typeof e[n]?a[n]=E.a.cloneDeep(e[n]):a[n]=E.a.cloneDeep(t[n]):a[n]=E.a.cloneDeep(t[n])},R=function(e,t,a,n){return Math.sqrt(Math.pow(e-a,2)+Math.pow(t-n,2))},C=function(e,t,a,n){if(e===a&&t===n)return 0;if(e===a){if(t<n)return 270;if(t>n)return 90}if(t===n){if(e<a)return 0;if(a<e)return 180}var i=a-e,r=n-t,o=Math.atan(-r/i);return e<a&&t>n?M(o):e>a&&t>n||e>a&&t<n?180+M(o):e<a&&t<n?360+M(o):void 0},M=function(e){return 180*e/Math.PI},T=function(e){return e*Math.PI/180},L=function(e,t,a,n,i){return 0===i||360===i?[a,n]:D(e,t,C(e,t,a,n)+i,R(e,t,a,n))},D=function(e,t,a,n){var i=T(a),r=[0,90,180,270,360];if(-1!==r.indexOf(a)){var o=[[1,0],[0,1],[-1,0],[0,-1],[1,0]][r.indexOf(a)];return[e+o[0]*n,t-o[1]*n]}return[e+Math.cos(i)*n,t-Math.sin(i)*n]},X=function(e,t){var a=Object(v.a)(e,4),n=a[0],i=a[1],r=a[2],o=a[3],s=Object(v.a)(t,4),c=s[0],u=s[1],l=s[2],d=s[3];if(Math.round(n)===Math.round(r)||Math.round(c)===Math.round(l)){var h=L(0,0,n,i,30),p=Object(v.a)(h,2);n=p[0],i=p[1];var f=L(0,0,r,o,30),m=Object(v.a)(f,2);r=m[0],o=m[1];var b=L(0,0,c,u,30),y=Object(v.a)(b,2);c=y[0],u=y[1];var g=L(0,0,l,d,30),x=Object(v.a)(g,2);l=x[0],d=x[1]}var w=Math.min(n,r),k=Math.max(n,r),O=Math.min(c,l),j=Math.max(c,l),I=(i-o)/(n-r),S=(u-d)/(c-l),E=-n*I+i;if(I===S)return!1;var A=(-c*S+u-E)/(I-S);return A>w&&A<k&&A>O&&A<j&&[A,I*A+E]},Y=function(e,t,a){var n=Object(v.a)(a,4),i=n[0],r=n[1],o=n[2],s=n[3],c=function(e,t,a,n,i,r){return Math.abs(C(e,t,i,r)-C(e,t,a,n))}(i,r,e,t,o,s),u=R(e,t,i,r),l=Math.abs(u*Math.cos(T(c))),d=Math.sqrt(Math.pow(u,2)-Math.pow(l,2));return!(l>R(i,r,o,s))&&(c=T(C(i,r,o,s)),[i+Math.cos(c)*l,r-Math.sin(c)*l,d])},P=function(e,t,a){var n=e.split("."),i=t;n.forEach((function(e,t){t===n.length-1?Array.isArray(i)?i[parseInt(e)]=a:i[e]=a:i=Array.isArray(i)?i[parseInt(e)]:i[e]}))},W=function(e,t){var a=e.split("."),n=t;return a.forEach((function(e){n=Array.isArray(n)?n[parseInt(e)]:t[e]})),n},B={inputReference:{}};B.inputReference.movementIndex=["w","a","s","d","ArrowUp","ArrowLeft","ArrowDown","ArrowRight"],B.inputReference.coeffIndex=[[0,-1],[-1,0],[0,1],[1,0],[0,-1],[-1,0],[0,1],[1,0]],B.defaultAppConfig={initFunctions:["visualInit","mouseInputInit"],animateFunctions:["animate","update","render"],lastFrame:void 0,constantRender:!0,background:"black",pixelDensity:1},B.defaultObjectProps={shapes:[],animations:[],hoverEvents:[],animationCount:0,initFunctions:["createPreloader"],static:!0,x:0,y:0,rotation:0,positionIndicator:!1,display:!0,opacity:1,mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[],zIndex:0},B.defaultStorageProps={spacing:0,direction:"row",model:[]},B.defaultShapeOptions={kind:"rect",animations:[],hoverEvents:[],animationCount:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,color:"black",display:!0,lineWidth:1,opacity:1,borderColor:"yellow",borderWidth:10,border:!1,borderOnly:!1,shadow:null,mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[]},B.defaultRectOptions={w:0,h:0,clip:!1,clipImageLink:null,clipCanvas:null,clipSpriteSheetX:null,clipSpriteSheetY:null,spriteLengthX:null,spriteLengthY:null},B.defaultArcOptions={rad:0,arcDegree:360},B.defaultTextOptions={textAlign:"left",font:"10px Ariel",text:"Hello World"},B.defaultImgOptions={spriteLink:null,drawWidth:null,drawHeight:null,loadedFunction:void 0},B.defaultPolyOptions={points:[],specialPolygon:!1,numberOfSide:0,radius:10,clip:!1,clipImageLink:null},B.defaultLineOptions={points:[]},B.apps=[],B.gameloop={list:[],frameTime:void 0,lastFrame:void 0},B.gameloop.loop=function(e){requestAnimationFrame(B.gameloop.loop);for(var t=0;t<B.gameloop.list.length;t++)B.gameloop.list[t](B.apps[t]);void 0!==e&&(B.lastFrame=B.frameTime,B.frameTime=e)},B.gameloop.loop(),B.app=function(e,t){var a=this;this.options={},A(t,B.defaultAppConfig,this.options),this.canvas=e,this.options.initFunctions.forEach((function(e){return a[e]()})),this.objects=[],this.index=B.gameloop.list.length,B.gameloop.list.push(this.options.constantRender?this.turnFunctions:function(){}),B.apps.push(this)},B.app.prototype.turnFunctions=function(e){e.options.animateFunctions.forEach((function(t){return e[t]()}))},B.app.prototype.kill=function(){this.objects.forEach((function(e){e.shapes.forEach((function(e){return e.kill()})),e.kill()})),this.killed=!0,B.gameloop.list.splice(this.index,1),B.apps.splice(this.index,1)},B.app.prototype.update=function(){this.objects.forEach((function(e){"function"===typeof e.update&&e.update(e)}))},B.app.prototype.translateMouseCoor=function(e){var t,a;return e.pageX||e.pageY?(t=e.pageX,a=e.pageY):(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),t-=this.canvas.offsetLeft,a-=this.canvas.offsetTop,[t*this.pixelDensity,a*this.pixelDensity]},B.objectCount=0,B.object=function(){function e(t,a){var n=this;Object(w.a)(this,e),B.objectCount++,this.id=B.objectCount,this.parent=a,this.parent.objects.push(this),A(t,B.defaultObjectProps,this),this.initFunctions.forEach((function(e){return n[e]()})),this.name=t.objectName?t.objectName:"Object ".concat(this.id)}return Object(k.a)(e,[{key:"kill",value:function(){this.parent.objects.splice(this.parent.objects.indexOf(this),1)}},{key:"collide",value:function(e){var t,a=Object(y.a)(this.shapes);try{for(a.s();!(t=a.n()).done;){var n,i=t.value,r=Object(y.a)(e.shapes);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(i.collide(o))return!0}}catch(s){r.e(s)}finally{r.f()}}}catch(s){a.e(s)}finally{a.f()}return!1}},{key:"pointInObject",value:function(e,t){var a,n=Object(y.a)(this.shapes);try{for(n.s();!(a=n.n()).done;){if(a.value.pointInShape(e,t))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"findMax",value:function(){var e=[],t=[];return this.shapes.forEach((function(a){var n=a.findMax(),i=Object(v.a)(n,4),r=i[0],o=i[1],s=i[2],c=i[3];e=[].concat(Object(x.a)(e),[r,o]),t=[].concat(Object(x.a)(t),[s,c])})),[Math.min.apply(Math,Object(x.a)(e)),Math.max.apply(Math,Object(x.a)(e)),Math.min.apply(Math,Object(x.a)(t)),Math.max.apply(Math,Object(x.a)(t))]}},{key:"findThePositionThatIsRelativeToThisObjectFromAbsolutePosition",value:function(e,t){return[e-this.x,t-this.y]}}]),e}(),B.storage=function(e){Object(j.a)(a,e);var t=Object(I.a)(a);function a(e,n){var i;return Object(w.a)(this,a),i=t.call(this,e,n),A(e,B.defaultStorageProps,Object(O.a)(i)),i.storageShapes=[],i.model=e.model||[],i.elementFunction=e.elementFunction||null,i.updateToModel(),i}return Object(k.a)(a,[{key:"updateToModel",value:function(){var e=this,t=Object(x.a)(this.model);if(this.storageShapes.forEach((function(e){e.kill()})),this.storageShapes=[],t.length&&this.elementFunction){var a;switch(this.direction){case"row-reverse":t.reverse();case"row":var n=(a=this.elementFunction(t[0],0)).width;a.kill();var i=-(n*t.length+this.spacing*(t.length-1))/2+.5*n;t.forEach((function(t,a){var r=e.elementFunction(t,a);e.storageShapes.push(r),r.x=i+a*n+a*e.spacing}));break;case"column-reverse":t.reverse();case"column":var r=(a=this.elementFunction(t[0],0)).height;a.kill();var o=-(r*t.length+this.spacing*(t.length-1))/2+.5*r;t.forEach((function(t,a){var n=e.elementFunction(t,a);e.storageShapes.push(n),n.y=o+a*r+a*e.spacing}))}this.updateVisual()}}}]),a}(B.object),B.spriteLinkReference=[],B.spriteImageReference=[],B.funcLists=[],B.sprite=function(e,t){var a=B.spriteLinkReference.indexOf(e);if(-1!==a){var n=B.spriteImageReference[a];return B.funcLists[a].push(t),n.complete&&requestAnimationFrame(t),n}var i=new Image,r=B.spriteImageReference.length;return i.onload=function(){B.funcLists[r].forEach((function(e){return e()}))},B.funcLists[r]=[],B.funcLists[r].push(t),i.src=e,B.spriteLinkReference.push(e),B.spriteImageReference.push(i),i},B.sound=function(){function e(t,a){var n=this;Object(w.a)(this,e),this.elem=document.createElement("audio"),this.elem.oncanplaythrough=function(){n.loaded=!0,n.updateQueue()},this.elem.loop=a,this.elem.volume=.2,this.elem.src=t,this.elem.setAttribute("preload","auto"),this.elem.setAttribute("controls","none"),this.elem.style.display="none",document.body.appendChild(this.elem),this.queue=1,this.running=!1,this.loaded=!1}return Object(k.a)(e,[{key:"updateQueue",value:function(){var e=this;!this.running&&this.queue&&this.loaded&&!B.mute&&(this.running=!0,this.elem.play(),setTimeout((function(){e.running=!1,e.updateQueue()}),this.elem.duration+300),this.queue--)}},{key:"addToQueue",value:function(){this.queue++,this.updateQueue()}}]),e}(),B.audioReference=[],B.audioLinkReference=[],B.playSound=function(e,t){if(B.audioLinkReference.indexOf(e)<0){var a=new B.sound(e,t);B.audioReference.push(a),B.audioLinkReference.push(a)}else B.audioReference[B.audioLinkReference.indexOf(e)].addToQueue()},B.stopAll=function(){Array.from(document.getElementsByTagName("audio")).forEach((function(e){e.pause()}))},B.muteAll=function(){B.mute=!0,B.stopAll(),Array.from(document.getElementsByTagName("audio")).forEach((function(e){return e.mute=!0}))},B.unmuteAll=function(){B.mute=!1,B.stopAll(),Array.from(document.getElementsByTagName("audio")).forEach((function(e){return e.mute=!1})),B.audioReference.forEach((function(e){e.elem.loop&&e.addToQueue()}))},B.shape=function(){function e(t,a){Object(w.a)(this,e),this.kind=t.kind,this.parent=a,this.parent.shapes.push(this),A(t,B.defaultShapeOptions,this)}return Object(k.a)(e,[{key:"kill",value:function(){var e=this.parent.shapes.indexOf(this);e<0||(this.parent.shapes.splice(e,1),this.parent.updateVisual())}},{key:"findVertex",value:function(){return[]}},{key:"findMax",value:function(){var e=this.findVertex(),t=[],a=[];e.forEach((function(e){var n=Object(v.a)(e,2),i=n[0],r=n[1];t.push(i),a.push(r)}));var n=-this.borderWidthIfBorderIsOn,i=this.borderWidthIfBorderIsOn,r=-this.borderWidthIfBorderIsOn,o=this.borderWidthIfBorderIsOn;if(this.shadow){var s=-this.shadow.blur-2,c=this.shadow.blur+2,u=-this.shadow.blur-2,l=this.shadow.blur+2;this.shadow.offsetX&&(s+=this.shadow.offsetX,c+=this.shadow.offsetX),this.shadow.offsetY&&(u+=this.shadow.offsetY,l+=this.shadow.offsetY),s<0&&(n+=s),c>0&&(i+=c),u<0&&(r+=u),l>0&&(o+=l)}return[Math.min.apply(Math,t)+n,Math.max.apply(Math,t)+i,Math.min.apply(Math,a)+r,Math.max.apply(Math,a)+o]}},{key:"pointInShape",value:function(e,t){var a=this.findSides(),n=this.findMax(),i=Object(v.a)(n,4),r=i[0],o=i[1],s=i[2],c=i[3],u=[e,t,e+R(e,t,o,c),t],l=0;return!(e>o||e<r||t>c||t<s)&&(a.forEach((function(e){X(e,u)&&l++})),!(l%2===0))}},{key:"findSides",value:function(){for(var e=this.findVertex(),t=[],a=0;a<e.length;a++)t.push([].concat(Object(x.a)(e[a]),Object(x.a)(e[a+1]?e[a+1]:e[0])));return t}},{key:"collide",value:function(e){if("arc"===e.kind)return e.collide(this);var t=this.findMax(),a=Object(v.a)(t,4),n=a[0],i=a[1],r=a[2],o=a[3],s=e.findMax(),c=Object(v.a)(s,4),u=c[0],l=c[1],d=c[2],h=c[3];if(i<l&&n>u&&o<h&&r>d||l<i&&u>n&&h<o&&d>r)return!0;var p,f=this.findSides(),m=e.findSides(),b=Object(y.a)(f);try{for(b.s();!(p=b.n()).done;){var g,x=p.value,w=Object(y.a)(m);try{for(w.s();!(g=w.n()).done;){var k=g.value;if(X(x,k))return!0}}catch(O){w.e(O)}finally{w.f()}}}catch(O){b.e(O)}finally{b.f()}return!1}},{key:"absoluteX",get:function(){return this.x+this.parent.x}},{key:"absoluteY",get:function(){return this.y+this.parent.y}},{key:"hasBorder",get:function(){return this.border||this.borderOnly}},{key:"width",get:function(){return(this.hasBorder?this.w+this.borderWidth:this.w)*this.scaleX}},{key:"height",get:function(){return(this.hasBorder?this.h+this.borderWidth:this.h)*this.scaleY}},{key:"outOfBound",get:function(){var e=this.findMax(),t=Object(v.a)(e,4),a=t[0],n=t[1],i=t[2],r=t[3],o=this.parent.parent.canvas,s=o.width,c=o.height;return a>s||n<0||i>c||r<0}},{key:"borderWidthIfBorderIsOn",get:function(){return this.border||this.borderOnly?this.borderWidth:0}}]),e}(),B.rect=function(e){Object(j.a)(a,e);var t=Object(I.a)(a);function a(e,n){var i;return Object(w.a)(this,a),i=t.call(this,e,n),A(e,B.defaultRectOptions,Object(O.a)(i)),i}return Object(k.a)(a,[{key:"findVertex",value:function(){var e=this,t=[];return[[1,-1],[-1,-1],[-1,1],[1,1]].forEach((function(a){var n=Object(v.a)(a,2),i=n[0],r=n[1],o=e.absoluteX+.5*e.width*i,s=e.absoluteY+.5*e.height*r;t.push(L(e.absoluteX,e.absoluteY,o,s,e.rotation))})),t}}]),a}(B.shape),B.arc=function(e){Object(j.a)(a,e);var t=Object(I.a)(a);function a(e,n){var i;return Object(w.a)(this,a),i=t.call(this,e,n),A(e,B.defaultArcOptions,Object(O.a)(i)),i}return Object(k.a)(a,[{key:"pointInShape",value:function(e,t){var a=C(this.absoluteX,this.absoluteY,e,t);return a>this.minAngle&&a<this.maxAngle&&R(this.absoluteX,this.absoluteY,e,t)<=this.radius}},{key:"findMax",value:function(){var e=[this.absoluteX-this.radius,this.absoluteX+this.radius,this.absoluteY-this.radius,this.absoluteY+this.radius],t=[this.absoluteX,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius],a=[this.absoluteY,this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius];return this.pointInShape(e[0],this.absoluteY)||(e[0]=Math.min.apply(Math,t)-this.borderWidthIfBorderIsOn/2),this.pointInShape(e[1],this.absoluteY)||(e[1]=Math.max.apply(Math,t)+this.borderWidthIfBorderIsOn/2),this.pointInShape(this.absoluteX,e[2])||(e[2]=Math.min.apply(Math,a)-this.borderWidthIfBorderIsOn/2),this.pointInShape(this.absoluteX,e[3])||(e[3]=Math.max.apply(Math,a)+this.borderWidthIfBorderIsOn/2),e}},{key:"findVertex",value:function(){var e=this.findMax(),t=Object(v.a)(e,4),a=t[0],n=t[1],i=t[2],r=t[3],o=[this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteX+this.radius,this.absoluteX-this.radius,this.absoluteX],s=[this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius,this.absoluteY+this.radius,this.absoluteY-this.radius,this.absoluteY];return[[a,s[o.indexOf(a)]],[n,s[o.indexOf(n)]],[o[s.indexOf(i)],i],[o[s.indexOf(r)],r]]}},{key:"fidnSides",value:function(){return 360!==this.arcDegree&&[[this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.minRadAngle)*this.radius],[this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius]]}},{key:"collide",value:function(e){var t,a=this.findVertex(),n=e.findVertex(),i=Object(y.a)(a);try{for(i.s();!(t=i.n()).done;){var r=Object(v.a)(t.value,2),o=r[0],s=r[1];if(e.pointInShape(o,s))return!0}}catch(k){i.e(k)}finally{i.f()}var c,u=Object(y.a)(n);try{for(u.s();!(c=u.n()).done;){var l=Object(v.a)(c.value,2),d=l[0],h=l[1];if(this.pointInShape(d,h))return!0}}catch(k){u.e(k)}finally{u.f()}if("arc"===e.kind){if(this.pureCircle&&e.pureCircle)return R(this.absoluteX,this.absoluteY,e.absoluteX,e.absoluteY)<=this.radius+e.radius;if(R(this.absoluteX,this.absoluteY,e.absoluteX,e.absoluteY)>this.radius+e.radius)return!1;var p=C(this.absoluteX,this.absoluteY,e.absoluteX,e.absoluteY),f=C(e.absoluteX,e.absoluteY,this.absoluteX,this.absoluteY);return p<this.maxAngle&&p>this.minAngle&&f<e.maxAngle&&f>e.minAngle}var m,b=e.findSides(),g=Object(y.a)(b);try{for(g.s();!(m=g.n()).done;){var x=m.value,w=Y(this.absoluteX,this.absoluteY,x);if(w&&this.pointInShape(w[0],w[1]))return!0}}catch(k){g.e(k)}finally{g.f()}return!1}},{key:"radius",get:function(){return this.hasBorder?this.rad+this.borderWidth:this.rad}},{key:"minAngle",get:function(){return this.rotation}},{key:"maxAngle",get:function(){return this.rotation+this.arcDegree}},{key:"minRadAngle",get:function(){return T(this.minAngle)}},{key:"maxRadAngle",get:function(){return T(this.maxAngle)}},{key:"pureCircle",get:function(){return 360===this.arcDegree}}]),a}(B.shape),B.roundedRectangle=function(e){Object(j.a)(a,e);var t=Object(I.a)(a);function a(e,n){var i;return Object(w.a)(this,a),(i=t.call(this,e,n)).borderRadius=e.borderRadius||0,i.clip&&(e.clipCanvas?(i.clipImage=e.clipCanvas,i.clipCanvas=!0):i.clipImage=B.sprite(i.clipImageLink,(function(){i.parent.updateVisual()}))),i}return Object(k.a)(a,[{key:"changeClipImage",value:function(e){var t=this;this.clipImage=B.sprite(e,(function(){t.parent.updateVisual()}))}},{key:"clipImageLoaded",get:function(){return!!this.clip&&(!!this.clipCanvas||this.clipImage.complete)}}]),a}(B.rect),B.poly=function(e){Object(j.a)(a,e);var t=Object(I.a)(a);function a(e,n){var i;return Object(w.a)(this,a),i=t.call(this,e,n),A(e,B.defaultPolyOptions,Object(O.a)(i)),i.clip&&(i.clipImage=B.sprite(i.clipImageLink,(function(){i.parent.updateVisual()}))),i}return Object(k.a)(a,[{key:"findVertex",value:function(){var e=this;return this.polyPoints.map((function(t){var a=Object(v.a)(t,2),n=a[0],i=a[1];return L(e.absoluteX,e.absoluteY,n+e.absoluteX,i+e.absoluteY,e.rotation)}))}},{key:"clipImageLoaded",get:function(){return!!this.clip&&this.clipImage.complete}},{key:"polyPoints",get:function(){if(!this.specialPolygon)return this.points;for(var e=360/this.numberOfSide,t=[],a=0;a<this.numberOfSide;a++)t.push(D(0,0,e*a,this.radius));return t}},{key:"width",get:function(){return this.findMax()[1]-this.findMax()[0]}},{key:"height",get:function(){return this.findMax()[3]-this.findMax()[2]}},{key:"sideLength",get:function(){if(!this.specialPolygon)return null;var e=T(360/this.numberOfSide);return Math.sqrt(2*Math.pow(this.radius,2)-2*Math.pow(this.radius,2)*Math.cos(e))}}]),a}(B.shape),B.line=function(e){Object(j.a)(a,e);var t=Object(I.a)(a);function a(e,n){var i;return Object(w.a)(this,a),i=t.call(this,e,n),A(e,B.defaultLineOptions,Object(O.a)(i)),i}return Object(k.a)(a,[{key:"findVertex",value:function(){var e=this,t=[],a=function(e){var a,n=Object(v.a)(e,2),i=n[0],r=n[1],o=Object(y.a)(t);try{for(o.s();!(a=o.n()).done;){var s=a.value,c=Object(v.a)(s,2),u=c[0],l=c[1];if(~~(i+.5)===~~(u+.5)&&~~(r+.5)===~~(l+.5))return!1}}catch(d){o.e(d)}finally{o.f()}return!0},n=Object(x.a)(this.rotatedPoints);return n.forEach((function(i,r){var o=Object(v.a)(i,2),s=o[0],c=o[1];if(r!==n.length-1){var u=Object(v.a)(e.rotatedPoints[r+1],2),l=u[0],d=u[1],h=R(s,c,l,d),p=Math.atan(e.lineWidth/2/h),f=C(s,c,l,d),m=M(p)+f,b=Math.sqrt(h*h+.5*e.lineWidth*(.5*e.lineWidth)),y=D(s,c,m,b),g=D.apply(void 0,Object(x.a)(y).concat([180+f,h])),w=D.apply(void 0,Object(x.a)(g).concat([270+f,h])),k=D.apply(void 0,Object(x.a)(w).concat([f,h]));a(k)&&t.push(k),a(y)&&t.push(y),a(g)&&t.push(g),a(w)&&t.push(w)}})),t}},{key:"rotatedPoints",get:function(){var e=this;return this.points.map((function(t){var a=Object(v.a)(t,2),n=a[0],i=a[1];return L(e.absoluteX,e.absoluteY,n+e.absoluteX,i+e.absoluteY,e.rotation)}))}}]),a}(B.shape),B.text=function(e){Object(j.a)(a,e);var t=Object(I.a)(a);function a(e,n){var i;return Object(w.a)(this,a),i=t.call(this,e,n),A(e,B.defaultTextOptions,Object(O.a)(i)),i}return Object(k.a)(a,[{key:"findVertex",value:function(){var e=this,t=[];return[[1,-1],[-1,-1],[-1,.5],[1,.5]].forEach((function(a){var n=Object(v.a)(a,2),i=n[0],r=n[1],o=e.absoluteX+.5*e.width*i,s=e.absoluteY+.5*e.height*r;t.push(L(e.absoluteX,e.absoluteY,o,s,e.rotation))})),t}},{key:"textSize",get:function(){var e=B.apps[0].context;e.save(),e.font=this.font;var t=e.measureText(this.text).width,a=e.measureText("gM").width;return e.restore(),[t,a]}},{key:"w",get:function(){return this.textSize[0]+this.borderWidthIfBorderIsOn}},{key:"h",get:function(){return this.textSize[1]+this.borderWidthIfBorderIsOn}}]),a}(B.shape),B.img=function(e){Object(j.a)(a,e);var t=Object(I.a)(a);function a(e,n){var i;return Object(w.a)(this,a),i=t.call(this,e,n),A(e,B.defaultImgOptions,Object(O.a)(i)),i.sprite=B.sprite(i.spriteLink,(function(){i.loadedFunction&&i.loadedFunction(),i.parent.updateVisual()})),i}return Object(k.a)(a,[{key:"findVertex",value:function(){var e=this,t=[];return[[1,-1],[-1,-1],[-1,1],[1,1]].forEach((function(a){var n=Object(v.a)(a,2),i=n[0],r=n[1],o=e.absoluteX+.5*e.width*i,s=e.absoluteY+.5*e.height*r;t.push(L(e.absoluteX,e.absoluteY,o,s,e.rotation))})),t}},{key:"imageLoaded",get:function(){return this.sprite.complete}},{key:"w",get:function(){return this.drawWidth?this.drawWidth:this.imageLoaded?this.drawHeight?this.drawHeight*this.sprite.width/this.sprite.height:this.sprite.width:0}},{key:"h",get:function(){return this.drawHeight?this.drawHeight:this.imageLoaded?this.drawWidth?this.drawWidth*this.sprite.height/this.sprite.width:this.sprite.height:0}}]),a}(B.shape),B.object.prototype.attachQuickMovement=function(e,t,a){var n=!0,i=this;document.addEventListener("keydown",(function(r){n&&-1!==B.inputReference.movementIndex.indexOf(r.key)&&(i.x+=B.inputReference.coeffIndex[B.inputReference.movementIndex.indexOf(r.key)][0]*e,i.y+=B.inputReference.coeffIndex[B.inputReference.movementIndex.indexOf(r.key)][1]*e,i.updateVisual(),a&&a(r,i),n=!1,setTimeout((function(){n=!0}),t))}))},B.app.prototype.startCursor=function(){this.canvas.style.cursor="pointer"},B.app.prototype.endCursor=function(){this.canvas.style.cursor="default"},B.object.prototype.enterCursorEvent=function(){var e=this;this.alreadyCursorEvent||(this.alreadyCursorEvent=!0,this.hoverEvent((function(){return e.parent.startCursor()}),(function(){return e.parent.endCursor()})))},B.shape.prototype.enterCursorEvent=function(){var e=this;this.alreadyCursorEvent||(this.alreadyCursorEvent=!0,this.hoverEvent((function(){return e.parent.parent.startCursor()}),(function(){return e.parent.parent.endCursor()})))},B.app.prototype.mouseInputInit=function(){var e=this,t=function(t,a){if(!e.killed){var n=e.translateMouseCoor(t),i=Object(v.a)(n,2),r=i[0],o=i[1];if(0!==e.objects.length){for(var s=e.objects.length;s--;s>=0){var c=e.objects[s];if(0!==c[a].length&&(c.display&&c.pointInObject(r,o))){var u,l=Object(y.a)(c[a]);try{for(l.s();!(u=l.n()).done;){(0,u.value)(r,o)}}catch(g){l.e(g)}finally{l.f()}break}}e:for(var d=e.objects.length;d--;d>=0){var h=e.objects[d];if(0!==h.shapes.length&&h.display)for(var p=h.shapes.length;p--;p>=0){var f=h.shapes[p];if(0!==f[a].length&&(f.display&&f.pointInShape(r,o))){var m,b=Object(y.a)(f[a]);try{for(b.s();!(m=b.n()).done;){(0,m.value)(r,o)}}catch(g){b.e(g)}finally{b.f()}break e}}}}}};this.canvas.addEventListener("mouseup",(function(e){return t(e,"mouseUpEvent")})),this.canvas.addEventListener("mousemove",(function(e){return t(e,"mouseMoveEvent")})),this.canvas.addEventListener("mousedown",(function(e){return t(e,"mouseDownEvent")}))},B.object.prototype.pressedEvent=function(e){this.enterCursorEvent(),this.mouseUpEvent.push(e)},B.object.prototype.makeDraggable=function(e,t){var a=this;this.enterCursorEvent(),this.onDrag=!1;var n=this;this.draggable=!0;var i=0,r=0;this.mouseDownEvent.push((function(e,t){n.draggable&&(n.onDrag||(n.onDrag=!0,i=e-n.x,r=t-n.y))})),document.addEventListener("mousemove",(function(t){var o=a.parent.translateMouseCoor(t);(o[0]<0||o[0]>a.parent.canvas.width||o[1]<0||o[1]>a.parent.canvas.height)&&(n.onDrag=!1),n.onDrag&&(n.x=o[0]-i,n.y=o[1]-r,n.updateVisual(),"function"==typeof e&&e(n))})),this.parent.canvas.addEventListener("mouseup",(function(e){n.onDrag&&(n.onDrag=!1,t&&t())}))},B.object.prototype.hoverEvent=function(e,t){var a=this;this.mouseIn=!1;var n=this;this.hoverEvents.push([e,t]),1===this.hoverEvents.length&&(this.enterCursorEvent(),document.addEventListener("mousemove",(function(e){var t=a.parent.translateMouseCoor(e);if(t[0]<0||t[0]>a.parent.canvas.width||t[1]<0||t[1]>a.parent.canvas.height){n.mouseIn=!1;var i,r=Object(y.a)(a.hoverEvents);try{for(r.s();!(i=r.n()).done;){var o=i.value;o[1]&&o[1]()}}catch(d){r.e(d)}finally{r.f()}n.updateVisual()}else{var s=n.pointInObject(t[0],t[1]);if(n.mouseIn&&!s){n.mouseIn=!1;var c,u=Object(y.a)(a.hoverEvents);try{for(u.s();!(c=u.n()).done;){var l=c.value;l[1]&&l[1]()}}catch(d){u.e(d)}finally{u.f()}n.updateVisual()}}})),this.mouseMoveEvent.push((function(){if(!n.mouseIn){n.mouseIn=!0;var e,t=Object(y.a)(a.hoverEvents);try{for(t.s();!(e=t.n()).done;){var i=e.value;i[0]&&i[0]()}}catch(r){t.e(r)}finally{t.f()}n.updateVisual()}})))},B.object.prototype.attachQuickMovement=function(e,t,a){var n=!0,i=this;document.addEventListener("keydown",(function(r){n&&-1!==B.inputReference.movementIndex.indexOf(r.key)&&(i.x+=B.inputReference.coeffIndex[B.inputReference.movementIndex.indexOf(r.key)][0]*e,i.y+=B.inputReference.coeffIndex[B.inputReference.movementIndex.indexOf(r.key)][1]*e,i.updateVisual(),a&&a(r,i),n=!1,setTimeout((function(){n=!0}),t))}))},B.shape.prototype.pressedEvent=function(e){this.enterCursorEvent(),this.mouseUpEvent.push(e)},B.shape.prototype.hoverEvent=function(e,t){var a=this;this.mouseIn=!1;var n=this;this.hoverEvents.push([e,t]),1===this.hoverEvents.length&&(this.enterCursorEvent(),document.addEventListener("mousemove",(function(e){if(a.display){var t=a.parent.parent.translateMouseCoor(e);if(t[0]<0||t[0]>a.parent.parent.canvas.width||t[1]<0||t[1]>a.parent.parent.canvas.height){n.mouseIn=!1;var i,r=Object(y.a)(a.hoverEvents);try{for(r.s();!(i=r.n()).done;){var o=i.value;o[1]&&o[1]()}}catch(d){r.e(d)}finally{r.f()}n.parent.updateVisual()}else{var s=n.pointInShape(t[0],t[1]);if(n.mouseIn&&!s){n.mouseIn=!1;var c,u=Object(y.a)(a.hoverEvents);try{for(u.s();!(c=u.n()).done;){var l=c.value;l[1]&&l[1]()}}catch(d){u.e(d)}finally{u.f()}n.parent.updateVisual()}}}})),this.mouseMoveEvent.push((function(){if(!n.mouseIn){n.mouseIn=!0;var e,t=Object(y.a)(a.hoverEvents);try{for(t.s();!(e=t.n()).done;){var i=e.value;i[0]&&i[0]()}}catch(r){t.e(r)}finally{t.f()}n.parent.updateVisual()}})))},B.app.prototype.animate=function(){if(void 0!==B.frameTime&&void 0!==B.lastFrame){var e=B.frameTime-B.lastFrame;this.objects.forEach((function(t){t.animate(e),t.shapes.forEach((function(t){t.animate(e)}))}))}};for(var F in B.animateFunctionReference={animate:function(e){var t=this;this.animations.forEach((function(a){var n=Object(v.a)(a,4),i=n[0],r=n[1],o=n[2],s=n[3],c=W(i,t)+e/s*(r-o);o<r&&c>r&&(c=r),o>r&&c<r&&(c=r),P(i,t,c)}))},addAnimation:function(e,t,a,n){var i=this;this.animationCount++;var r=this.animationCount,o=setTimeout((function(){P(e,i,t),i.cancelAnimation(r),void 0!==i.parent.static?i.parent.static=!0:i.static=!0,n&&n()}),a),s=this.animations.find((function(t){return t[0]===e}));return s&&this.cancelAnimation(s[6]),"x"!==e&&"y"!==e&&(void 0!==this.parent.static?this.parent.static=!1:this.static=!1),this.animations.push([e,t,W(e,this),a,o,n,r]),r},cancelAnimation:function(){for(var e=this,t=function(){var t=n[a],i=e.animations.find((function(e){return e[6]===t})),r=e.animations.findIndex((function(e){return e[6]===t}));if(!i)return{v:!1};clearTimeout(i[4]),e.animations.splice(r,1)},a=0,n=Array.prototype.slice.call(arguments);a<n.length;a++){var i=t();if("object"===typeof i)return i.v}}},B.animateFunctionReference)B.object.prototype[F]=B.animateFunctionReference[F],B.shape.prototype[F]=B.animateFunctionReference[F];B.app.prototype.render=function(){this.clearCanvas(),this.fillBackground(),this.renderShape()},B.app.prototype.visualInit=function(){this.backgroundColor=this.options.background,this.context=this.canvas.getContext("2d")},B.app.prototype.renderShape=function(){this.renderPositions(),this.objects.sort((function(e,t){return e.zIndex-t.zIndex})).forEach((function(e){e.draw()}))},B.app.prototype.clearCanvas=function(){this.context.save(),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.restore()},B.app.prototype.fillBackground=function(){"none"!==this.backgroundColor&&(this.context.save(),this.context.fillStyle=this.backgroundColor,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.restore())},B.app.prototype.renderPositions=function(){var e=this;this.context.save(),this.context.fillStyle="red",this.objects.forEach((function(t){var a=t.x,n=t.y;t.positionIndicator&&(e.context.beginPath(),e.context.arc(a,n,5,0,2*Math.PI),e.context.closePath(),e.context.fill())})),this.context.restore()},B.object.prototype.updateVisual=function(){for(var e=this,t=this.findMax(),a=0;a<t.length;a++)if(~~(t[a]+.5)!==~~(this.preloader.maxes[a]+.5))return void this.createPreloader();this.clearPreloader(),this.shapes.forEach((function(t){var a=e.preloader.ox+t.x,n=e.preloader.oy+t.y;B.drawShape(e.preloader.context,a,n,t)})),this.parent.options.constantRender||this.parent.turnFunctions(this.parent)},B.object.prototype.clearPreloader=function(){this.preloader.context.clearRect(0,0,this.preloader.width,this.preloader.height)},B.object.prototype.createPreloader=function(){this.preloader=document.createElement("canvas"),this.preloader.maxes=this.findMax();var e=Object(v.a)(this.preloader.maxes,4),t=e[0],a=e[1],n=e[2],i=e[3];this.preloader.width=a-t,this.preloader.height=i-n,this.preloader.ox=this.x-t,this.preloader.oy=this.y-n,this.preloader.context=this.preloader.getContext("2d"),this.updateVisual()},B.object.prototype.drawPreloader=function(){if(this.display&&this.preloader.width>0&&this.preloader.height>0){var e=this.preloader.maxes[0]+this.preloader.width/2,t=this.preloader.maxes[2]+this.preloader.height/2;e=~~(e+.5),t=~~(t+.5),this.parent.context.save(),this.parent.context.translate(e,t),B.drawImg(this.parent.context,this.preloader,this.preloader.width,this.preloader.height),this.parent.context.restore()}},B.object.prototype.draw=function(){var e=this;this.display&&this.shapes.forEach((function(t){B.drawShape(e.parent.context,e.x+t.x,e.y+t.y,t)}))},B.drawShape=function(e,t,a,n){t=~~(t+.5),a=~~(a+.5),n.display&&(n.border||n.borderOnly?this.drawShapeKind(e,n,t,a,!0,1,n.borderColor,n.shadow):n.borderOnly||n.border||this.drawShapeKind(e,n,t,a,!1,n.opacity,n.color,n.shadow),n.borderOnly||this.drawShapeKind(e,n,t,a,!1,n.opacity,n.color))},B.drawShapeKind=function(e,t,a,n,i,r,o,s){if(!(0==(r*=t.parent.opacity)||r<0)){if(e.save(),e.globalAlpha=r,e.fillStyle=o,e.strokeStyle=o,e.lineWidth=t.borderWidth,e.translate(a,n),e.scale(t.scaleX,t.scaleY),s){var c=s.color,u=s.blur,l=s.offsetX,d=s.offsetY;e.shadowColor=c,e.shadowBlur=u,e.shadowOffsetX=l,e.shadowOffsetY=d}switch(t.kind){case"rect":B.drawRect(e,t.w,t.h,t.rotation,i);break;case"arc":B.drawArc(e,t.rad,t.arcDegree,t.rotation,i);break;case"text":B.drawText(e,t.text,t.font,i,t.textAlign,t.w,t.h,t.rotation);break;case"img":t.imageLoaded&&B.drawImg(e,t.sprite,t.w,t.h,t.rotation);break;case"poly":B.drawPoly(e,t.polyPoints,t.rotation,i);break;case"line":if(i){var h=t.points.map((function(e,a){var n=Object(v.a)(e,2),i=n[0],r=n[1];if(0===a){var o=T(C.apply(void 0,Object(x.a)(e).concat(Object(x.a)(t.points[a+1]))));return[i-t.borderWidth*Math.cos(o),r+t.borderWidth*Math.sin(o)]}if(a===t.points.length-1){var s=T(C.apply(void 0,Object(x.a)(e).concat(Object(x.a)(t.points[a-1]))));return[i-t.borderWidth*Math.cos(s),r+t.borderWidth*Math.sin(s)]}return[i,r]}));B.drawLine(e,h,t.rotation,t.lineWidth+t.borderWidth)}else B.drawLine(e,t.points,t.rotation,t.lineWidth);break;case"roundedRectangle":B.drawRoundedRectangle(e,t.w,t.h,t.rotation,t.borderRadius,i)}if(t.clip&&t.clipImageLoaded)if(e.clip(),e.rotate(T(t.rotation)),"number"===typeof t.clipSpriteSheetX&&"number"===typeof t.clipSpriteSheetY){var p=t.clipImage.width/t.spriteLengthX,f=t.clipImage.height/t.spriteLengthY,m=t.clipSpriteSheetX*p,b=t.clipSpriteSheetY*f;e.drawImage(t.clipImage,m,b,p,f,-t.width/2/t.scaleX,-t.height/2/t.scaleY,t.width/t.scaleX,t.height/t.scaleY)}else e.drawImage(t.clipImage,-t.width/2/t.scaleX,-t.height/2/t.scaleY,t.width/t.scaleX,t.height/t.scaleY);e.restore()}},B.drawRect=function(e,t,a,n,i){e.rotate(T(360-n)),i?e.strokeRect(-t/2,-a/2,t,a):e.fillRect(-t/2,-a/2,t,a)},B.drawRoundedRectangle=function(e,t,a,n,i,r){e.rotate(T(360)),e.beginPath(),e.moveTo(0,.5*-a),e.lineTo(.5*-t+i,.5*-a),e.quadraticCurveTo(.5*-t,.5*-a,.5*-t,.5*-a+i),e.lineTo(.5*-t,.5*a-i),e.quadraticCurveTo(.5*-t,.5*a,.5*-t+i,.5*a),e.lineTo(.5*t-i,.5*a),e.quadraticCurveTo(.5*t,.5*a,.5*t,.5*a-i),e.lineTo(.5*t,.5*-a+i),e.quadraticCurveTo(.5*t,.5*-a,.5*t-i,.5*-a),e.lineTo(0,.5*-a),e.closePath(),r?e.stroke():e.fill()},B.drawArc=function(e,t,a,n,i){e.beginPath();var r=T(360-n-a),o=T(360-n);if(a<360){var s=L(0,0,t,0,360-n-a),c=Object(v.a)(s,2),u=c[0],l=c[1];e.moveTo(u,l),e.moveTo(0,0)}e.arc(0,0,t,r,o),i?e.stroke():e.fill(),e.closePath()},B.drawText=function(e,t,a,n,i,r,o,s){e.textAlign=i,e.font=a,e.rotate(T(360-s)),e.fillText(t,~~(-r/2+.5),~~(o/3.5+.5))},B.drawImg=function(e,t,a,n,i){e.rotate(T(360-i)),e.drawImage(t,-a/2,-n/2,a,n)},B.drawPoly=function(e,t,a,n){0!==t.length&&t&&(e.rotate(T(360-a)),e.beginPath(),e.moveTo.apply(e,Object(x.a)(t[0])),t.forEach((function(t){var a=Object(v.a)(t,2),n=a[0],i=a[1];return e.lineTo(n,i)})),e.closePath(),n?e.stroke():e.fill())},B.drawLine=function(e,t,a,n){e.beginPath(),e.rotate(T(360-a)),e.moveTo.apply(e,Object(x.a)(t[0])),t.forEach((function(t){var a=Object(v.a)(t,2),n=a[0],i=a[1];return e.lineTo(n,i)})),e.lineWidth=n,e.stroke()},B.object.prototype.addShape=function(e){var t=new B[e.kind](e,this);return this.updateVisual(),t},B.app.prototype.addObject=function(e){return new B.object(e,this)},B.app.prototype.addStorage=function(e){return new B.storage(e,this)},B.app.prototype.removeObject=function(e){this.objects.splice(this.objects.indexOf(e),1)};var N=B,V="https://upload.wikimedia.org/wikipedia/commons/9/95/UNO_cards_deck.svg",G=function(){function e(t,a){var n=this;Object(w.a)(this,e),this.drawSoundIcon=function(){var e=n.app.addObject({x:1600,y:100}),t=e.addShape({kind:"img",drawWidth:70,spriteLink:"./assets/soundon.png",display:!0}),a=e.addShape({kind:"img",drawWidth:70,spriteLink:"./assets/soundoff.png",display:!1}),i=!0;e.pressedEvent((function(){i?N.muteAll():N.unmuteAll(),t.display=!t.display,a.display=!a.display,e.updateVisual(),i=!i}))},this.animatePlayerPlay=function(e){return n.animatePlay.apply(n,[e].concat(Object(x.a)(n.positionReference.playerDeck)))},this.animatePlayerDraw=function(){return n.animateDraw.apply(n,Object(x.a)(n.positionReference.playerDeck))},this.animateLeaderboardDraw=function(){return n.animateDraw.apply(n,Object(x.a)(n.positionReference.leaderBoard))},this.animateLeaderboardPlay=function(e){return n.animatePlay.apply(n,[e].concat(Object(x.a)(n.positionReference.leaderBoard)))},this.drawSpecialInfo=function(){var e=n.app.addObject({x:n.positionReference.playDeck[0],y:n.positionReference.playDeck[1]+170});e.addShape({kind:"roundedRectangle",display:!1,w:n.app.canvas.width,h:100});var t=e.addShape({kind:"text",font:"40px Futura",text:""}),a=["red","blue","yellow","green"],i=["red","blue","#9b870c","green"];n.activateInfo=function(n){console.log(n);var r=i[a.indexOf(n)];t.color=r,t.text=n.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join(""),e.updateVisual()},n.cancelInfo=function(){t.text="",e.updateVisual()}},this.animateDraw=function(e,t){return new Promise((function(a){var i=n.createCard(null,!0);i.x=n.positionReference.drawDeck[0],i.y=n.positionReference.drawDeck[1],i.zIndex=-1,i.display=!0,N.playSound("./assets/draw.mp3"),i.addAnimation("x",e,500),i.addAnimation("y",t,500),i.shapes[0].addAnimation("scaleX",.2,500,a),i.shapes[0].addAnimation("scaleY",.2,500,(function(){return i.kill()}))}))},this.animatePlay=function(e,t,a){return new Promise((function(i){var r=n.createCard(e);r.shapes[0].scaleX=.2,r.shapes[0].scaleY=.2,r.x=t,r.y=a,r.display=!0,N.playSound("./assets/deal.mp3"),r.addAnimation("x",n.playDeck.x,500,(function(){n.playDeck.kill(),n.playDeck=r})),r.addAnimation("y",n.playDeck.y,500,i),r.shapes[0].addAnimation("scaleX",1,500),r.shapes[0].addAnimation("scaleY",1,500),e.match(/Draw 4/)||e.match(/Wild/)?n.activateInfo(e.split(" ")[0]):n.cancelInfo()}))},this.drawColorChoser=function(){var e=["red","blue","#9b870c","green"],t=!1,a=function(){},i=n.app.addStorage({display:!1,zIndex:1e3,x:n.app.canvas.width/2,y:n.app.canvas.height/2-100,model:["red","blue","yellow","green"],spacing:25,direction:"column"});i.addShape({kind:"roundedRectangle",w:400,h:400,borderRadius:20,color:"white",shadow:{color:"black",offsetX:5,offsetY:-5,blur:10},border:!0,borderWidth:5,borderColor:"black"}),i.addShape({kind:"text",font:"35px Futura",text:"Choose a color:",y:-170}),i.elementFunction=function(n,r){var o=i.addShape({kind:"text",color:e[r],font:"30px Futura",text:n.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")});return o.hoverEvent((function(){o.color="yellow",i.updateVisual()}),(function(){o.color=e[r],i.updateVisual()})),o.pressedEvent((function(){t&&(a(n),i.display=!1)})),o},i.updateToModel(),n.chooseColor=function(){return new Promise((function(e){i.display=!0,t=!0,a=e}))}},this.kill=function(){n.app.kill(),n.staticApp.kill(),N.stopAll()},this.cardSpriteColumn=14,this.cardSpriteRow=8,this.cardSpriteReference={wild:[0,13],Draw4:[4,13],colorReference:["red","yellow","green","blue"],otherReference:["Skip","Reverse","Draw 2"]},this.app=new N.app(t),this.app.backgroundColor="none",this.staticApp=new N.app(a,{constantRender:!1}),this.staticApp.backgroundColor="none",this.app.pixelDensity=2,this.app.canvas.width=1700,this.app.canvas.height=1300,this.staticApp.pixelDensity=2,this.staticApp.canvas.width=1700,this.staticApp.canvas.height=1300,console.log(this.staticApp.canvas),this.staticApp.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,zIndex:-10}).addShape({kind:"roundedRectangle",w:this.app.canvas.width,h:this.app.canvas.height,clip:!0,clipImageLink:"assets/wood.jpg"}),this.staticApp.turnFunctions(this.staticApp),this.positionReference={leaderBoard:[1400,558],drawDeck:[600,558],playDeck:[this.app.canvas.width/2+150,558],playerDeck:[this.app.canvas.width/2,this.app.canvas.height-75]};var i=!1,r=function(){};this.drawDeck=this.createDeck("blue 2",600,558),this.drawDeck.addShape({kind:"text",text:"Draw Here",color:"black",y:170,font:"35px Futura"}),this.drawDeck.flip(),this.drawDeck.pressedEvent((function(){i&&r()})),this.awaitDraw=function(){return new Promise((function(e){i=!0,r=e}))},this.cancelDraw=function(){return i=!1},this.createHand(),this.createLeaderboard(),this.drawAnnouncement(),this.configureStartGameMessage(),this.configureUnoMessage(),this.drawColorChoser(),this.drawSpecialInfo(),this.drawEmote(),this.drawAddBot(),this.drawEndGame(),this.drawSoundIcon()}return Object(k.a)(e,[{key:"drawEndGame",value:function(){var e=this.app.addObject({display:!1,x:this.app.canvas.width/2,y:this.app.canvas.height/2-100,zIndex:1e8});e.addShape({kind:"roundedRectangle",color:"#ffffed",w:700,h:200,border:!0,borderWidth:10,borderColor:"black",borderRadius:20,shadow:{color:"black",offsetX:5,offsetY:-5,blur:10}});var t=e.addShape({kind:"text",text:"Someone had won the game!",font:"40px Arial Bold",y:-10}),a=function(){},n=e.addShape({kind:"text",text:"New Game",font:"30px Arial Bold",color:"blue",y:50});n.hoverEvent((function(){n.color="yellow",e.updateVisual()}),(function(){n.color="blue",e.updateVisual()})),n.pressedEvent((function(){return a()})),this.activateEndGame=function(n,i){t.text="\ud83c\udf89 ".concat(n," had won the game! \ud83c\udf89"),e.updateVisual(),e.display=!0,a=i}}},{key:"drawTutorial",value:function(){var e=this.app.addStorage({display:!1,x:this.app.canvas.width/2,y:this.app.canvas.height/2-100,zIndex:1e5,direction:"column",spacing:5});e.addShape({kind:"roundedRectangle",color:"#ffffed",w:750,h:750,border:!0,borderWidth:10,borderColor:"black",borderRadius:20,shadow:{color:"black",offsetX:5,offsetY:-5,blur:10}}),e.addShape({kind:"img",spriteLink:"assets/crossIcon.png",drawWidth:50,x:320,y:-320}).pressedEvent((function(){return e.display=!1})),e.model=["\ud83c\udf89 Welcome to Uno Online! \ud83c\udf89","Some quick pointers:",'\ud83d\udc48 Use "Copy Link" from the left to automatically',"get a link you can send to your friends!","\ud83d\udc49 You can start the game when at least 2 players ","(including bots) are present. The panel on the left","show you who is in the game.","\ud83d\udc47 You can use the emote panel below to piss","off your friends when playing.","\ud83d\udc4f And that is it! If you have any feedback","please \ud83d\udce7 me at vietlongali@gmail.com","Have fun!","Love this app? Buy me a beer on ","Venmo @LongTran123"],e.elementFunction=function(t){var a=e.addShape({kind:"text",font:"30px Arial Bold",text:t});return a.x=.5*a.width-340,a},e.updateToModel(),this.showTutorial=function(){return e.display=!0}}},{key:"drawAddBot",value:function(){var e=this.app.addObject({display:!1,x:this.positionReference.leaderBoard[0],y:this.positionReference.leaderBoard[1]+200}),t=e.addShape({kind:"text",font:"35px Arial Bold",text:"Add Bot \ud83e\udd16"}),a=function(){};t.hoverEvent((function(){t.color="yellow",e.updateVisual()}),(function(){t.color="black",e.updateVisual()})),t.pressedEvent((function(){return a()})),this.startAddBot=function(t){a=t,e.display=!0},this.cancelAddBot=function(){e.display=!1}}},{key:"drawEmoteChooser",value:function(e){var t=this.app.addStorage({x:500,y:940,spacing:-15,zIndex:-1});t.addShape({kind:"roundedRectangle",color:"white",w:740,h:80,borderRadius:20,border:!0,borderColor:"black",borderWidth:5,shadow:{color:"black",offsetX:5,offsetY:-5,blur:10}}),t.model=["Emote:","\ud83d\udc96","\ud83d\ude21","\ud83d\udc4b","\ud83d\ude02","\ud83d\ude08","\ud83d\udca9"],t.elementFunction=function(a,n){if(!n)return t.addShape({kind:"text",text:a,font:"35px Arial Bold"});var i=t.addShape({kind:"text",text:a,font:"35px Arial Bold"});return i.hoverEvent((function(){i.font="50px Arial Bold",t.updateVisual()}),(function(){i.font="30px Arial Bold",t.updateVisual()})),i.pressedEvent((function(){return e(a)})),i},t.updateToModel()}},{key:"drawEmote",value:function(){var e=this.app.addObject({display:!1,x:this.app.canvas.width/2,y:this.app.canvas.height/2-340,zIndex:1e3}),t=e.addShape({kind:"text",text:"Someone emote something",font:"60px Arial Bold",color:"green"});e.addShape({kind:"roundedRectangle",w:this.app.canvas.width,h:100,display:!1});var a=null;this.emote=function(n,i,r){clearInterval(a),t.text="".concat(n," emote ").concat(r),t.color=i,e.updateVisual(),e.display=!0,t.opacity=0,t.addAnimation("opacity",1,100,(function(){a=setTimeout((function(){t.addAnimation("opacity",0,100,(function(){e.display=!1}))}),1e3)}))}}},{key:"createActionPanel",value:function(e){var t=this.app.addStorage({x:200,y:558,spacing:20,direction:"column"});t.addShape({kind:"roundedRectangle",w:240,h:300,borderRadius:20,color:"#ffffed",shadow:{color:"black",offsetX:5,offsetY:-5,blur:10},border:!0,borderWidth:5,borderColor:"black"}),t.addShape({kind:"text",font:"32px Futura",text:"Actions:",y:-120}),t.model=["Copy Link","Leave Game","Restart Game"],t.elementFunction=function(a){var n=t.addShape({kind:"text",font:"30px Futura",text:a});return n.hoverEvent((function(){n.color="yellow",t.updateVisual()}),(function(){n.color="black",t.updateVisual()})),n.pressedEvent((function(){return e[a.split(" ").join("")]()})),n},t.updateToModel()}},{key:"createLeaderboard",value:function(){var e=this,t=this.staticApp.addStorage({x:1400,y:558,spacing:10,direction:"column"});t.addShape({kind:"roundedRectangle",w:240,h:300,borderRadius:20,color:"#ffffed",shadow:{color:"black",offsetX:5,offsetY:-5,blur:10},border:!0,borderWidth:5,borderColor:"black"}),t.addShape({kind:"text",font:"32px Futura",text:"Turn Board:",y:-120});var a=this.app.addObject({display:!1});a.addShape({x:170,kind:"poly",specialPolygon:!0,numberOfSide:3,color:"yellow",radius:20,rotation:180});var n=["green","red","darkyellow","blue"];t.elementFunction=function(e,a){return t.addShape({kind:"text",font:"30px Futura",color:n[a],text:e})},this.updateTurnIndicator=function(e){var n=t.shapes[e+2],i=n.absoluteY,r=n.absoluteX;a.x=r+20,a.addAnimation("y",i,200,(function(){a.display=!0;var e=5,t=function(){--e<0||a.addAnimation("opacity",0,500,n)},n=function(){return a.addAnimation("opacity",1,500,t)};t()}))},this.updateLeaderboard=function(a){t.model=a,t.updateToModel(),e.staticApp.turnFunctions(e.staticApp)}}},{key:"createHand",value:function(){var e=this,t=function(){},a=function(){},n=!1,i=this.app.addStorage({spacing:-140,y:this.app.canvas.height-75,x:this.app.canvas.width/2,model:[]});i.addShape({kind:"rect",color:"brown",w:this.app.canvas.width,h:150}),i.elementFunction=function(r){var o=[];if(r.match(/Wild/))o=e.cardSpriteReference.wild;else if(r.match(/Draw 4/))o=e.cardSpriteReference.Draw4;else{var s=r.split(" ")[0],c=r.split(" ").slice(1).join(" ");o[0]=e.cardSpriteReference.colorReference.indexOf(s),parseInt(c)?o[1]=parseInt(c):o[1]=e.cardSpriteReference.otherReference.indexOf(c)+10}var u=i.addShape({borderOnly:!0,y:30,clipSpriteSheetX:o[1],clipSpriteSheetY:o[0],spriteLengthX:e.cardSpriteColumn,spriteLengthY:e.cardSpriteRow,kind:"roundedRectangle",color:"white",w:246,h:349.2,clip:!0,clipImageLink:V,borderRadius:40,border:!0,borderWidth:2.5,borderColor:"black",shadow:{color:"black",blur:2.5,offsetX:3.5,offSetY:3.5}});return u.hoverEvent((function(){a(r)&&n&&(u.borderColor="yellow"),u.borderWidth=10,u.addAnimation("y",-100,200)}),(function(){u.borderColor="black",u.borderWidth=2.5,u.addAnimation("y",30,200)})),u.pressedEvent((function(){a(r)&&(n=!1,u.kill(),t(r))})),u},this.updateCards=function(e){i.model=e,i.updateToModel()},this.awaitSelection=function(e){return new Promise((function(i){a=e,t=i,n=!0}))},this.cancelSelection=function(){return n=!1}}},{key:"createDeck",value:function(e,t,a){var n={kind:"roundedRectangle",color:"white",w:205,h:291,borderRadius:40,border:!0,borderWidth:2.5,borderColor:"black"},i=this.staticApp.addObject({x:t,y:a});i.addShape(Object(l.a)({x:12,y:-10},n)),i.addShape(Object(l.a)({x:8,y:-7.5},n)),i.addShape(Object(l.a)({x:6,y:-5},n)),i.addShape(Object(l.a)({x:3,y:-2.5},n));var r=this.createCard(e);return r.x=t,r.y=a,r.shapes[0].shadow=null,r.shapes[0].border=!1,r.display=!0,r.updateVisual(),this.staticApp.turnFunctions(this.staticApp),r}},{key:"createCard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,display:!1});if(t)a.addShape({kind:"roundedRectangle",borderOnly:!0,color:"white",w:205,h:291,clip:!0,clipImageLink:"assets/back.png",borderRadius:40,border:!0,borderWidth:2.5,borderColor:"black",shadow:{color:"black",blur:2.5,offsetX:3.5,offSetY:3.5}});else{var n=!1,i=[];if(e.match(/Wild/))i=this.cardSpriteReference.wild;else if(e.match(/Draw 4/))i=this.cardSpriteReference.Draw4;else{var r=e.split(" ")[0],o=e.split(" ").slice(1).join(" ");i[0]=this.cardSpriteReference.colorReference.indexOf(r),parseInt(o)?i[1]=parseInt(o):i[1]=this.cardSpriteReference.otherReference.indexOf(o)+10}var s=a.addShape({clipSpriteSheetX:i[1],clipSpriteSheetY:i[0],spriteLengthX:this.cardSpriteColumn,spriteLengthY:this.cardSpriteRow,kind:"roundedRectangle",color:"white",w:205,h:291,clip:!0,clipImageLink:V,borderRadius:40,border:!0,borderWidth:2.5,borderColor:"black",shadow:{color:"black",blur:2.5,offsetX:3.5,offSetY:3.5}}),c=function(){s.clipSpriteSheetX=null,s.changeClipImage("assets/back.png")},u=function(){s.clipSpriteSheetX=i[1],s.changeClipImage(V)},l=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(t){s.addAnimation("scaleX",0,100,(function(){e?c():u(),s.addAnimation("scaleX",1,100,t)}))}))};a.flip=function(){return l(n=!n)}}return a}},{key:"drawAnnouncement",value:function(){var e=this;this.announcementQueue=[],this.announcmentPerpetual=[],this.onAnnouncementPerpetual=!1,this.onAnnoucementChanged=!1,this.announcement=this.app.addObject({x:this.app.canvas.width/2,y:100,positionIndicator:!1}),this.annoucementText=this.announcement.addShape({kind:"text",font:"100px Futura",color:"orange",text:"",display:!1}),this.announcement.addShape({kind:"roundedRectangle",w:this.app.canvas.width/2,h:200,display:!1});var t=function(t){return e.annoucementText.addAnimation("opacity",0,100,(function(){e.annoucementText.display=!1,t&&t()}))},a=function(a,n){return t((function(){a(),e.annoucementText.display=!0,function(t){e.annoucementText.addAnimation("opacity",1,100,t)}(n)}))};this.updateAnnouncement=function(){if(e.announcementQueue.length>0&&!e.announcementQueue[0][3]){var n=Object(v.a)(e.announcementQueue[0],3),i=n[0],r=n[1],o=n[2];a((function(){e.annoucementText.text=i,e.annoucementText.color=r,setTimeout((function(){e.announcementQueue.splice(0,1),e.updateAnnouncement()}),o+100)})),e.announcementQueue[0][3]=!0}else{if(e.announcementQueue.length>0)return;if(!e.onAnnouncementPerpetual&&e.annoucementText.display)return t();if(e.onAnnouncementPerpetual&&(!e.annoucementText.display||e.onAnnoucementChanged))return a((function(){var t=Object(v.a)(e.announcmentPerpetual,2),a=t[0],n=t[1];e.annoucementText.text=a,e.annoucementText.color=n}))}}}},{key:"changeAnnoucementPerpetual",value:function(e,t){this.announcmentPerpetual=[e,t],this.onAnnoucementChanged=!0,this.updateAnnouncement()}},{key:"addToAnnoucementQueue",value:function(e,t,a){this.announcementQueue.push([e,t,a,!1]),this.updateAnnouncement()}},{key:"configureUnoMessage",value:function(){var e=this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,zIndex:1e3}),t=e.addShape({kind:"img",spriteLink:"./assets/18.svg",scaleX:0,scaleY:0});e.display=!1,this.UNO=function(){e.display=!0,t.addAnimation("scaleX",1.5,400,(function(){setTimeout((function(){t.addAnimation("scaleX",0,100,(function(){return e.display=!1})),t.addAnimation("scaleY",0,100)}),500)})),t.addAnimation("scaleY",1.5,400)}}},{key:"configureStartGameMessage",value:function(){var e=this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height-200,display:!1}),t=e.addShape({kind:"text",text:"Start Game",color:"black",font:"50px Futura"});e.addShape({kind:"roundedRectangle",w:200,h:100,display:!1});var a=!1,n=function(){},i=function(){a?t.addAnimation("opacity",1,1e3,r):t.opacity=1},r=function(){a?t.addAnimation("opacity",0,1e3,i):t.opacity=1};e.pressedEvent((function(){a=!1,e.display=!1,n()})),this.initiateStartGameMessage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};a||(n=t,a=!0,e.display=!0,r())},this.turnOffStartGameMessage=function(){e.display=!1}}}]),e}(),J=a(97),U=(a(70),a(33)),_=function(){var e=Object(g.a)(b.a.mark((function e(t,a,n,i,r,o){var s,c,u,l,d,h,p,f,m;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(s=new G(t,a)).drawTutorial(),c=null,"/",u=J.connect("/",{query:{token:n}}),s.showTutorial(),l=function(e){u.emit("Play Card",e)},d=function(){u.emit("Draw Card")},h=function(e){u.emit("Emote",e)},p=function(){return u.emit("Add Bot")},f=function(e){if("Wild"===e||"Draw 4"===e||"Wild"===c.currentTopCard||"Draw 4"===c.currentTopCard)return!0;var t=c.currentTopCard.split(" ")[0],a=c.currentTopCard.split(" ").slice(1).join(" "),n=e.split(" ")[0],i=e.split(" ").slice(1).join(" ");return t===n||a===i},m=function(){var e=Object(g.a)(b.a.mark((function e(t){var a,n,r,o,h,m,x,w,k,O,j,I,S,E,A,R,C,M,T,L;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=c?U.cloneDeep(c):null,!(c=t).inGame&&c.players.length>1&&!c.endGame?s.initiateStartGameMessage((function(){return u.emit("Start Game")})):s.turnOffStartGameMessage(),!c.inGame&&c.players.length<4&&!c.endGame?s.startAddBot(p):s.cancelAddBot(),parseInt(c.onTurn)==i?(s.awaitSelection(f).then((function(e){s.cancelDraw(),s.cancelSelection(),l(e)})),s.awaitDraw().then((function(){s.cancelSelection(),s.cancelDraw(),d()}))):(s.cancelDraw(),s.cancelSelection()),!a){e.next=98;break}if(parseInt(a.onTurn)!=parseInt(c.onTurn)&&c.onTurn>=0&&s.updateTurnIndicator(parseInt(c.onTurn)),n=c.feed.slice(a.feed.length),r=c.directives.slice(a.directives.length),o=c.players.map((function(e){return e.username})),h=a.players.map((function(e){return e.username})),JSON.stringify(o)!==JSON.stringify(h)&&s.updateLeaderboard(o),n.length&&n.forEach((function(e){return s.addToAnnoucementQueue(e,"black",500)})),!r.length){e.next=93;break}m=Object(y.a)(r),e.prev=15,m.s();case 17:if((x=m.n()).done){e.next=85;break}w=Object(v.a)(x.value,2),k=w[0],O=w[1],e.t0=k,e.next=1===e.t0?22:2===e.t0?31:3===e.t0?49:4===e.t0?67:5===e.t0?75:7===e.t0?77:82;break;case 22:if(O!==i){e.next=29;break}return e.next=25,s.animatePlayerDraw();case 25:j=c.players[i].cards.slice(a.players[i].cards.length)[0],f(j)?l(j):u.emit("Pass Turn"),e.next=30;break;case 29:s.animateLeaderboardDraw();case 30:return e.abrupt("break",83);case 31:if(O!==i){e.next=41;break}I=0;case 33:if(!(I<4)){e.next=39;break}return e.next=36,s.animatePlayerDraw();case 36:I++,e.next=33;break;case 39:e.next=48;break;case 41:S=0;case 42:if(!(S<4)){e.next=48;break}return e.next=45,s.animateLeaderboardDraw();case 45:S++,e.next=42;break;case 48:return e.abrupt("break",83);case 49:if(O!==i){e.next=59;break}E=0;case 51:if(!(E<2)){e.next=57;break}return e.next=54,s.animatePlayerDraw();case 54:E++,e.next=51;break;case 57:e.next=66;break;case 59:A=0;case 60:if(!(A<2)){e.next=66;break}return e.next=63,s.animateLeaderboardDraw();case 63:A++,e.next=60;break;case 66:return e.abrupt("break",83);case 67:if(O!==i){e.next=72;break}return e.next=70,s.animatePlayerPlay(c.currentTopCard);case 70:e.next=74;break;case 72:return e.next=74,s.animateLeaderboardPlay(c.currentTopCard);case 74:return e.abrupt("break",83);case 75:return s.UNO(),e.abrupt("break",83);case 77:return R=function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<4)){e.next=7;break}return e.next=4,s.animatePlayerDraw();case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<4)){e.next=7;break}return e.next=4,s.animateLeaderboardDraw();case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R(),C(),e.abrupt("break",83);case 82:return e.abrupt("break",83);case 83:e.next=17;break;case 85:e.next=90;break;case 87:e.prev=87,e.t1=e.catch(15),m.e(e.t1);case 90:return e.prev=90,m.f(),e.finish(90);case 93:M=a.players[i].cards,T=c.players[i].cards,JSON.stringify(M)!==JSON.stringify(T)&&s.updateCards(c.players[i].cards),e.next=103;break;case 98:L=c.players.map((function(e){return e.username})),s.updateLeaderboard(L),s.updateCards(c.players[i].cards),c.onTurn>=0&&s.updateTurnIndicator(c.onTurn),s.playDeck=s.createDeck(c.currentTopCard,s.app.canvas.width/2+150,558);case 103:case"end":return e.stop()}}),e,null,[[15,87,90,93]])})));return function(t){return e.apply(this,arguments)}}(),u.on("Update",m),u.on("New Game",(function(e){s.kill(),(s=new G(t,a)).createActionPanel({CopyLink:r,LeaveGame:o,RestartGame:function(){return u.emit("Restart Game")}}),s.drawEmoteChooser(h),c=null,m(e)})),u.on("End Game",(function(e){s.activateEndGame(c.players[e].username,(function(){return u.emit("Restart Game")}))})),u.on("Choose Color",Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.chooseColor();case 2:t=e.sent,u.emit("Choose Color",t);case 4:case"end":return e.stop()}}),e)})))),u.on("Error",(function(e){return console.log(e)})),u.on("Emote",(function(e){var t=e.emoji,a=e.userid;s.emote(c.players[a].username,["green","red","black","blue"][a],t)})),u.on("Delete Inactive",(function(){return s.changeAnnoucementPerpetual("This game was delete due to inactivity")})),u.on("Critical Error",o),s.createActionPanel({CopyLink:r,LeaveGame:o,RestartGame:function(){return u.emit("Restart Game")}}),s.drawEmoteChooser(h),console.log=function(){};case 23:case"end":return e.stop()}}),e)})));return function(t,a,n,i,r,o){return e.apply(this,arguments)}}(),Q=a(81),q=Object(s.b)((function(e){return{token:e.token,playerid:e.playerid,id:e.id}}),(function(e){return{dispatch:e}}))((function(e){var t=e.token,a=e.playerid,r=e.id,o=e.dispatch,s=Object(n.useRef)(),c=Object(n.useRef)(),u="http://playuno.net/join/".concat(r);return Object(n.useEffect)((function(){_(s.current,c.current,t,a,(function(){return function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),Q.a.success("Copied!")}(u)}),(function(){return o({type:"LOG_OUT"})}))}),[]),i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"d-flex game",style:{alignItems:"center",height:"100%",width:"100%",position:"absolute"}},i.a.createElement("canvas",{ref:s,style:{width:850,height:650,margin:"auto",backgroundColor:"transparent"}})),i.a.createElement("div",{className:"d-flex game2",style:{alignItems:"center",height:"100%",width:"100%",position:"absolute"}},i.a.createElement("canvas",{ref:c,style:{width:850,height:650,margin:"auto",backgroundColor:"transparent"}})))})),z=a(40),H=a.n(z),K=a(30),$=a(43),Z=a.n($),ee=a(79).join,te=Object(s.b)((function(e){return{tempJoinId:e.tempJoinId}}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,a=(e.changeHistory,e.tempJoinId),r=Object(n.useState)(!1),o=Object(v.a)(r,2),s=o[0],c=o[1];Object(n.useEffect)((function(){console.log(a),a||t({type:"JOINED"})}),[]);var u=function(){var e=Object(g.a)(b.a.mark((function e(n){var i,r,o,s,u,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.username,c(!0),console.log(a),e.next=5,ee(a,i);case 5:r=e.sent,o=r.data,s=o.token,u=o.id,l=o.playerid,console.log(o),t({type:"JOIN_LOG_IN",token:s,id:u,playerid:l}),c(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row w-50 mx-auto",style:{maxWidth:400}},!s&&i.a.createElement("div",{className:"text-center w-100 mx-auto",style:{fontFamily:"Arial Bold"}},i.a.createElement("img",{src:Z.a,style:{width:300,margin:"auto"},className:"floating"}),i.a.createElement("div",{className:"text-secondary"},"Online version by Long Tran"),i.a.createElement("div",{className:"pt-5 pb-5 mt-5",style:{boxShadow:"0px 4px 16px rgba(31, 31, 31, 0.16)",border:"1px solid black",borderRadius:"15px",backgroundColor:"white"}},i.a.createElement(K.b,{initialValues:{username:""},onSubmit:u},(function(e){var t=e.handleSubmit,a=e.handleChange,n=e.handleBlur;return i.a.createElement(K.a,null,i.a.createElement("div",{className:"container w-50"},i.a.createElement("label",{className:"font-weight-bold"},"Nickname"),i.a.createElement("input",{type:"text",name:"username",className:"form-control",onChange:a,onBlur:n}),i.a.createElement("button",{className:"btn btn-success mt-4",onSubmit:t},"Join game!")))}))))),i.a.createElement("div",{style:{position:"absolute",top:"50%",width:"100%"}},i.a.createElement(H.a,{color:"blue",loading:s,width:"200px",css:{margin:"auto"}})))})),ae=a(79).create,ne=Object(c.f)(Object(s.b)(null,(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,a=(e.history,Object(n.useState)(!1)),r=Object(v.a)(a,2),o=r[0],s=r[1],c=function(){var e=Object(g.a)(b.a.mark((function e(a){var n,i,r,o,c,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.username,s(!0),e.next=4,ae(n);case 4:i=e.sent,r=i.data,o=r.token,c=r.id,u=r.playerid,t({type:"LOG_IN",token:o,id:c,playerid:u}),s(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"container background"},i.a.createElement("div",{className:"row w-75 mx-auto",style:{maxWidth:400,fontFamily:"Arial Bold"}},!o&&i.a.createElement("div",{className:"text-center mx-auto w-100"},i.a.createElement("img",{src:Z.a,style:{width:300,margin:"auto"},className:"floating"}),i.a.createElement("div",{className:"text-secondary"},"Online version by Long Tran"),i.a.createElement("div",{className:"pt-5 pb-5 mt-5",style:{boxShadow:"0px 4px 16px rgba(31, 31, 31, 0.16)",border:"1px solid black",backgroundColor:"white",borderRadius:"15px"}},i.a.createElement(K.b,{initialValues:{username:""},onSubmit:c},(function(e){var t=e.handleSubmit,a=e.handleChange,n=e.handleBlur;return i.a.createElement(K.a,null,i.a.createElement("div",{className:"container w-50"},i.a.createElement("label",{className:"font-weight-bold "},"Nickname:"),i.a.createElement("input",{type:"username",name:"username",className:"form-control",onChange:a,onBlur:n}),i.a.createElement("button",{className:"btn btn-success mt-4",onSubmit:t},"Create game!")))}))),i.a.createElement("p",{className:"text-secondary mt-2"},"Joining a friend's game? Ask them for a personal link!"))),i.a.createElement("div",{style:{position:"absolute",top:"50%",width:"100%"}},i.a.createElement(H.a,{color:"blue",loading:o,width:"200px",css:{margin:"auto"}})))}))),ie=(a(152),Object(c.f)(Object(s.b)((function(e){return{loggedIn:e.loggedIn,joined:e.joined}}),(function(e){return{dispatch:e}}))((function(e){var t=e.loggedIn,a=e.dispatch,r=e.history,o=e.joined,s=window.location.pathname;return Object(n.useEffect)((function(){if(N.stopAll(),s.match(/join/)&&!o){var e=s.split("/")[2];console.log(e),a({type:"LOG_OUT_WITH_TEMP_JOIN",tempJoinId:e}),r.push("/join")}else t?(console.log("hello"),s.match(/game/)||r.push("/game")):r.push("/")}),[t,o]),i.a.createElement(i.a.Fragment,null,i.a.createElement(c.c,null,i.a.createElement(c.a,{path:"/game",exact:!0,component:q}),i.a.createElement(c.a,{path:"/join",exact:!0},i.a.createElement(te,{changeHistory:r})),i.a.createElement(c.a,{path:"/",exact:!0,component:ne})),i.a.createElement("div",{className:"backgrounddiv"}))}))));var re=function(){return i.a.createElement(s.a,{store:f},i.a.createElement(u.a,null,i.a.createElement(ie,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},43:function(e,t,a){e.exports=a.p+"static/media/9.f703b21f.svg"},79:function(e,t,a){var n=a(70).create({baseURL:"/"});e.exports={join:function(e,t){return n.post("join",{id:e,username:t})},create:function(e){return n.post("create",{username:e})}}},85:function(e,t,a){e.exports=a(153)},90:function(e,t,a){},91:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.90ab62bd.chunk.js.map