{"version":3,"sources":["redux.js","lght/util/util.js","lght/lght.js","view.js","controller.js","Page/Game.js","Page/Join.js","Page/Landing.js","App.js","serviceWorker.js","index.js","api.js"],"names":["createStore","require","token","localStorage","getItem","defaultState","id","playerid","parseInt","tempJoinID","joined","loggedIn","Store","state","type","tempJoinId","setItem","removeItem","console","log","mergeDefaultPropertyObject","p","d","o","prop","_","cloneDeep","findDistance2Point","x1","y1","x2","y2","Math","sqrt","pow","findAngle2Point","dx","dy","tan","atan","radToDeg","rad","PI","degToRad","deg","rotatePoint","cx","cy","x","y","calculateRotatePoint","r","angleIndex","indexOf","coeff","cos","sin","findIntersection","s1","s2","x11","y11","x12","y12","x21","y21","x22","y22","round","minX1","min","maxX1","max","minX2","maxX2","slope1","slope2","coeff1","findClosestPoint","s","angle","abs","findAngle3Point","d1","d2","changeByDotNotation","propertyString","object","value","propertyArray","split","objectLink","forEach","e","i","length","Array","isArray","getByDotNotation","lght","inputReference","movementIndex","coeffIndex","defaultAppConfig","initFunctions","animateFunctions","lastFrame","undefined","constantRender","background","pixelDensity","defaultObjectProps","shapes","animations","hoverEvents","animationCount","static","rotation","positionIndicator","display","opacity","mouseUpEvent","mouseDownEvent","mouseMoveEvent","zIndex","defaultStorageProps","spacing","direction","model","defaultShapeOptions","kind","scaleX","scaleY","color","lineWidth","borderColor","borderWidth","border","borderOnly","shadow","defaultRectOptions","w","h","clip","clipImageLink","clipCanvas","clipSpriteSheetX","clipSpriteSheetY","spriteLengthX","spriteLengthY","defaultArcOptions","arcDegree","defaultTextOptions","textAlign","font","text","defaultImgOptions","spriteLink","drawWidth","drawHeight","loadedFunction","defaultPolyOptions","points","specialPolygon","numberOfSide","radius","defaultLineOptions","apps","gameloop","list","frameTime","loop","time","requestAnimationFrame","app","elem","options","this","canvas","objects","index","push","turnFunctions","prototype","obj","kill","f","killed","splice","update","translateMouseCoor","pageX","pageY","clientX","document","body","scrollLeft","documentElement","clientY","scrollTop","offsetLeft","offsetTop","objectCount","property","parent","name","objectName","collide","pointInShape","xs","ys","findMax","minX","maxX","minY","maxY","storage","storageShapes","elementFunction","updateToModel","shape","reverse","width","firstX","content","height","firstY","updateVisual","spriteLinkReference","spriteImageReference","funcLists","sprite","link","func","image","complete","Image","onload","src","vertex","findVertex","offsetMinX","borderWidthIfBorderIsOn","offsetMaxX","offsetMinY","offsetMaxY","shadowOffsetMinX","blur","shadowOffsetMaxX","shadowOffsetMinY","shadowOffsetMaxY","offsetX","offsetY","sides","findSides","compareSide","intersect","result","maxY1","minY1","maxY2","minY2","side1","side2","hasBorder","rect","rx","ry","nx","absoluteX","ny","absoluteY","arc","minAngle","maxAngle","minRadAngle","maxRadAngle","referenceX","referenceY","vertex1","vertex2","pureCircle","ray1","ray2","side","closest","roundedRectangle","borderRadius","clipImage","imageUrl","poly","polyPoints","map","radiusCoefficient","line","notIncluded","position","point","rotatedPoints","distance","angleQuadrant","firstDistance","pointOneInFirstQuadrant","pointSecondInSecondQuadrant","pointThreeInThirdQuadrant","pointFourInFourthQuadrant","c","context","save","measureText","restore","textSize","img","imageLoaded","attachQuickMovement","velocity","cooldown","cd","addEventListener","key","setTimeout","startCursor","style","cursor","endCursor","enterCursorEvent","alreadyCursorEvent","hoverEvent","mouseInputInit","attachEvent","event","pointInObject","LargeLoop","a","pressedEvent","makeDraggable","funcDone","onDrag","draggable","funcin","funcout","mouseIn","touch","animate","timeDifference","animateFunctionReference","animation","init","timeUp","newValue","addAnimation","timeout","cancelAnimation","alreadyAnimated","find","findIndex","clearTimeout","arguments","render","clearCanvas","fillBackground","renderShape","visualInit","backgroundColor","getContext","renderPositions","sort","b","draw","clearRect","fillStyle","fillRect","beginPath","closePath","fill","preloader","maxes","createPreloader","clearPreloader","ox","oy","drawShape","createElement","drawPreloader","ceil","translate","drawImg","drawShapeKind","stroke","globalAlpha","strokeStyle","scale","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","drawRect","drawArc","drawText","drawPoly","drawLine","drawRoundedRectangle","clipImageLoaded","rotate","spriteWidth","spriteHeight","clipStartX","clipStartY","drawImage","strokeRect","moveTo","lineTo","quadraticCurveTo","br","er","fillText","addShape","addObject","addStorage","removeObject","View","ref","ref2","animatePlayerPlay","animatePlay","positionReference","playerDeck","animatePlayerDraw","animateDraw","animateLeaderboardDraw","leaderBoard","animateLeaderboardPlay","drawSpecialInfo","specialInfo","playDeck","colors","textColor","activateInfo","tc","toUpperCase","join","cancelInfo","endX","endY","Promise","card","createCard","drawDeck","startX","startY","match","drawColorChoser","choosingColor","resolveFunction","colorChooser","chooseColor","staticApp","cardSpriteColumn","cardSpriteRow","cardSpriteReference","wild","Draw4","colorReference","otherReference","handHeight","drawable","createDeck","flip","awaitDraw","cancelDraw","createHand","createLeaderboard","drawAnnouncement","configureStartGameMessage","configureUnoMessage","actionFunction","actionalPanel","turnIndicator","updateTurnIndicator","turn","numberOfLoops","fadeOut","fadeIn","updateLeaderboard","players","verifyFunction","onSelect","playerHand","action","slice","offSetY","updateCards","awaitSelection","vf","cancelSelection","deckCardOption","deck","back","flipped","changeToBack","changeClipImage","changeToFront","flipAnimation","announcementQueue","announcmentPerpetual","onAnnouncementPerpetual","onAnnoucementChanged","announcement","annoucementText","fadeOutThenFadeIn","updateAnnouncement","uno","UNO","startGameObject","activated","initiateStartGameMessage","turnOffStartGameMessage","io","Controller","canvasref","canvasstatic","userid","CopyLink","LeaveGame","view","socket","connect","query","play","emit","verify","currentTopCard","color2","action2","m","oldModel","inGame","onTurn","then","newAnnoucements","feed","newDirectives","directives","username","oldPlayer","JSON","stringify","message","addToAnnoucementQueue","code","user","latestDraw","cards","animateToPlayer","animateToLeaderBoard","oldCard","newCard","on","createActionPanel","RestartGame","winner","alert","error","Game","dispatch","useRef","url","useEffect","current","str","el","appendChild","select","execCommand","removeChild","cogoToast","success","copyToClipboard","className","alignItems","margin","Join","changeHistory","useState","loading","setLoading","joinGame","data","boxShadow","initialValues","onSubmit","handleSubmit","handleChange","handleBlur","onChange","onBlur","top","css","create","Landing","withRouter","history","createGame","Content","pathname","useLocation","path","exact","component","App","store","Boolean","window","location","hostname","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","baseAPI","baseURL","module","exports","post"],"mappings":"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","file":"static/js/main.d9b737ca.chunk.js","sourcesContent":["const {createStore} = require('redux')\n\nconst token = localStorage.getItem('token')\nconst id = localStorage.getItem('id')\nconst playerid = parseInt(localStorage.getItem('playerid'))\nconst defaultState = {\n    token,id,playerid,tempJoinID:null,joined:false,\n    loggedIn:!!token,\n}\n\nconst reducer = (state=defaultState,{id,playerid,token,type,tempJoinId})=>{\n    switch(type){\n        case 'LOG_IN':\n            localStorage.setItem('token',token)\n            localStorage.setItem('id',id)\n            localStorage.setItem('playerid',playerid)\n            return {...state,id,playerid,token,loggedIn:true}\n        case 'JOIN_LOG_IN':\n            localStorage.setItem('token',token)\n            localStorage.setItem('id',id)\n            localStorage.setItem('playerid',playerid)\n            return {...state,id,playerid,token,loggedIn:true,joined:true}\n        case 'LOG_OUT':\n            localStorage.removeItem('token')\n            localStorage.removeItem('id')\n            localStorage.removeItem('playerid')\n            return {...state,id:null,token:null,playerid:null,loggedIn:false}\n            case 'LOG_OUT_WITH_TEMP_JOIN':\n                localStorage.removeItem('token')\n                localStorage.removeItem('id')\n                localStorage.removeItem('playerid')\n                return {...state,id:null,token:null,playerid:null,loggedIn:false,tempJoinId:state.tempJoinId||tempJoinId}\n        case 'SET_TEMP_JOIN':\n            console.log(tempJoinId)\n            return {...state,tempJoinId}\n        case 'JOINED':\n            return {...state,joined:true}\n        default:\n            return{...state}\n    }\n}\n\nconst Store = createStore(reducer)\n\nexport default Store","import _ from 'lodash'\n\nconst random = (high,low) => {return Math.round(Math.random()*(high-low+1) + low);}\n\t\nconst mergeDefaultPropertyObject = (p,d,o)=>{\n\tfor(var prop in d){\n\t\tif(typeof p == 'object'){\n\t\t\tif(typeof p[prop] === 'function') o[prop] = p[prop]\n\t\t\telse if(typeof p[prop] != 'undefined') o[prop] = _.cloneDeep(p[prop]);\n\t\t\telse o[prop] = _.cloneDeep(d[prop]);\n\t\t}\n\t\telse{\n\t\t\to[prop] = _.cloneDeep(d[prop]);\n\t\t}\n\t}\n}\n\n//<---------------------GEOMETRIC FUNCTION-------------------->\n\nconst findQuadrant = (angle) => {\n\tif(angle < 90 && angle > 0) return 1;\n\tif(angle > 90 && angle < 180) return 2;\n\tif(angle > 180 && angle < 270) return 3;\n\tif(angle > 270 && angle < 360) return 4;\n}\n\nconst findDistance2Point = (x1,y1,x2,y2)=>Math.sqrt(Math.pow((x1-x2),2) + Math.pow((y1-y2),2))\n\n\nconst findAngle2Point = function(x1,y1,x2,y2){\n\t//CHECK SPECIAL CASES\n\tif(x1===x2&&y1===y2) return 0;\n\tif(x1===x2){\n\t\tif(y1 < y2) return 270;\n\t\tif(y1 > y2) return 90;\n\t} \n\tif(y1===y2){\n\t\tif(x1<x2) return 0;\n\t\tif(x2<x1) return 180;\n\t}\n\n\t//FIND QUADRANT\n\tvar dx = x2-x1; var dy = y2-y1;\n\tvar tan = Math.atan((-dy)/dx);\n\n\tif(x1<x2&&y1>y2) return radToDeg(tan);//QUADRANT 1\n\tif(x1>x2&&y1>y2) return\t180 + radToDeg(tan); //QUADRANT 2\n\tif(x1>x2&&y1<y2) return 180 + radToDeg(tan);//QUADRANT 3\n\tif(x1<x2&&y1<y2) return 360 + radToDeg(tan);//QUADRANT 4\n}\n\nconst radToDeg = (rad) => (rad*180)/Math.PI;\n\nconst degToRad = (deg) => (deg*Math.PI)/180;\n\nconst rotatePoint = (cx,cy,x,y,deg) => (deg===0||deg===360)? [x,y]: calculateRotatePoint(cx,cy,findAngle2Point(cx,cy,x,y)+deg,findDistance2Point(cx,cy,x,y));\n\nconst calculateRotatePoint = function(cx,cy,r,d){\n\tconst rad = degToRad(r);\n\n\t//IF IT'S IN SPECIAL CASE\n\tconst angleIndex = [0,90,180,270,360];\n\tconst coeffIndex = [[1,0],[0,1],[-1,0],[0,-1],[1,0]];\n\tif(angleIndex.indexOf(r) !== -1){\n\t\tconst coeff = coeffIndex[angleIndex.indexOf(r)];\n\t\treturn [cx+coeff[0]*d,cy-coeff[1]*d];\n\t}\n\treturn [cx + Math.cos(rad)*d, cy - Math.sin(rad)*d];\n}\n\n\n//<----------------------SEGMENT INTERSECTION, USED FOR OBJECT COLLISION------------------------------>\nlet findIntersection = function(s1,s2){\n\t//FIND CONSTRAINS FOR USE BEFORE INTERSECTION FUNCTION\n\tlet [x11,y11,x12,y12] = s1\n\tlet [x21,y21,x22,y22] = s2\n\tif(Math.round(x11) === Math.round(x12) || Math.round(x21) === Math.round(x22)){\n\t\t[x11,y11] = rotatePoint(0,0,x11,y11,30);\n\t\t[x12,y12] = rotatePoint(0,0,x12,y12,30);\n\t\t[x21,y21] = rotatePoint(0,0,x21,y21,30);\n\t\t[x22,y22] = rotatePoint(0,0,x22,y22,30);\n\t}\n\n\n\tconst minX1 = Math.min(x11,x12); const maxX1 = Math.max(x11,x12);\n\tconst minX2 = Math.min(x21,x22); const maxX2 = Math.max(x21,x22);\n\n\tconst slope1 =(y11-y12)/(x11-x12); \n\tconst slope2 =(y21-y22)/(x21-x22);\n\tconst coeff1 = -(x11*slope1) + y11;\n\tconst coeff2 = -(x21*slope2) + y21;\n\n\tif(slope1===slope2) return false;\n\tconst x = (coeff2 - coeff1)/(slope1 - slope2);\n\tconst y = slope1*x + coeff1;\n\tif(((x>minX1)&&(x<maxX1))&&((x>minX2)&&(x<maxX2))) return [x,y];\n\treturn false;\n}\n\n\n//<--------------------------OTHER SEGMENT FUNCTION------------------------------>\nconst findAngle3Point = (cx,cy,x1,y1,x2,y2) => Math.abs(findAngle2Point(cx,cy,x2,y2) - findAngle2Point(cx,cy,x1,y1))\n\n//FIND THE 'HEIGHT' OF A POINT TO A SEGMENT\nconst findClosestPoint = function(x,y,s){\n\tconst [x1,y1,x2,y2] = s\n\n\tlet angle = findAngle3Point(x1,y1,x,y,x2,y2);\n\tconst d = findDistance2Point(x,y,x1,y1);\n\n\tconst d1 = Math.abs(d*Math.cos(degToRad(angle)));\n\tconst d2 = Math.sqrt(Math.pow(d,2) - Math.pow(d1,2));\n\n\tif(d1 > findDistance2Point(x1,y1,x2,y2)) return false;\n\n\tangle = degToRad(findAngle2Point(x1,y1,x2,y2));\n\tconst xh = x1 + Math.cos(angle) * d1; \n\tconst yh = y1 - Math.sin(angle) * d1;\n\treturn [xh,yh,d2];\n}\n\nconst changeByDotNotation = (propertyString,object,value) => {\n\tconst propertyArray = propertyString.split(\".\")\n\tlet objectLink = object\n\tpropertyArray.forEach((e,i)=>{\n\t\tif (i === propertyArray.length - 1){\n\t\t\tif(Array.isArray(objectLink)) objectLink[parseInt(e)] = value\n\t\t\telse objectLink[e] = value\n\t\t}\n\t\telse{\n\t\t\tif(Array.isArray(objectLink)) objectLink = objectLink[parseInt(e)]\n\t\t\telse objectLink = objectLink[e]\n\t\t}\n\t})\n}\n\nconst getByDotNotation = (propertyString,object)=>{\n\tconst propertyArray = propertyString.split(\".\")\n\tlet value = object\n\tpropertyArray.forEach(e=>{\n\t\tif(Array.isArray(value)) value = value[parseInt(e)]\n\t\telse value=object[e]\n\t})\n\treturn value\n}\n\nexport {findClosestPoint,findAngle3Point,findAngle2Point,findIntersection,calculateRotatePoint,random,\nmergeDefaultPropertyObject,findQuadrant,findDistance2Point,radToDeg,degToRad,rotatePoint,changeByDotNotation,getByDotNotation}","/* eslint-disable no-fallthrough */\n/* eslint-disable no-unused-vars */\n//LIGHT LIBRARY IS DEVELOPED BY LONG TRAN\n//COPYRIGHT 2020, ALL RIGHTS RESERVED\n\nimport {getByDotNotation, changeByDotNotation , mergeDefaultPropertyObject, findDistance2Point, findIntersection, rotatePoint, degToRad, findAngle2Point ,findClosestPoint, calculateRotatePoint, radToDeg} from './util/util'\n\nlet lght = {};\n\n//Config\nlght.inputReference = {};\nlght.inputReference.movementIndex = \n    ['w','a','s','d','ArrowUp','ArrowLeft','ArrowDown','ArrowRight'];\n\nlght.inputReference.coeffIndex = \n    [[0,-1],[-1,0],[0,1],[1,0],[0,-1],[-1,0],[0,1],[1,0]];\n\nlght.defaultAppConfig = {\n    initFunctions:[\"visualInit\",'mouseInputInit'],\n    animateFunctions:[\"animate\",\"update\",\"render\"],\n    lastFrame:undefined,\n    constantRender:true,\n    background:\"black\",\n    pixelDensity:1\n}\n\nlght.defaultObjectProps = {\n    shapes:[],\n    animations:[],\n    hoverEvents:[],\n    animationCount:0,\n    initFunctions:[\"createPreloader\"],\n    static:true,\n    x:0,y:0,\n    rotation:0, \n    positionIndicator:false,\n    display:true,opacity:1,\n    mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[],\n    zIndex:0\n}\n\nlght.defaultStorageProps = {\n    spacing:0,\n    direction:'row',\n    model:[]\n}\n\nlght.defaultShapeOptions = {\n    kind:\"rect\",\n    animations:[],\n    hoverEvents:[],\n    animationCount:0,\n    x:0,y:0,rotation:0,scaleX:1,scaleY:1,\n    color:\"black\",display:true,\n    lineWidth:1, opacity:1,\n    borderColor:'yellow',\n    borderWidth:10,\n    border:false, borderOnly:false,\n    shadow:null,mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[]\n}\n\nlght.defaultRectOptions = {\n    w:0,h:0,clip:false,\n    clipImageLink:null,clipCanvas:null,\n    clipSpriteSheetX:null,clipSpriteSheetY:null,\n    spriteLengthX:null,spriteLengthY:null\n}\n\nlght.defaultArcOptions = {\n    rad:0, arcDegree:360,\n}\n\nlght.defaultTextOptions = {\n    textAlign:'left',\n    font:'10px Ariel',\n    text:'Hello World'\n}\n\nlght.defaultImgOptions = {\n    spriteLink:null,\n    drawWidth:null,drawHeight:null,\n    loadedFunction:undefined\n}\n\nlght.defaultPolyOptions = {\n    points:[],\n    specialPolygon:false,\n    numberOfSide:0,\n    radius:10,\n    clip:false,\n    clipImageLink:null\n}\n\nlght.defaultLineOptions = {\n    points:[]\n}\n\n//Main\nlght.apps = [];\n\nlght.gameloop = {\n    list:[],\n    frameTime:undefined,\n    lastFrame:undefined\n};\n\nlght.gameloop.loop = (time)=>{\n    requestAnimationFrame(lght.gameloop.loop);\n\n    for(var i = 0;i<lght.gameloop.list.length;i++){\n        lght.gameloop.list[i](lght.apps[i]);\n    }\n    \n    if(time!==undefined){\n        lght.lastFrame = lght.frameTime;\n        lght.frameTime = time;\n    }\n}\n\n\n\nlght.gameloop.loop();\n\nlght.app = function(elem,options) {\n\n    this.options = {};\n    mergeDefaultPropertyObject(options,lght.defaultAppConfig,this.options)        \n    this.canvas = elem;\n    this.options.initFunctions.forEach((e)=>this[e]())\n    \n    this.objects = []\n    this.index = lght.gameloop.list.length\n    lght.gameloop.list.push((this.options.constantRender)?this.turnFunctions:()=>{})\n    lght.apps.push(this);\n}\n\nlght.app.prototype.turnFunctions = (obj)=>{\n    obj.options.animateFunctions.forEach((e)=>obj[e]())\n}\n\nlght.app.prototype.kill = function(){\n    this.objects.forEach(e=>{\n        e.shapes.forEach(f=>f.kill())\n        e.kill()\n    })\n    this.killed = true\n    lght.gameloop.list.splice(this.index,1)\n    lght.apps.splice(this.index,1)\n    \n}\n\nlght.app.prototype.update = function(){\n    this.objects.forEach(e => {\n        if(typeof e.update === 'function') e.update(e)\n    });\n}\n\nlght.app.prototype.translateMouseCoor = function(e){\n\tvar x;\n\tvar y;\n\tif (e.pageX || e.pageY) { \n\t\tx = e.pageX;\n\t\ty = e.pageY;\n\t}\n\telse { \n\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft; \n\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop; \n\t} \n\tx -= this.canvas.offsetLeft;\n\ty -= this.canvas.offsetTop;\n\treturn [x*this.pixelDensity,y*this.pixelDensity];\n}\n\n//Object\n\n//TOTAL OBJECT COUNT, USED TO PRODUCE ID\nlght.objectCount = 0;\n\nlght.object = class {\n    constructor(property,parent){\n        lght.objectCount++\n        this.id = lght.objectCount;\n        this.parent = parent;\n        this.parent.objects.push(this)\n        mergeDefaultPropertyObject\n        (property,lght.defaultObjectProps,this);    \n        this.initFunctions.forEach((e)=>this[e]())        \n        this.name = (property.objectName)?property.objectName:`Object ${this.id}`\n    }\n    \n    kill(){\n        this.parent.objects.splice(this.parent.objects.indexOf(this),1)\n    }\n\n    collide(obj){\n        for(let s1 of this.shapes){\n            for (let s2 of obj.shapes){\n                if(s1.collide(s2)) return true\n            }\n        }\n\n        return false\n    }\n\n    pointInObject(x,y){\n        for(let s1 of this.shapes){\n           if(s1.pointInShape(x,y)) return true\n        }\n        return false\n    }\n\n    findMax(){\n        let xs = []\n        let ys = []\n        this.shapes.forEach(s=>{\n            let [minX,maxX,minY,maxY] = s.findMax()\n            xs = [...xs,minX,maxX]\n            ys = [...ys,minY,maxY]\n        })\n        return [Math.min(...xs),Math.max(...xs),Math.min(...ys),Math.max(...ys)]\n    }\n\n    findThePositionThatIsRelativeToThisObjectFromAbsolutePosition(x,y){\n        return [x-this.x,y-this.y]\n    }\n}\n\nlght.storage = class extends lght.object{\n    constructor(property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultStorageProps,this)\n        this.storageShapes = []\n        this.model = property.model || []\n        this.elementFunction = property.elementFunction || null\n        this.updateToModel()\n    }\n    updateToModel(){\n        let model =[...this.model]\n        this.storageShapes.forEach(e=>{e.kill();})\n        this.storageShapes = []\n        if(!model.length) return\n        if(!this.elementFunction) return\n        let shape\n        let totalLength\n        switch(this.direction){\n            case 'row-reverse':\n                model.reverse()\n            case 'row':\n                shape = this.elementFunction(model[0],0)\n                const w = shape.width\n                shape.kill()\n                totalLength = w*model.length + this.spacing*(model.length-1)\n                const firstX = -totalLength/2 + 0.5*w\n                model.forEach((content,i)=>{\n                    const shape = this.elementFunction(content,i)\n                    this.storageShapes.push(shape)\n                    shape.x = firstX + i*w + i*this.spacing\n                })\n                break;\n            case 'column-reverse':\n                model.reverse()\n            case 'column':\n                shape = this.elementFunction(model[0],0)\n                const h = shape.height\n                shape.kill()\n                totalLength = h*model.length + this.spacing*(model.length-1)\n                const firstY = -totalLength/2 + 0.5*h\n                model.forEach((content,i)=>{\n                    const shape = this.elementFunction(content,i)\n                    this.storageShapes.push(shape)\n                    shape.y = firstY +( i*h) + (i*this.spacing)\n                })\n                break\n            default:\n                break;\n        }\n        this.updateVisual()\n\n    }\n}\n\nlght.spriteLinkReference = []\nlght.spriteImageReference = []\nlght.funcLists = []\n\nlght.sprite = (link,func)=> {\n    const index = lght.spriteLinkReference.indexOf(link)\n    if(index !== -1){\n        const image = lght.spriteImageReference[index]\n        lght.funcLists[index].push(func)\n        if(image.complete) requestAnimationFrame(func)\n        return image\n    }\n    else{\n        const image = new Image()\n        const id = lght.spriteImageReference.length\n        image.onload = ()=>{\n            lght.funcLists[id].forEach(e=>e())\n        }\n        lght.funcLists[id] = []\n        lght.funcLists[id].push(func)\n        image.src = link\n        lght.spriteLinkReference.push(link)\n        lght.spriteImageReference.push(image)\n        return image\n    }\n}\n\nlght.shape = class {\n    constructor (property,parent) {\n        this.kind = property.kind\n        this.parent = parent;\n        this.parent.shapes.push(this);\n        mergeDefaultPropertyObject\n        (property,lght.defaultShapeOptions,this);\n    }\n\n    kill (){\n        const index = this.parent.shapes.indexOf(this)\n        if(index<0) return\n        this.parent.shapes.splice(index,1);\n        this.parent.updateVisual()\n    }\n\n    get absoluteX(){\n        return this.x + this.parent.x\n    }\n\n    get absoluteY(){\n        return this.y + this.parent.y\n    }\n\n    get hasBorder(){\n        return this.border||this.borderOnly\n    }\n\n    get width(){\n        return (((this.hasBorder)?(this.w + this.borderWidth):this.w))*this.scaleX\n    }\n\n    get height(){\n        return ((this.hasBorder)?this.h + this.borderWidth:this.h)*this.scaleY\n    }\n\n    get outOfBound(){\n        let [minX,maxX,minY,maxY] = this.findMax();\n        let {width,height} = this.parent.parent.canvas;\n        return (minX > width || maxX < 0 || minY > height || maxY < 0) \n    }\n\n    findVertex(){\n        return []\n    }\n\n    findMax(){\n        const vertex = this.findVertex()\n        const xs = []\n        const ys = []\n\n        vertex.forEach(([x,y])=>{\n            xs.push(x); ys.push(y)\n        })\n\n        let offsetMinX = - this.borderWidthIfBorderIsOn \n        let offsetMaxX = this.borderWidthIfBorderIsOn \n        let offsetMinY = - this.borderWidthIfBorderIsOn \n        let offsetMaxY = this.borderWidthIfBorderIsOn \n\n        if(this.shadow){\n            let shadowOffsetMinX = -this.shadow.blur -2\n            let shadowOffsetMaxX = this.shadow.blur + 2\n            let shadowOffsetMinY = -this.shadow.blur -2\n            let shadowOffsetMaxY = this.shadow.blur +2\n            if(this.shadow.offsetX){\n                shadowOffsetMinX += this.shadow.offsetX\n                shadowOffsetMaxX += this.shadow.offsetX\n            }\n            if(this.shadow.offsetY){\n                shadowOffsetMinY += this.shadow.offsetY\n                shadowOffsetMaxY += this.shadow.offsetY\n            }\n            if(shadowOffsetMinX<0) offsetMinX += shadowOffsetMinX\n            if(shadowOffsetMaxX>0) offsetMaxX += shadowOffsetMaxX\n            if(shadowOffsetMinY<0) offsetMinY += shadowOffsetMinY\n            if(shadowOffsetMaxY>0) offsetMaxY += shadowOffsetMaxY\n        }\n\n        return [\n            Math.min(...xs) + offsetMinX,\n            Math.max(...xs) + offsetMaxX,\n            Math.min(...ys) + offsetMinY,\n            Math.max(...ys) + offsetMaxY\n        ]\n    }\n\n    get borderWidthIfBorderIsOn(){\n        if(this.border||this.borderOnly) return this.borderWidth\n        return 0\n    }\n\n    pointInShape(x,y){\n        let sides = this.findSides()\n        const [minX,maxX,minY,maxY] = this.findMax()\n        let distance = findDistance2Point(x,y,maxX,maxY)\n        let compareSide = [x,y,x+distance,y]\n        let intersect = 0\n        if(x>maxX||x<minX||y>maxY||y<minY) return false\n        sides.forEach(e=>{\n            if(findIntersection(e,compareSide)) intersect++\n        })\n        return !(intersect%2 === 0)\n    }\n\n    findSides(){\n        let vertex = this.findVertex()\n        let result = []\n        for(let i = 0;i<vertex.length;i++){\n            result.push([...vertex[i],...((vertex[i+1])?vertex[i+1]:vertex[0])])\n        }\n        return result\n    }\n\n    collide(shape){\n        if(shape.kind==='arc') return shape.collide(this)\n        let [maxX1,minX1,maxY1,minY1] = this.findMax()\n        let [maxX2,minX2,maxY2,minY2] = shape.findMax()\n        if (((minX1 < minX2) && (maxX1 > maxX2) && (minY1<minY2) && (maxY1>maxY2)) || ((minX2 < minX1) && (maxX2 > maxX1) && (minY2<minY1) && (maxY2>maxY1))) return true\n\n        let side1 = this.findSides()\n        let side2 = shape.findSides()\n\n        for (let s1 of side1){\n            for (let s2 of side2){\n                if(findIntersection(s1,s2)) return true\n            }\n        }\n        return false\n    }\n}\n\nlght.rect = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultRectOptions,this)\n    }\n\n    findVertex(){\n        let reference = [[1,-1],[-1,-1],[-1,1],[1,1]]\n        let result = []\n        reference.forEach(([rx,ry])=>{\n            let nx = this.absoluteX + 0.5*this.width*rx\n            let ny = this.absoluteY + 0.5*this.height*ry\n            result.push(rotatePoint(this.absoluteX,this.absoluteY,nx,ny,this.rotation))\n        })\n        return result\n    }\n}\n\nlght.arc = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultArcOptions,this)\n    }\n\n    get radius(){\n        return (this.hasBorder)?this.rad + this.borderWidth : this.rad\n    }\n\n    get minAngle(){\n        return this.rotation\n    }\n\n    get maxAngle(){\n        return this.rotation + this.arcDegree\n    }\n\n    get minRadAngle(){\n        return degToRad(this.minAngle)\n    }\n\n    get maxRadAngle(){\n        return degToRad(this.maxAngle)\n    }\n\n    get pureCircle(){\n        return this.arcDegree===360\n    }\n\n    pointInShape(x,y){\n        var angle = findAngle2Point(this.absoluteX,this.absoluteY,x,y)\n        if (angle>this.minAngle && angle<this.maxAngle){\n            if(findDistance2Point(this.absoluteX,this.absoluteY,x,y)<=this.radius) return true\n        }\n        return false\n    }\n\n    findMax(){\n        let result = [this.absoluteX-this.radius,this.absoluteX+this.radius,this.absoluteY-this.radius,this.absoluteY+this.radius]\n        let xs = [this.absoluteX,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius]\n        let ys = [this.absoluteY,this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius]\n        if(!this.pointInShape(result[0],this.absoluteY)) result[0] = Math.min(...xs) - this.borderWidthIfBorderIsOn/2;\n        if(!this.pointInShape(result[1],this.absoluteY)) result[1] = Math.max(...xs) + this.borderWidthIfBorderIsOn/2;\n        if(!this.pointInShape(this.absoluteX,result[2])) result[2] = Math.min(...ys) - this.borderWidthIfBorderIsOn/2;\n        if(!this.pointInShape(this.absoluteX,result[3])) result[3] = Math.max(...ys) + this.borderWidthIfBorderIsOn/2;\n        return result\n    }\n\n    findVertex(){\n        let [minX,maxX,minY,maxY] = this.findMax()\n        let referenceX = [this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteX+this.radius,this.absoluteX-this.radius,this.absoluteX]\n        let referenceY = [this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius,this.absoluteY+this.radius,this.absoluteY-this.radius,this.absoluteY]\n\n        return [\n            [minX,referenceY[referenceX.indexOf(minX)]],\n            [maxX,referenceY[referenceX.indexOf(maxX)]],\n            [referenceX[referenceY.indexOf(minY)],minY],\n            [referenceX[referenceY.indexOf(maxY)],maxY],\n        ]\n    }\n\n    fidnSides(){\n        if(this.arcDegree === 360) return false\n        return [\n            [this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.minRadAngle)*this.radius],\n            [this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius]\n        ]\n    }\n\n    collide(shape){\n        let vertex1 = this.findVertex()\n        let vertex2 = shape.findVertex()\n\n        for(let [x,y] of vertex1){\n            if(shape.pointInShape(x,y)) return true\n        }\n        for(let [x,y] of vertex2){\n            if(this.pointInShape(x,y)) return true\n        }\n        if(shape.kind==='arc'){                \n            //when checking for intersection between 2 arcs, there are 2 cases\n            //Case 1: they are both circles. In this case the distance between the 2 center have to be smaller or equal to\n            //sum of radius for them to intersect\n\n            if(this.pureCircle && shape.pureCircle){\n                return findDistance2Point(this.absoluteX,this.absoluteY,shape.absoluteX,shape.absoluteY) <= this.radius + shape.radius\n            }\n\n            //Case 2: either of them are arcs\n            //In these cases, there are 2 scenarios\n            //Scenario 1: one of the vertexes will be inside the circle, this is easy to check\n            //Scenario 2: none of the vertex is inside the circle. There is only one possible explanation for this. In this case, check if \n            //the \"ray\" that connect the 2 center is inside both arcs, then check that the length of the ray is less than the length of both radius\n\n            if(findDistance2Point(this.absoluteX,this.absoluteY,shape.absoluteX,shape.absoluteY) > this.radius + shape.radius) return false\n\n            let ray1 = findAngle2Point(this.absoluteX,this.absoluteY,shape.absoluteX,shape.absoluteY)\n            let ray2 = findAngle2Point(shape.absoluteX,shape.absoluteY,this.absoluteX,this.absoluteY)\n            return ((ray1<this.maxAngle&&ray1>this.minAngle)&&(ray2<shape.maxAngle&&ray2>shape.minAngle))\n        }\n        else{\n            let side = shape.findSides()\n\n            for(let s of side){\n                let closest = findClosestPoint(this.absoluteX,this.absoluteY,s)\n                if(closest){\n                    if (this.pointInShape(closest[0],closest[1])) return true\n                }\n            }\n            return false\n        }\n    }\n}\n\nlght.roundedRectangle = class extends lght.rect{\n    constructor(property,parent){\n        super(property,parent)\n        this.borderRadius = (property.borderRadius) || 0\n        if(this.clip){\n            if(property.clipCanvas){\n                this.clipImage = property.clipCanvas;\n                this.clipCanvas=true\n            }\n            else{\n                this.clipImage = lght.sprite(this.clipImageLink,()=>{\n                    this.parent.updateVisual()\n                })\n            }\n        }\n    }\n\n    get clipImageLoaded(){\n        if(!this.clip) return false\n        if(this.clipCanvas) return true\n        return this.clipImage.complete\n    }\n\n    changeClipImage(imageUrl){\n        this.clipImage = lght.sprite(imageUrl,()=>{\n            this.parent.updateVisual()\n        })\n    }\n}\n\nlght.poly = class extends lght.shape{\n    constructor(property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultPolyOptions,this)\n        if(this.clip){\n            this.clipImage = lght.sprite(this.clipImageLink,()=>{\n                this.parent.updateVisual()\n            })\n        }\n    }\n\n    get clipImageLoaded(){\n        if(!this.clip) return false\n        return this.clipImage.complete\n    }\n\n    get polyPoints(){\n        if(!this.specialPolygon) return this.points\n        const radiusCoefficient = 360/this.numberOfSide\n        const result = []\n        for(let i = 0;i<this.numberOfSide;i++){\n            result.push(calculateRotatePoint(0,0,radiusCoefficient*i,this.radius))\n        }\n        return result\n    }  \n\n    get width(){\n        return this.findMax()[1] - this.findMax()[0]\n    }\n\n    get height(){\n        return this.findMax()[3] - this.findMax()[2]\n    }\n\n    get sideLength(){\n        if(!this.specialPolygon) return null\n        const radiusCoefficient = degToRad(360/this.numberOfSide)\n        return Math.sqrt(2*Math.pow(this.radius,2) - 2*Math.pow(this.radius,2)*Math.cos(radiusCoefficient))\n    }\n\n    findVertex(){\n        return this.polyPoints.map(([x,y])=>rotatePoint(this.absoluteX,this.absoluteY,x+this.absoluteX,y+this.absoluteY,this.rotation))\n    }\n}\n\nlght.line = class extends lght.shape{\n    constructor(property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultLineOptions,this)\n    }\n\n    get rotatedPoints(){\n        return this.points.map(([x,y])=>(rotatePoint(this.absoluteX,this.absoluteY,x+this.absoluteX,y+this.absoluteY,this.rotation)))\n    }\n\n    findVertex(){\n        const result = []\n        const notIncluded = ([x,y]) => {\n            for (const position of result) {\n                const [x2,y2] = position\n                if(Math.round(x)===Math.round(x2) && Math.round(y)===Math.round(y2)) return false\n            }\n            return true\n        }\n        const point = [...this.rotatedPoints]\n        point.forEach(([x1,y1],index)=>{\n            if (index===point.length-1) return\n            const [x2,y2] = this.rotatedPoints[index+1]\n            const distance = findDistance2Point(x1,y1,x2,y2)\n            const tan = Math.atan((this.lineWidth/2)/distance)\n            const angle = findAngle2Point(x1,y1,x2,y2)\n            const angleQuadrant = radToDeg(tan)+angle\n            const firstDistance = Math.sqrt(distance*distance + (0.5*this.lineWidth)*(0.5*this.lineWidth))\n            const pointOneInFirstQuadrant = calculateRotatePoint(x1,y1,angleQuadrant,firstDistance)\n            const pointSecondInSecondQuadrant = calculateRotatePoint(...pointOneInFirstQuadrant,180+angle,distance)\n            const pointThreeInThirdQuadrant = calculateRotatePoint(...pointSecondInSecondQuadrant,270+angle,distance)\n            const pointFourInFourthQuadrant = calculateRotatePoint(...pointThreeInThirdQuadrant,angle,distance)\n            if(notIncluded(pointFourInFourthQuadrant)) result.push(pointFourInFourthQuadrant)\n            if(notIncluded(pointOneInFirstQuadrant)) result.push(pointOneInFirstQuadrant)\n            if(notIncluded(pointSecondInSecondQuadrant)) result.push(pointSecondInSecondQuadrant)\n            if(notIncluded(pointThreeInThirdQuadrant)) result.push(pointThreeInThirdQuadrant)\n        })\n        return result\n    }\n}\n\nlght.text = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultTextOptions,this)\n    }\n\n    get textSize(){\n        var c = lght.apps[0].context;\n        c.save();\n        c.font = this.font;\n        var width = c.measureText(this.text).width;\n        var height = c.measureText('gM').width;\n        c.restore();\n        return [width,height];\n    }\n\n    get w(){\n        return this.textSize[0] + this.borderWidthIfBorderIsOn\n    }\n\n    get h(){\n        return this.textSize[1] + this.borderWidthIfBorderIsOn\n    }\n\n    findVertex(){\n        let reference = [[1,-1],[-1,-1],[-1,0.5],[1,0.5]]\n        let result = []\n        reference.forEach(([rx,ry])=>{\n            let nx = this.absoluteX + 0.5*this.width*rx\n            let ny = this.absoluteY + 0.5*this.height*ry\n            result.push(rotatePoint(this.absoluteX,this.absoluteY,nx,ny,this.rotation))\n        })\n        return result\n    }\n}\n\nlght.img = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultImgOptions,this)\n        this.sprite = lght.sprite(this.spriteLink,()=>{\n            if(this.loadedFunction) this.loadedFunction()\n            this.parent.updateVisual()\n        })\n    }\n\n    get imageLoaded(){\n        return this.sprite.complete\n    }\n\n    get w(){\n        if(this.drawWidth) return this.drawWidth\n        if(this.imageLoaded){\n            if(this.drawHeight) return (this.drawHeight*this.sprite.width)/this.sprite.height\n            return this.sprite.width\n        }\n        return 0\n    }\n\n    get h(){\n        if(this.drawHeight) return this.drawHeight\n        if(this.imageLoaded){\n            if(this.drawWidth) return (this.drawWidth*this.sprite.height)/this.sprite.width\n            return this.sprite.height\n        }\n        return 0 \n    }\n\n    findVertex(){\n        let reference = [[1,-1],[-1,-1],[-1,1],[1,1]]\n        let result = []\n        reference.forEach(([rx,ry])=>{\n            let nx = this.absoluteX + 0.5*this.width*rx\n            let ny = this.absoluteY + 0.5*this.height*ry\n            result.push(rotatePoint(this.absoluteX,this.absoluteY,nx,ny,this.rotation))\n        })\n        return result\n    }\n}\n\n//Input\n //<--------------KEYBOARD INPUT GO HERE------------------->\n lght.object.prototype.attachQuickMovement = function (velocity,cooldown,func) {\n    var cd = true; var obj = this\n    document.addEventListener('keydown',function(key){\n        if(cd){\n            if(lght.inputReference.movementIndex.indexOf(key.key)!==-1){\n                obj.x += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][0]*velocity;\n                obj.y += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][1]*velocity;\n                obj.updateVisual();\n                if(func) func(key,obj);\n                cd = false; \n                setTimeout(()=>{cd = true;},cooldown)\n            }\n        }\n    })\n}\n\n//<--------------MOUSE INPUT GO HERE---------------------->\n\nlght.app.prototype.startCursor = function(){\n    this.canvas.style.cursor = 'pointer'\n}\n\nlght.app.prototype.endCursor = function(){\n    this.canvas.style.cursor = 'default'\n}\n\nlght.object.prototype.enterCursorEvent = function(){\n    if(this.alreadyCursorEvent) return\n    this.alreadyCursorEvent = true\n    this.hoverEvent(()=>this.parent.startCursor(),()=>this.parent.endCursor())\n}\n\nlght.shape.prototype.enterCursorEvent = function(){\n    if(this.alreadyCursorEvent) return\n    this.alreadyCursorEvent = true\n    this.hoverEvent(()=>this.parent.parent.startCursor(),()=>this.parent.parent.endCursor())\n}\n\nlght.app.prototype.mouseInputInit = function(){\n    const attachEvent = (e,event)=>{\n        if(this.killed) return \n        const [x,y] = this.translateMouseCoor(e)\n        if(this.objects.length === 0) return\n        for (let i = this.objects.length;i--;i>=0){\n            const obj = this.objects[i]\n            if(obj[event].length === 0) continue\n            if(!obj.display) continue\n            if(obj.pointInObject(x,y)){\n                for(let func of obj[event])( func(x,y))\n                break;\n            }\n        }\n        LargeLoop:for (let i = this.objects.length;i--;i>=0){\n            const obj = this.objects[i]\n            if(obj.shapes.length === 0) continue\n            if(!obj.display) continue\n            for(let a = obj.shapes.length;a--;a>=0){\n                const shape = obj.shapes[a]\n                if(shape[event].length === 0) continue\n                if(!shape.display) continue\n                if(shape.pointInShape(x,y)){\n                    for(let func of shape[event]){func(x,y)}\n                    break LargeLoop;\n                }\n            }\n        }\n    }\n\n    this.canvas.addEventListener('mouseup',(e)=>attachEvent(e,'mouseUpEvent'))\n    this.canvas.addEventListener('mousemove',(e)=>attachEvent(e,'mouseMoveEvent'))\n    this.canvas.addEventListener('mousedown',(e)=>attachEvent(e,'mouseDownEvent'))\n}\n\n//PRESS EVENT FOR AN APP\nlght.object.prototype.pressedEvent = function (func) {\n    this.enterCursorEvent()\n    this.mouseUpEvent.push(func)\n}\n\n//MAKE AN OBJECT DRAGGABLE\nlght.object.prototype.makeDraggable = function (func,funcDone) {\n    this.enterCursorEvent()\n    this.onDrag = false; var obj = this; this.draggable = true;\n    var rx = 0; var ry = 0; \n\n    this.mouseDownEvent.push((x,y)=>{\n        if(obj.draggable){\n            if(!obj.onDrag){\n                obj.onDrag = true;\n                rx = x - obj.x; ry = y - obj.y;\n            }\n        }\n    })\n\n    document.addEventListener('mousemove', (e) => {\n        var c = this.parent.translateMouseCoor(e);\n        if(c[0] < 0 || c[0] >this.parent.canvas.width || c[1] < 0 || c[1] > this.parent.canvas.height) obj.onDrag = false\n        if(obj.onDrag){\n            obj.x = c[0] - rx; obj.y = c[1] - ry;\n            obj.updateVisual();\n            if(typeof func == 'function') func(obj);\n        }\n    })\n\n    this.parent.canvas.addEventListener('mouseup', (e) => {\n        if(obj.onDrag){\n            obj.onDrag = false;\n            if(funcDone) funcDone()\n        }\n    })\n}\n\n//HOVER EVENT\nlght.object.prototype.hoverEvent = function (funcin,funcout)  {\n    this.mouseIn = false; var obj = this;\n    this.hoverEvents.push([funcin,funcout])\n    if(this.hoverEvents.length === 1){\n        this.enterCursorEvent()\n        document.addEventListener('mousemove', (e)=>{\n            var c = this.parent.translateMouseCoor(e);\n            if(c[0] < 0 || c[0] >this.parent.canvas.width || c[1] < 0 || c[1] > this.parent.canvas.height){\n                obj.mouseIn = false;\n                for(let event of this.hoverEvents){\n                    if(event[1]) event[1]() \n                }\n                obj.updateVisual()\n                return;\n            }\n            var touch = obj.pointInObject(c[0],c[1]);\n            if(obj.mouseIn && (!touch)){\n                obj.mouseIn = false; \n                for(let event of this.hoverEvents){\n                    if(event[1]) event[1]() \n                }\n                obj.updateVisual()\n            }\n            \n        })\n        this.mouseMoveEvent.push(()=>{\n            if(!obj.mouseIn){\n                obj.mouseIn = true;\n                for(let event of this.hoverEvents){\n                    if(event[0]) event[0]() \n                }\n                obj.updateVisual()\n            }\n        })\n    }\n}\n\n//INPUT FOR SHAPES\nlght.object.prototype.attachQuickMovement = function (velocity,cooldown,func) {\n    var cd = true; var obj = this\n    document.addEventListener('keydown',function(key){\n        if(cd){\n            if(lght.inputReference.movementIndex.indexOf(key.key)!==-1){\n                obj.x += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][0]*velocity;\n                obj.y += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][1]*velocity;\n                obj.updateVisual();\n                if(func) func(key,obj);\n                cd = false; \n                setTimeout(()=>{cd = true;},cooldown)\n            }\n        }\n    })\n}\n\n//<--------------MOUSE INPUT GO HERE---------------------->\n\n//PRESS EVENT FOR AN APP\nlght.shape.prototype.pressedEvent = function (func) {\n    this.enterCursorEvent()\n    this.mouseUpEvent.push(func)\n}\n\n//HOVER EVENT\nlght.shape.prototype.hoverEvent = function (funcin,funcout)  {\n    this.mouseIn = false; var obj = this;\n    this.hoverEvents.push([funcin,funcout])\n    if(this.hoverEvents.length === 1){\n        this.enterCursorEvent()\n        document.addEventListener('mousemove', (e)=>{\n            if(!this.display) return\n            var c = this.parent.parent.translateMouseCoor(e);\n            if(c[0] < 0 || c[0] >this.parent.parent.canvas.width || c[1] < 0 || c[1] > this.parent.parent.canvas.height){\n                obj.mouseIn = false; \n                for(let event of this.hoverEvents){\n                    if(event[1]) event[1]() \n                }\n                obj.parent.updateVisual();\n                return;\n            }\n            var touch = obj.pointInShape(c[0],c[1]);\n            if(obj.mouseIn && (!touch)){\n                obj.mouseIn = false;\n                for(let event of this.hoverEvents){\n                    if(event[1]) event[1]() \n                }\n                obj.parent.updateVisual();\n            }\n            \n        })\n        this.mouseMoveEvent.push(()=>{\n            if(!obj.mouseIn){\n                obj.mouseIn = true;\n                for(let event of this.hoverEvents){\n                    if(event[0]) event[0]() \n                }\n                obj.parent.updateVisual()\n            }\n        })\n    }\n}\n\n//Animation\nlght.app.prototype.animate = function() {\n    if(lght.frameTime !== undefined && lght.lastFrame !== undefined){\n        let timeDifference = lght.frameTime - lght.lastFrame\n        this.objects.forEach(e => {\n            e.animate(timeDifference);\n            e.shapes.forEach(a => {\n                a.animate(timeDifference)\n            })\n        });\n    }\n}\n\nconst addAnimation = function(property,value,time,func){\n    this.animationCount++;\n    let id = this.animationCount;\n\n    let timeout = setTimeout(()=>{\n        changeByDotNotation(property,this,value)\n        this.cancelAnimation(id)\n        if(this.parent.static !== undefined) this.parent.static = true\n        else this.static = true\n        if(func) func();\n    },time)\n\n    const alreadyAnimated = this.animations.find((animation)=>animation[0] === property)\n    if(alreadyAnimated){\n        this.cancelAnimation(alreadyAnimated[6])\n    }\n\n    if(this.parent.static !== undefined) this.parent.static = false\n    else this.static = false\n    this.animations.push([property,value,getByDotNotation(property,this),time,timeout,func,id]);\n    return id;\n}\n\nconst cancelAnimation = function(){\n    for(let id of [...arguments]){\n        let animation = this.animations.find(e=>e[6] === id)\n        let index = this.animations.findIndex(e=>e[6]===id)\n        if(!animation) return false\n        clearTimeout(animation[4])\n        this.animations.splice(index,1)\n    }\n}\n\nconst animate = function (time){\n    let obj = this\n    this.animations.forEach(animation=>{\n        let [property,value,init,timeUp] = animation\n        let newValue = getByDotNotation(property,obj) + (time/timeUp)*(value-init)\n        if(init < value && newValue > value) newValue = value\n        if(init>value && newValue < value) newValue = value\n        changeByDotNotation(property,obj,newValue)\n    })\n}\n\nlght.animateFunctionReference = {\n    animate,\n    addAnimation,\n    cancelAnimation,\n}\n\nfor(var prop in lght.animateFunctionReference){\n    lght.object.prototype[prop] = lght.animateFunctionReference[prop];\n    lght.shape.prototype[prop] = lght.animateFunctionReference[prop];\n}\n\n//Draw\nlght.app.prototype.render = function(){\n    this.clearCanvas();\n    this.fillBackground();\n    this.renderShape();\n}\n\nlght.app.prototype.visualInit = function(){\n    this.backgroundColor = this.options.background;\n    this.context = this.canvas.getContext(\"2d\");\n}\n\nlght.app.prototype.renderShape = function(){\n    this.renderPositions();\n\n    this.objects.sort((a,b)=>a.zIndex -b.zIndex).forEach(obj=>{\n        obj.draw();\n    })\n}\n\n//<-------------------BASIC CANVAS STUFF---------------------->\n//CLEARING CANVAS AND BACKGROUND COLOR\nlght.app.prototype.clearCanvas = function(){\n    this.context.save(); \n    this.context.clearRect(0,0,this.canvas.width,this.canvas.height); \n    this.context.restore();\n}\n\nlght.app.prototype.fillBackground = function(){\n    if(this.backgroundColor!=='none'){\n        this.context.save(); \n        this.context.fillStyle = this.backgroundColor;\n        this.context.fillRect(0,0,this.canvas.width,this.canvas.height);\n        this.context.restore();\n    }\n}\n\n/*POSITION INDICATOR FUNCTIONS GO HERE\nDraw all position indicators at once to save performance from context state change*/\nlght.app.prototype.renderPositions = function(){\n    this.context.save();\n    this.context.fillStyle = 'red';\n\n    this.objects.forEach(({x,y,positionIndicator}) => {\n        if(!positionIndicator) return\n        this.context.beginPath()\n        this.context.arc(x,y,5,0,2*Math.PI)\n        this.context.closePath()\n        this.context.fill()\n    });\n    \n    this.context.restore();\n}\n\n\n/* SHAPE PRERENDERING FUNCTIONS GO HERE\nShape prerendering prerender shapes on canvases to save performance*/\n\nlght.object.prototype.updateVisual = function(){\n    //If the dimension changes a new canvas have to be created\n    var max = this.findMax();\n    for(var i = 0;i<max.length;i++){\n        if(Math.round(max[i])!==Math.round(this.preloader.maxes[i])){\n            this.createPreloader(); return;\n        }\n    }\n\n    this.clearPreloader();\n\n    this.shapes.forEach(s=>{\n        let x = this.preloader.ox + s.x\n        let y = this.preloader.oy + s.y\n        lght.drawShape(this.preloader.context,x,y,s,)\n    })\n    if(!this.parent.options.constantRender) this.parent.turnFunctions(this.parent)\n}\n\nlght.object.prototype.clearPreloader = function(){\n    this.preloader.context.clearRect(0,0,this.preloader.width,this.preloader.height);\n}\n\nlght.object.prototype.createPreloader = function(){\n    this.preloader = document.createElement('canvas');\n    \n    this.preloader.maxes = this.findMax();\n    let [minX,maxX,minY,maxY] = this.preloader.maxes\n\n    this.preloader.width = maxX-minX;\n    this.preloader.height = maxY-minY;\n\n    this.preloader.ox = this.x - minX;\n    this.preloader.oy = this.y - minY;\n\n    this.preloader.context = this.preloader.getContext('2d');\n\n    this.updateVisual();\n}\n\nlght.object.prototype.drawPreloader = function(){\n    if(!this.display) return\n    if(this.preloader.width >0 && this.preloader.height > 0){\n        let x = this.preloader.maxes[0] + this.preloader.width/2;\n        let y = this.preloader.maxes[2] + this.preloader.height/2;\n        x = Math.ceil(x); y = Math.ceil(y);\n\n        this.parent.context.save()\n        this.parent.context.translate(x,y)\n        lght.drawImg(this.parent.context,this.preloader,this.preloader.width,this.preloader.height);\n        this.parent.context.restore()\n    }\n}\n\n\n//<------------------SHAPE DRAWING FUNCTION---------------->\nlght.object.prototype.draw = function(){\n    if(!this.display) return\n    this.shapes.forEach(s=>{\n        lght.drawShape(this.parent.context,this.x+s.x,this.y+s.y,s)\n    })\n}\n\n//MASTER FUNCTION\nlght.drawShape = function(c,x,y,shape){\n    if(!shape.display) return\n    if(shape.border || shape.borderOnly) this.drawShapeKind(c,shape,x,y,true,1,shape.borderColor,shape.shadow);\n    else if(!shape.borderOnly && !shape.border) this.drawShapeKind(c,shape,x,y,false,shape.opacity,shape.color,shape.shadow);\n    if(!shape.borderOnly) this.drawShapeKind(c,shape,x,y,false,shape.opacity,shape.color);\n}\n\nlght.drawShapeKind = function(c,s,x,y,stroke,opacity,color,shadow){\n    opacity = opacity * s.parent.opacity;\n    if(opacity == 0 || opacity <0 ) return\n    x= Math.ceil(x); y = Math.ceil(y);\n\n    c.save()\n    c.globalAlpha = opacity\n    c.fillStyle = color\n    c.strokeStyle = color\n    c.lineWidth = s.borderWidth\n    c.translate(x,y)\n    c.scale(s.scaleX,s.scaleY)\n\n    if(shadow){\n        const {color,blur,offsetX,offsetY} = shadow\n        c.shadowColor = color\n        c.shadowBlur = blur\n        c.shadowOffsetX = offsetX\n        c.shadowOffsetY = offsetY\n    }\n\n    switch(s.kind){\n        case 'rect':\n            lght.drawRect(c, s.w, s.h, s.rotation, stroke); break;\n        case 'arc':\n            lght.drawArc(c, s.rad,s.arcDegree,s.rotation, stroke); break;\n        case 'text':\n            lght.drawText(c, s.text,s.font, stroke,s.textAlign ,s.w, s.h,s.rotation); break;\n        case 'img':\n            if(s.imageLoaded) lght.drawImg(c, s.sprite,s.w,s.h,s.rotation); break;\n        case 'poly':\n            lght.drawPoly(c, s.polyPoints,s.rotation, stroke); break;\n        case 'line':\n            if(stroke){\n                const points = s.points.map(((position,index)=>{\n                    const [x,y] = position\n                    if(index === 0){\n                        const angle = degToRad(findAngle2Point(...position,...s.points[index+1]))\n                        return [x-s.borderWidth*Math.cos(angle),y+s.borderWidth*Math.sin(angle)]\n                    }\n                    else if(index === s.points.length-1){\n                        const angle = degToRad(findAngle2Point(...position,...s.points[index-1]))\n                        return [x-s.borderWidth*Math.cos(angle),y+s.borderWidth*Math.sin(angle)]\n                    }\n                    else return [x,y]\n                }))\n                lght.drawLine(c,points,s.rotation,s.lineWidth+s.borderWidth);\n            }\n            else lght.drawLine(c,s.points,s.rotation,s.lineWidth); break;\n        case 'roundedRectangle':\n            lght.drawRoundedRectangle(c,s.w,s.h,s.rotation,s.borderRadius,stroke)\n            break\n        default:\n            break\n    }\n    if(s.clip && s.clipImageLoaded){\n        c.clip()\n        c.rotate(degToRad(s.rotation))\n        if(typeof s.clipSpriteSheetX === 'number' && typeof s.clipSpriteSheetY === 'number'){\n            const spriteWidth = s.clipImage.width / s.spriteLengthX\n            const spriteHeight = s.clipImage.height / s.spriteLengthY\n            const clipStartX = s.clipSpriteSheetX * spriteWidth\n            const clipStartY = s.clipSpriteSheetY * spriteHeight\n            c.drawImage(s.clipImage,clipStartX,clipStartY,spriteWidth,spriteHeight,-s.width/2,-s.height/2,s.width,s.height)\n        }\n        else c.drawImage(s.clipImage,-s.width/2,-s.height/2,s.width,s.height)\n    }\n\n    c.restore()\n}\n\n//DRAWING RECTANGLE\nlght.drawRect = function(c,w,h,rotation,stroke){\n    c.rotate(degToRad(360-rotation))\n    if(stroke) c.strokeRect(-w/2,-h/2,w,h);\n    else c.fillRect(-w/2,-h/2,w,h);\n}\n\nlght.drawRoundedRectangle = (c,w,h,rotation,borderRadius,stroke)=>{\n    c.rotate(degToRad(360,rotation))\n    c.beginPath()\n    c.moveTo(0,-h*0.5)\n    c.lineTo(-w*0.5+borderRadius,-h*0.5)\n    c.quadraticCurveTo(-w*0.5,-h*0.5,-w*0.5,-h*0.5+borderRadius)\n    c.lineTo(-w*0.5,h*0.5-borderRadius)\n    c.quadraticCurveTo(-w*0.5,h*0.5,-w*0.5+borderRadius,h*0.5)\n    c.lineTo(w*0.5-borderRadius,h*0.5)\n    c.quadraticCurveTo(w*0.5,h*0.5,w*0.5,h*0.5-borderRadius)\n    c.lineTo(w*0.5,-h*0.5+borderRadius)\n    c.quadraticCurveTo(w*0.5,-h*0.5,w*0.5-borderRadius,-h*0.5)\n    c.lineTo(0,-h*0.5)\n    c.closePath()\n    if(stroke) c.stroke()\n    else c.fill()\n}\n\n//DRAWING CIRCLES\nlght.drawArc = function(c,rad,arcDegree,rotation,stroke){\n    c.beginPath();\n\n    const br = degToRad(360 - rotation - arcDegree);\n    const er = degToRad(360 - rotation);\n\n    if(arcDegree < 360){\n        const [x,y] = rotatePoint(0,0,rad,0,360-rotation-arcDegree);\n        c.moveTo(x,y); c.moveTo(0,0);\n    }\n\n    c.arc(0,0,rad,br,er);\n\n    if(stroke) c.stroke();\n    else c.fill();\n    c.closePath();\n\n}\n\n//DRAWING TEXT\n\nlght.drawText = function(c,text,font,stroke,textAlign,width,height,rotation){\n    c.textAlign = textAlign;\n    c.font = font;\n    c.rotate(degToRad(360-rotation))\n    if(stroke) c.fillText(text,Math.ceil(-width/2),Math.ceil(height/3.5));\n    else c.fillText(text,Math.ceil(-width/2),Math.ceil(height/3.5))\n}\n\n//DRAWING IMAGES\nlght.drawImg = function(c,sprite,w,h,rotation){\n    c.rotate(degToRad(360-rotation));\n    c.drawImage(sprite,-w/2,-h/2,w,h);\n}\n\nlght.drawPoly = (c,points,rotation,stroke) => {\n    if(points.length === 0 || !points) return \n    c.rotate(degToRad(360-rotation))\n    c.beginPath()\n    c.moveTo(...points[0])\n    points.forEach(([x,y])=>c.lineTo(x,y))\n    c.closePath()\n    if(stroke) c.stroke()\n    else c.fill()\n}\n\nlght.drawLine = (c,points,rotation,lineWidth)=>{\n    c.beginPath()\n    c.rotate(degToRad(360-rotation))\n    c.moveTo(...points[0])\n    points.forEach(([x,y])=>c.lineTo(x,y))\n    c.lineWidth = lineWidth\n    c.stroke()\n}\n\nlght.object.prototype.addShape = function (property) {\n    let shape = new lght[property.kind](property,this);\n    this.updateVisual()\n    return shape\n}\n\nlght.app.prototype.addObject = function (property) {\n    return new lght.object(property,this);\n}\n\nlght.app.prototype.addStorage = function (property){\n    return new lght.storage(property,this)\n}\n\nlght.app.prototype.removeObject = function (obj) {\n    this.objects.splice(this.objects.indexOf(obj),1);\n}\n\nexport default lght","import lght from './lght/lght'\nconst pd = 2\nconst handHeight = 75*pd\nconst spriteLink = 'https://upload.wikimedia.org/wikipedia/commons/9/95/UNO_cards_deck.svg'\nconst View = class{\n  constructor(ref,ref2){\n\n    this.cardSpriteColumn = 14\n    this.cardSpriteRow = 8\n    this.cardSpriteReference = {\n      wild:[0,13],\n      Draw4:[4,13],\n      colorReference:['red','yellow','green','blue'],\n      otherReference:['Skip','Reverse','Draw 2']\n    }\n    this.app = new lght.app(ref)\n    this.app.backgroundColor = 'none'\n    this.staticApp = new lght.app(ref2,{constantRender:false})\n    this.staticApp.backgroundColor='none'\n    this.app.pixelDensity = pd\n    this.app.canvas.width = 850*pd\n    this.app.canvas.height = 650*pd\n    this.staticApp.pixelDensity = pd\n    this.staticApp.canvas.width = 850*pd\n    this.staticApp.canvas.height = 650*pd\n    console.log(this.staticApp.canvas)\n    this.staticApp.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,zIndex:-10}).addShape({kind:'roundedRectangle',w:this.app.canvas.width,h:this.app.canvas.height,clip:true,clipImageLink:'assets/wood.jpg'})\n    this.staticApp.turnFunctions(this.staticApp)\n    this.positionReference = {\n      leaderBoard:[700*pd,279*pd],\n      drawDeck:[300*pd,279*pd],\n      playDeck:[this.app.canvas.width/2 + 75*pd,279*pd],\n      playerDeck:[this.app.canvas.width/2,this.app.canvas.height-(handHeight/2)]\n    }\n\n    let drawable = false\n    let resolveFunction = ()=>{}\n    this.drawDeck = this.createDeck('blue 2',300*pd,279*pd)\n    this.drawDeck.addShape({kind:'text',text:'Draw Here',color:'black',y:85*pd,font:'35px Times News Roman'})\n    this.drawDeck.flip()\n    this.drawDeck.pressedEvent(()=>{\n      if(!drawable) return\n      else resolveFunction()\n    })\n    this.awaitDraw = ()=>new Promise(r=>{\n            drawable = true\n            resolveFunction = (r)\n    })\n    this.cancelDraw = ()=>drawable = false\n\n    this.createHand()\n    this.createLeaderboard()\n    this.drawAnnouncement()\n    this.configureStartGameMessage()\n    this.configureUnoMessage()    \n    this.drawColorChoser()\n    this.drawSpecialInfo()\n  }\n\n  animatePlayerPlay = (content)=>this.animatePlay(content,...this.positionReference.playerDeck)\n  animatePlayerDraw = ()=>this.animateDraw(...this.positionReference.playerDeck)\n  animateLeaderboardDraw = ()=>this.animateDraw(...this.positionReference.leaderBoard)\n  animateLeaderboardPlay = (content)=> this.animatePlay(content,...this.positionReference.leaderBoard)\n\n\n\n  drawSpecialInfo = ()=>{\n    const specialInfo = this.app.addObject({x:this.positionReference.playDeck[0],y:this.positionReference.playDeck[1] + 85*pd})\n    specialInfo.addShape({kind:'roundedRectangle',display:false,w:this.app.canvas.width,h:50*pd})\n    const text = specialInfo.addShape({kind:'text',font:'40px Times News Roman',text:''})\n    const colors = ['red','blue','yellow','green']\n    const textColor = ['red','blue','#9b870c','green']\n    this.activateInfo = (color)=>{\n      console.log(color)\n      const tc = textColor[colors.indexOf(color)]\n      text.color = tc\n      text.text = color.split('').map((e,i)=>(i===0)?e.toUpperCase():e).join('')\n      specialInfo.updateVisual()\n    }\n    this.cancelInfo = ()=>{\n      text.text = ''\n      specialInfo.updateVisual()\n    }\n  }\n\n  animateDraw = (endX,endY)=>new Promise(r=>{\n    const animationTime = 500\n    const card = this.createCard(null,true)\n    card.x = this.positionReference.drawDeck[0]\n    card.y = this.positionReference.drawDeck[1]\n    card.zIndex = -1\n    card.display = true\n    card.addAnimation('x',endX,animationTime)\n    card.addAnimation('y',endY,animationTime)\n    card.shapes[0].addAnimation('scaleX',0.2,animationTime,r)\n    card.shapes[0].addAnimation('scaleY',0.2,animationTime,()=>card.kill())\n  })\n\n  animatePlay = (content,startX,startY)=>new Promise(r=>{\n    const animationTime = 500\n    const card = this.createCard(content)\n    card.shapes[0].scaleX = 0.2\n    card.shapes[0].scaleY = 0.2\n    card.x = startX\n    card.y = startY\n    card.display = true\n    card.addAnimation('x',this.playDeck.x,animationTime,()=>{\n      this.playDeck.kill()\n      this.playDeck=card\n    })\n    card.addAnimation('y',this.playDeck.y,animationTime,r)\n    card.shapes[0].addAnimation('scaleX',1,animationTime)\n    card.shapes[0].addAnimation('scaleY',1,animationTime)\n    if(content.match(/Draw 4/) || content.match(/Wild/)) this.activateInfo(content.split(' ')[0])\n    else this.cancelInfo()\n  })\n\n  createActionPanel(actionFunction){\n    const actionalPanel = this.app.addStorage({x:100*pd,y:279*pd,spacing:20,direction:'column'})\n    actionalPanel.addShape({kind:'roundedRectangle',w:120*pd,h:150*pd,borderRadius:10*pd,color:'white',shadow:{color:'black',offsetX:5,offsetY:-5,blur:10},border:true,borderWidth:5,borderColor:'black'})\n    actionalPanel.addShape({kind:'text',font:'32px Times News Roman',text:\"Actions:\",y:-60*pd})\n    actionalPanel.model = ['Copy Link','Leave Game','Restart Game']\n    actionalPanel.elementFunction = (link)=>{\n      const shape = actionalPanel.addShape({kind:'text',font:'30px Times News Roman',text:link})\n      shape.hoverEvent(()=>{\n        shape.color = 'yellow'\n        actionalPanel.updateVisual()\n      },()=>{\n        shape.color = 'black'\n        actionalPanel.updateVisual()\n      })\n      shape.pressedEvent(()=>actionFunction[link.split(' ').join('')]())\n      return shape\n    }\n    actionalPanel.updateToModel()\n  }\n\n  createLeaderboard(){\n    const leaderBoard = this.staticApp.addStorage({x:700*pd,y:279*pd,spacing:10,direction:'column'})\n    leaderBoard.addShape({kind:'roundedRectangle',w:120*pd,h:150*pd,borderRadius:10*pd,color:'white',shadow:{color:'black',offsetX:5,offsetY:-5,blur:10},border:true,borderWidth:5,borderColor:'black'})\n    leaderBoard.addShape({kind:'text',font:'32px Times News Roman',text:\"Turn Board:\",y:-60*pd})\n    const turnIndicator = this.app.addObject({display:false})\n    turnIndicator.addShape({x:85*pd,kind:'poly',specialPolygon:true,numberOfSide:3,color:'yellow',radius:10*pd,rotation:180})\n    let color = ['green','red','darkyellow']\n    leaderBoard.elementFunction = (content,i)=>{return leaderBoard.addShape({kind:'text',font:'30px Times News Roman',color:color[i],text:content})}\n    \n    this.updateTurnIndicator = (turn)=>{\n      const {absoluteY,absoluteX} = leaderBoard.shapes[turn+2]\n      turnIndicator.x = absoluteX + 10*pd\n      turnIndicator.addAnimation('y',absoluteY,200,()=>{\n        turnIndicator.display = true\n        let numberOfLoops = 5\n        const fadeOut = ()=>{\n          numberOfLoops--\n          if(numberOfLoops<0) return\n          turnIndicator.addAnimation('opacity',0,500,fadeIn)\n        }\n        const fadeIn = ()=>turnIndicator.addAnimation('opacity',1,500,fadeOut)\n        fadeOut()\n      })\n    }\n    this.updateLeaderboard = (players)=>{\n          leaderBoard.model = players\n          leaderBoard.updateToModel()\n          this.staticApp.turnFunctions(this.staticApp)\n    }\n  }\n\n  createHand(){\n    let cards = []\n    let resolveFunction = ()=>{}\n    let verifyFunction = ()=>{}\n    let onSelect = false\n    const playerHand = this.app.addStorage({spacing:-70*pd,y:this.app.canvas.height-(handHeight/2),x:this.app.canvas.width/2,model:cards})\n    playerHand.addShape({kind:'rect',color:'brown',w:this.app.canvas.width,h:handHeight})\n    playerHand.elementFunction = (content)=>{\n      let position = []\n      if(content.match(/Wild/)) position = this.cardSpriteReference.wild\n      else if(content.match(/Draw 4/)) position = this.cardSpriteReference.Draw4\n      else{\n        const color = content.split(' ')[0]\n        const action = content.split(' ').slice(1).join(' ')\n        position[0] = this.cardSpriteReference.colorReference.indexOf(color)\n        if(parseInt(action)) position[1] = parseInt(action)\n        else position[1] = this.cardSpriteReference.otherReference.indexOf(action) + 10\n      }\n      const shape = playerHand.addShape({y:30,clipSpriteSheetX:position[1],clipSpriteSheetY:position[0],spriteLengthX:this.cardSpriteColumn,spriteLengthY:this.cardSpriteRow,kind:'roundedRectangle',color:'white',w:102.5*pd*1.2,h:145.5*pd*1.2,clip:true,clipImageLink:spriteLink,borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black',shadow:{color:'black',blur:1.25*pd,offsetX:1.75*pd,offSetY:1.75*pd}})\n      shape.hoverEvent(()=>{\n        if(verifyFunction(content) && onSelect) shape.borderColor = 'yellow'\n        shape.borderWidth = 5*pd\n        shape.addAnimation('y',-100,200)\n      },()=>{\n        shape.borderColor = 'black'\n        shape.borderWidth = 1.25*pd\n        shape.addAnimation('y',30,200)\n      })\n      shape.pressedEvent(()=>{\n            if(!verifyFunction(content)) return\n            onSelect = false\n            shape.kill()\n            resolveFunction(content)\n      })\n      return shape\n    }\n    this.updateCards = (card)=>{\n      playerHand.model = card\n      playerHand.updateToModel()\n    }\n    this.awaitSelection = (vf)=>new Promise(r=>{\n      verifyFunction = vf\n      resolveFunction = r\n      onSelect = true\n    })\n    this.cancelSelection = ()=>onSelect = false\n  }\n\n  createDeck(content,x,y){\n    const deckCardOption = {kind:'roundedRectangle',color:'white',w:102.5*pd,h:145.5*pd,borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black'}\n    const deck = this.staticApp.addObject({x,y})\n    deck.addShape({x:6*pd,y:-5*pd,...deckCardOption})\n    deck.addShape({x:4*pd,y:-3.75*pd,...deckCardOption})\n    deck.addShape({x:3*pd,y:-2.5*pd,...deckCardOption})\n    deck.addShape({x:1.5*pd,y:-1.25*pd,...deckCardOption})\n    const card = this.createCard(content)\n    card.x = x; card.y = y\n    card.shapes[0].shadow = null\n    card.shapes[0].border = false\n    card.display = true\n    card.updateVisual()\n    this.staticApp.turnFunctions(this.staticApp)\n    return card\n  }\n\n  createCard(content,back = false){\n    const card = this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,display:false})\n    if(back){\n      card.addShape({kind:'roundedRectangle',color:'white',w:102.5*pd,h:145.5*pd,clip:true,clipImageLink:'assets/back.png',borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black',shadow:{color:'black',blur:1.25*pd,offsetX:1.75*pd,offSetY:1.75*pd}})\n    }\n    else{let flipped = false\n    let position = []\n    if(content.match(/Wild/)) position = this.cardSpriteReference.wild\n    else if(content.match(/Draw 4/)) position = this.cardSpriteReference.Draw4\n    else{\n      const color = content.split(' ')[0]\n      const action = content.split(' ').slice(1).join(' ')\n      position[0] = this.cardSpriteReference.colorReference.indexOf(color)\n      if(parseInt(action)) position[1] = parseInt(action)\n      else position[1] = this.cardSpriteReference.otherReference.indexOf(action) + 10\n    }\n    const shape = card.addShape({clipSpriteSheetX:position[1],clipSpriteSheetY:position[0],spriteLengthX:this.cardSpriteColumn,spriteLengthY:this.cardSpriteRow,kind:'roundedRectangle',color:'white',w:102.5*pd,h:145.5*pd,clip:true,clipImageLink:spriteLink,borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black',shadow:{color:'black',blur:1.25*pd,offsetX:1.75*pd,offSetY:1.75*pd}})\n  \n    const changeToBack =()=>{\n      shape.clipSpriteSheetX = null\n      shape.changeClipImage('assets/back.png')\n    }\n\n    const changeToFront = ()=>{\n      shape.clipSpriteSheetX = position[1]\n      shape.changeClipImage(spriteLink)\n    }\n\n    const flipAnimation = (back=true)=>new Promise(r=>{\n      shape.addAnimation('scaleX',0,100,()=>{\n        if(back) changeToBack()\n        else changeToFront()\n        shape.addAnimation('scaleX',1,100,r)\n      })\n    })\n    card.flip = ()=>{\n      flipped = !flipped\n      return flipAnimation(flipped)\n    }}\n    return card\n  }\n\n  drawColorChoser = ()=>{\n    const colors = ['red','blue','yellow','green']\n    const textColor = ['red','blue','#9b870c','green']\n    let choosingColor = false\n    let resolveFunction = ()=>{}\n    const colorChooser = this.app.addStorage({display:false,zIndex:1000,x:this.app.canvas.width/2,y:this.app.canvas.height/2 - 50*pd,model:colors,spacing:25,direction:'column'})\n    colorChooser.addShape({kind:'roundedRectangle',w:200*pd,h:200*pd,borderRadius:10*pd,color:'white',shadow:{color:'black',offsetX:5,offsetY:-5,blur:10},border:true,borderWidth:5,borderColor:'black'})\n    colorChooser.addShape({kind:'text',font:'35px Times News Roman',text:'Choose a color:',y:-85*pd})\n    colorChooser.elementFunction = (color,i)=>{\n      const shape = colorChooser.addShape({kind:'text',color:textColor[i],font:'30px Times News Roman',text:color.split('').map((e,i)=>(i===0)?e.toUpperCase():e).join('')})\n      shape.hoverEvent(()=>{\n        shape.color = 'yellow'\n        colorChooser.updateVisual()\n      },()=>{\n        shape.color = textColor[i]\n        colorChooser.updateVisual()\n      })\n      shape.pressedEvent(()=>{if(choosingColor){resolveFunction(color);colorChooser.display = false}})\n      return shape\n    }\n    colorChooser.updateToModel()\n    this.chooseColor = ()=>new Promise(r=>{\n      colorChooser.display = true\n      choosingColor = true\n      resolveFunction = r\n    })\n  }\n\n  drawAnnouncement(){\n      let animationDuration = 500\n\n      this.announcementQueue = []\n      this.announcmentPerpetual = []\n      this.onAnnouncementPerpetual = false\n      this.onAnnoucementChanged = false\n      \n      //Format: [text,color,time/perpetual,started]\n      this.announcement = this.app.addObject({x:this.app.canvas.width/2,y:50*pd,positionIndicator:false})\n      this.annoucementText = this.announcement.addShape({kind:'text',font:'100px Times News Roman',color:'orange',text:'',display:false})\n      this.announcement.addShape({kind:'roundedRectangle',w:this.app.canvas.width/2,h:100*pd,display:false})\n      const fadeOut = (func)=>this.annoucementText.addAnimation('opacity',0,animationDuration,()=>{this.annoucementText.display=false;if(func) func()})\n      const fadeIn = (funcDone)=>this.annoucementText.addAnimation('opacity',1,animationDuration,funcDone)\n      const fadeOutThenFadeIn = (func,funcDone)=> fadeOut(()=>{func();this.annoucementText.display = true; fadeIn(funcDone)})\n\n      this.updateAnnouncement = ()=>{\n          if(this.announcementQueue.length > 0 && !this.announcementQueue[0][3]){\n              let [text,color,time] = this.announcementQueue[0]\n              fadeOutThenFadeIn(()=>{\n                  this.annoucementText.text = text\n                  this.annoucementText.color = color\n                  setTimeout(()=>{this.announcementQueue.splice(0,1);this.updateAnnouncement();},time+animationDuration)\n              })\n              this.announcementQueue[0][3] = true\n          }\n          else if(this.announcementQueue.length >0) return\n          else if(!this.onAnnouncementPerpetual && this.annoucementText.display) return fadeOut()\n          else if(this.onAnnouncementPerpetual && ((!this.annoucementText.display) || this.onAnnoucementChanged)) return fadeOutThenFadeIn(()=>{\n              let [text,color] = this.announcmentPerpetual\n              this.annoucementText.text = text\n              this.annoucementText.color = color\n          })\n      }\n    }\n\n    changeAnnoucementPerpetual(text,color){\n      this.announcmentPerpetual = [text,color]\n      this.onAnnoucementChanged = true\n      this.updateAnnouncement()\n    }\n\n    addToAnnoucementQueue(text,color,time){\n      this.announcementQueue.push([text,color,time,false])\n      this.updateAnnouncement()\n    }\n\n    configureUnoMessage(){\n      const uno = this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,zIndex:1000})\n      const shape = uno.addShape({kind:'img',spriteLink:'./assets/18.svg',scaleX:0,scaleY:0})\n      uno.display = false\n      this.UNO = ()=>{\n        uno.display = true\n        shape.addAnimation('scaleX',1.5,400,()=>{\n          setTimeout(()=>{\n            shape.addAnimation('scaleX',0,100,()=>uno.display = false)\n            shape.addAnimation('scaleY',0,100)\n          },500)\n        })\n        shape.addAnimation('scaleY',1.5,400)\n      }\n    }\n\n    configureStartGameMessage(){\n      const startGameObject = this.app.addObject({x:this.app.canvas.width-75*pd,y:this.app.canvas.height-30*pd,display:false})\n      const text = startGameObject.addShape({kind:'text',text:'Start Game',color:'orange',font:'40px Times News Roman'})\n      startGameObject.addShape({kind:'roundedRectangle',w:200,h:100,display:false})\n      let activated = false\n      let resolveFunction = ()=>{}\n      const fadeIn = ()=>{\n          if(!activated){\n              text.opacity = 1;\n          }\n          else text.addAnimation('opacity',1,1000,fadeOut)\n      }\n      const fadeOut = ()=>{\n          if(!activated){\n              text.opacity = 1\n          }\n          else text.addAnimation('opacity',0,1000,fadeIn)\n      }\n\n      startGameObject.pressedEvent(()=>{\n          activated = false\n          startGameObject.display = false\n          resolveFunction()\n      })\n\n      this.initiateStartGameMessage = (func=()=>{})=>{\n          if(!activated){\n              resolveFunction = func\n              activated = true\n              startGameObject.display = true\n              fadeOut()\n          }\n      }\n      this.turnOffStartGameMessage = ()=>{\n          startGameObject.display = false\n      }\n  }\n  kill = ()=>{\n    this.app.kill()\n    this.staticApp.kill()\n  }\n}\n\nexport default View","import View from './view'\nconst io = require('socket.io-client')\nconst axios = require('axios')\nconst _ = require('lodash')\n\nconst Controller = async (canvasref,canvasstatic,token,userid,CopyLink,LeaveGame)=>{\n      console.log(token,userid)\n      let view = new View(canvasref,canvasstatic)\n      let model = null\n      const url = (process.env.NODE_ENV==='production')?'/':'http://localhost:4000'\n      const socket = io.connect(url,{query:{token}})\n\n      const play = (card)=>{\n            socket.emit('Play Card',card)\n      }\n\n      const draw = ()=>{\n            socket.emit('Draw Card')\n      }\n\n      const verify = card=>{\n            if(card === 'Wild' || card==='Draw 4' || model.currentTopCard === 'Wild' || model.currentTopCard === 'Draw 4') return true\n            const color = model.currentTopCard.split(' ')[0]\n            const action = model.currentTopCard.split(' ').slice(1).join(' ')\n            const color2 = card.split(' ')[0]\n            const action2 = card.split(' ').slice(1).join(' ')\n            return ((color===color2) || (action===action2))\n      }\n\n      const update = async (m)=>{\n            console.log(m)\n            let oldModel = (model)?_.cloneDeep(model):null\n            model = m\n            if(!model.inGame) view.initiateStartGameMessage(()=>socket.emit('Start Game'))\n            else view.turnOffStartGameMessage()\n            if(parseInt(model.onTurn) == userid){\n                  view.awaitSelection(verify).then((content)=>{view.cancelDraw();view.cancelSelection();play(content)})\n                  view.awaitDraw().then(()=>{view.cancelSelection();view.cancelDraw();draw()})\n            }\n            else{\n                  view.cancelDraw()\n                  view.cancelSelection()\n            }\n            //check with old model\n            if(oldModel){\n                  if(parseInt(oldModel.onTurn) != parseInt(model.onTurn) && model.onTurn >= 0) view.updateTurnIndicator(parseInt(model.onTurn))\n                  let newAnnoucements = model.feed.slice(oldModel.feed.length)\n                  let newDirectives = model.directives.slice(oldModel.directives.length)\n                  const players = model.players.map(e=>e.username)\n                  const oldPlayer = oldModel.players.map(e=>e.username)\n                  if(JSON.stringify(players) !== JSON.stringify(oldPlayer)) view.updateLeaderboard(players)\n                  if(newAnnoucements.length) newAnnoucements.forEach(message=>view.addToAnnoucementQueue(message,'black',1000))\n                  if(newDirectives.length){\n                        for(let [code,user] of newDirectives){\n                              switch(code){\n                                    case 1:\n                                          if(user === userid){\n                                                await view.animatePlayerDraw()\n                                                const latestDraw = model.players[userid].cards.slice(oldModel.players[userid].cards.length)[0]\n                                                if(verify(latestDraw)) play(latestDraw)\n                                                else socket.emit('Pass Turn')  \n                                          }\n                                          else view.animateLeaderboardDraw()\n                                          break;\n                                    case 2:\n                                          if(user === userid) for(let i = 0;i<4;i++)(await view.animatePlayerDraw())\n                                          else for(let i = 0;i<4;i++)(await view.animateLeaderboardDraw())\n                                          break;\n                                    case 3:\n                                          if(user === userid) for(let i = 0;i<2;i++)(await view.animatePlayerDraw())\n                                          else for(let i = 0;i<2;i++)(await view.animateLeaderboardDraw())\n                                          break;\n                                    case 4:\n                                          if(user===userid) await view.animatePlayerPlay(model.currentTopCard)\n                                          else await view.animateLeaderboardPlay(model.currentTopCard)\n                                          break;      \n                                    case 5:\n                                          view.UNO()\n                                          break;\n                                    case 7:\n                                          const animateToPlayer = async ()=>{for(let i = 0;i<4;i++)(await view.animatePlayerDraw())}\n                                          const animateToLeaderBoard = async ()=>{for(let i = 0;i<4;i++)(await view.animateLeaderboardDraw())}\n                                          animateToPlayer()\n                                          animateToLeaderBoard()\n                                          break;\n                                    default:break;\n                              }\n                        }\n                  }\n                  const oldCard = oldModel.players[userid].cards\n                  const newCard = model.players[userid].cards\n                  if(JSON.stringify(oldCard) !== JSON.stringify(newCard))view.updateCards(model.players[userid].cards)\n            }\n            else{\n                  const players = model.players.map(e=>e.username)\n                  view.updateLeaderboard(players)\n                  view.updateCards(model.players[userid].cards)\n                  if(model.onTurn>=0)view.updateTurnIndicator(model.onTurn)\n                  view.playDeck = view.createDeck(model.currentTopCard,view.app.canvas.width/2 + 150,279*2)\n            }\n      }\n\n      socket.on('Update',update)\n      socket.on('New Game',(m)=>{\n            view.kill()\n            view = new View(canvasref,canvasstatic)\n            view.createActionPanel({\n                  CopyLink,\n                  LeaveGame,\n                  RestartGame:()=>socket.emit('Restart Game')\n            })\n            model = null\n            update(m)\n      })\n\n      socket.on('End Game',(winner)=>{\n            alert(`${model.players[winner].username} had won the game!`)\n            view.addToAnnoucementQueue(`${model.players[winner].username} had won the game`)\n      })\n\n      socket.on('Choose Color',async ()=>{\n            const color = await view.chooseColor()\n            socket.emit('Choose Color',color)\n      })\n\n      socket.on('Error',(error)=>console.log(error))\n\n      view.createActionPanel({\n            CopyLink,\n            LeaveGame,\n            RestartGame:()=>socket.emit('Restart Game')\n      })\n      console.log = ()=>{}\n}\n\nexport default Controller","import React, { useEffect, useState, useRef } from 'react'\nimport {connect} from 'react-redux'\nimport Controller from '../controller'\nimport cogoToast from 'cogo-toast'\n\nconst Game = connect(({token,playerid,id})=>({token,playerid,id}),dispatch=>({dispatch}))(({token,playerid,id,dispatch})=>{\n    const ref = useRef()\n    const ref2 = useRef()\n    \n    const copyToClipboard = str => {\n        const el = document.createElement('textarea');\n        el.value = str;\n        document.body.appendChild(el);\n        el.select();\n        document.execCommand('copy');\n        document.body.removeChild(el);\n        cogoToast.success('Copied!')\n    };\n    const url = `https://playuno.net/join/${id}`\n\n    useEffect(()=>{\n      Controller(ref.current,ref2.current,token,playerid,()=>copyToClipboard(url),()=>dispatch({type:'LOG_OUT'}))\n    },[])\n    return (\n      <div className=\"App\">\n        <div className='d-flex game' style={{alignItems:'center',height:'100%',width:'100%',position:'absolute'}}>\n          <canvas ref={ref}  style={{width:850,height:650,margin:'auto',backgroundColor:'transparent'}}></canvas>      \n        </div>\n        <div className='d-flex game2' style={{alignItems:'center',height:'100%',width:'100%',position:'absolute'}}>\n          <canvas ref={ref2} style={{width:850,height:650,margin:'auto',backgroundColor:'transparent'}}></canvas>      \n        </div>\n      </div>\n    );\n})\nexport default Game","import React, { useState, useEffect } from 'react'\nimport BarLoader from 'react-spinners/BarLoader'\nimport {withRouter} from 'react-router-dom'\nimport {connect} from 'react-redux'\nimport {Formik,Form} from 'formik'\nconst {join} = require('../api')\n\nconst Join = (connect(({tempJoinId})=>({tempJoinId}),dispatch=>({dispatch}))(({dispatch,changeHistory,tempJoinId})=>{\n    const [loading,setLoading] = useState(false)\n\n\n    useEffect(()=>{\n        console.log(tempJoinId)\n        if(!tempJoinId){\n            dispatch({type:'JOINED'})\n        }\n    },[])\n\n    const joinGame = async ({username})=>{\n        setLoading(true)\n        console.log(tempJoinId)\n        const {data} = await join(tempJoinId,username)\n        const {token,id,playerid} = data\n        console.log(data)\n        dispatch({type:'JOIN_LOG_IN',token,id,playerid})\n        setLoading(false)\n    }\n\n    return (\n        <div className='container'>\n            {!loading &&\n                <div className='text-center'>\n                    <h1>Uno Online</h1>\n                    <div className='text-secondary'>Created by Long Tran</div>\n                    <div className='pt-5 pb-5 mt-5' style={{boxShadow:'0px 4px 16px rgba(31, 31, 31, 0.16)'}}>\n                        <Formik initialValues={{username:''}} onSubmit={joinGame}>\n                            {({handleSubmit,handleChange,handleBlur})=>(\n                                <Form>\n                                    <div className = 'container w-50'>\n                                        <label className='font-weight-bold'>Name:</label>\n                                        <input type='text' name='username' className='form-control' onChange={handleChange} onBlur={handleBlur}/>\n                                        <button className='btn btn-success mt-4' onSubmit={handleSubmit}>Join game</button>\n                                    </div>\n                                </Form>\n                            )}                            \n                        </Formik>\n                    </div>\n                </div>\n            }\n            <div style={{position:'absolute',top:'50%',width:'100%'}}>\n                <BarLoader color='blue' loading={loading} width='200px' css={{margin:'auto'}}/>\n            </div>\n        </div>\n    )\n}))\nexport default Join","import React, { useState } from 'react'\nimport BarLoader from 'react-spinners/BarLoader'\nimport {withRouter} from 'react-router-dom'\nimport {connect} from 'react-redux'\nimport {Formik,Form} from 'formik'\nconst {create} = require('../api')\n\nconst Landing = withRouter(connect(null,dispatch=>({dispatch}))(({dispatch,history})=>{\n    const [loading,setLoading] = useState(false)\n\n    const createGame = async ({username})=>{\n        setLoading(true)\n        const {data} = await create(username)\n        const {token,id,playerid} = data\n        dispatch({type:'LOG_IN',token,id,playerid})\n        setLoading(false)\n    }\n\n    return (\n        <div className='container'>\n            {!loading &&\n                <div className='text-center'>\n                    <h1>Uno Online</h1>\n                    <div className='text-secondary'>Created by Long Tran</div>\n                    <div className='pt-5 pb-5 mt-5' style={{boxShadow:'0px 4px 16px rgba(31, 31, 31, 0.16)'}}>\n                        <Formik initialValues={{username:''}} onSubmit={createGame}>\n                            {({handleSubmit,handleChange,handleBlur})=>(\n                                <Form>\n                                    <div className = 'container w-50'>\n                                        <label className='font-weight-bold'>Name:</label>\n                                        <input type='text' name='username' className='form-control' onChange={handleChange} onBlur={handleBlur}/>\n                                        <button className='btn btn-success mt-4' onSubmit={handleSubmit}>Create game</button>\n                                    </div>\n                                </Form>\n                            )}                            \n                        </Formik>\n                    </div>\n                </div>\n            }\n            <div style={{position:'absolute',top:'50%',width:'100%'}}>\n                <BarLoader color='blue' loading={loading} width='200px' css={{margin:'auto'}}/>\n            </div>\n        </div>\n    )\n}))\nexport default Landing","import React,{useEffect} from 'react';\nimport './App.css';\nimport {Provider,connect} from 'react-redux'\nimport {BrowserRouter as Router,Switch,Link,Route,useLocation,withRouter} from 'react-router-dom'\nimport Store from './redux'\nimport Game from './Page/Game';\nimport Join from './Page/Join';\nimport Landing from './Page/Landing';\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nconst Content = withRouter(connect(({loggedIn,joined})=>({loggedIn,joined}),(dispatch)=>({dispatch}))(({loggedIn,dispatch,history,joined})=>{\n    const {pathname} = useLocation()\n    useEffect(()=>{\n      console.log('pathname',pathname)\n      if(pathname.match(/join/) && !joined){\n        const tempJoinId = pathname.split('/')[2]\n        console.log(tempJoinId)\n        dispatch({type:'LOG_OUT_WITH_TEMP_JOIN',tempJoinId})\n        history.push('/join')\n      }\n      else if(loggedIn){\n        console.log('hello')\n        if(!pathname.match(/game/)) history.push('/game')\n      }\n      else history.push('/')\n    },[loggedIn,joined])\n\n    return(\n      <Switch>\n        <Route path='/game' exact component={Game}/>\n        <Route path='/join' exact>\n          <Join changeHistory={history}/>\n        </Route>\n        <Route path='/'exact component={Landing}/>\n      </Switch>\n    )\n}))\n\nfunction App() {\n  return (\n    <Provider store={Store}>\n      <Router>\n        <Content/>\n      </Router>\n    </Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","const axios = require('axios')\nconst url = (process.env.NODE_ENV === 'production')?'/':'http://localhost:4000'\n\nconst baseAPI = axios.create({baseURL:url})\nconst join = (id,username)=>baseAPI.post('join',{id,username})\nconst create = (username)=>baseAPI.post('create',{username})\n\nmodule.exports = {join,create}"],"sourceRoot":""}